<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[HelloDog]]></title>
  <subtitle><![CDATA[Keep Calm and Carry On]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://wsgzao.github.io/"/>
  <updated>2016-04-23T01:38:40.310Z</updated>
  <id>http://wsgzao.github.io/</id>
  
  <author>
    <name><![CDATA[wsgzao]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Git常用命令和Git团队使用规范指南]]></title>
    <link href="http://wsgzao.github.io/post/git/"/>
    <id>http://wsgzao.github.io/post/git/</id>
    <published>2016-04-22T08:22:32.000Z</published>
    <updated>2016-04-23T01:38:40.310Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/fAhm82RJ.png" alt=""></p>
<h2 id="前言">前言</h2><p>在2005年的某一天，Linux之父Linus Torvalds 发布了他的又一个里程碑作品——Git。它的出现改变了软件开发流程，大大地提高了开发流畅度，直到现在仍十分流行，完全没有衰退的迹象。其实一般情况下，只需要掌握git的几个常用命令即可，但是在使用的过程中难免会遇到各种复杂的需求，这时候经常需要搜索，非常麻烦，故总结了一下自己平常会用到的git操作。本文根据团队实践记录Git入门指南和Git常用命令，文章中不仅记录了Git的搭建和使用教程，还参考了大量Git团队使用规范上的经验，希望大家可以结合自己团队的实际应用场景让Git协作优雅的落地。</p>
<blockquote>
<p>Git是目前世界上最先进的分布式版本控制系统</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年04月22日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/git/" target="_blank" rel="external">http://wsgzao.github.io/post/git/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Git Book - <a href="https://git-scm.com/book/zh/" target="_blank" rel="external">https://git-scm.com/book/zh/</a><br>git简明指南 - <a href="http://rogerdudler.github.io/git-guide/index.zh.html" target="_blank" rel="external">http://rogerdudler.github.io/git-guide/index.zh.html</a><br>常用 Git 命令清单 - <a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html</a><br>猴子都能懂的GIT入门 - <a href="http://backlogtool.com/git-guide/cn/" target="_blank" rel="external">http://backlogtool.com/git-guide/cn/</a><br>Git教程 - <a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000</a></p>
<h2 id="SVN与Git的最主要的区别">SVN与Git的最主要的区别</h2><p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而干活的时候，用的都是自己的电脑，所以首先要从中央服务器哪里得到最新的版本，然后干活，干完后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，如果在局域网还可以，带宽够大，速度够快，如果在互联网下，如果网速慢的话，就纳闷了。</p>
<p>Git是分布式版本控制系统，那么它就没有中央服务器的，每个人的电脑就是一个完整的版本库，这样，工作的时候就不需要联网了，因为版本都是在自己的电脑上。既然每个人的电脑都有一个完整的版本库，那多个人如何协作呢？比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。</p>
<h2 id="Git搭建和使用">Git搭建和使用</h2><blockquote>
<p>Git上手并不难，深入学习还是建议多实践，可以参考扩展阅读中廖雪峰的Git教程</p>
</blockquote>
<h3 id="Git服务端">Git服务端</h3><blockquote>
<p>服务端搭建Git很简单，有更多需求不妨试试Gogs和Gitlab</p>
</blockquote>
<p>使用Gogs轻松搭建可能比GitLab更好用的Git服务平台 - <a href="http://wsgzao.github.io/post/gogs/" target="_blank" rel="external">http://wsgzao.github.io/post/gogs/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装git</span></span><br><span class="line">sudo apt-get install git</span><br><span class="line">yum install git</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个git用户，用来运行git服务</span></span><br><span class="line">sudo adduser git</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建证书使用公钥免密码登录(可选)</span></span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">vi ~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化Git仓库</span></span><br><span class="line">sudo git init --bare sample.git</span><br><span class="line">sudo chown -R git:git sample.git</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用shell登录</span></span><br><span class="line">vi /etc/passwd</span><br><span class="line">git:x:<span class="number">1001</span>:<span class="number">1001</span>:,,,:/home/git:/usr/bin/git-shell</span><br><span class="line"></span><br><span class="line"><span class="comment">#在客户端上克隆远程仓库</span></span><br><span class="line">git <span class="built_in">clone</span> git@server:/srv/sample.git</span><br></pre></td></tr></table></figure>
<p>管理公钥推荐使用Gitosis<br>Gitosis - <a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="external">https://github.com/res0nat0r/gitosis</a><br>Gitosis配置手记 - <a href="http://debugo.com/gitosis/" target="_blank" rel="external">http://debugo.com/gitosis/</a></p>
<p>管理权限推荐使用Gitolite<br>Gitolite - <a href="https://github.com/sitaramc/gitolite" target="_blank" rel="external">https://github.com/sitaramc/gitolite</a></p>
<h3 id="Git客户端">Git客户端</h3><blockquote>
<p>Git客户端可以按个人习惯来选择，遵守团队协作中的Git规范标准才是更重要的</p>
</blockquote>
<p>Git - <a href="https://git-scm.com/" target="_blank" rel="external">https://git-scm.com/</a><br>TortoiseGit - <a href="https://tortoisegit.org/" target="_blank" rel="external">https://tortoisegit.org/</a><br>SourceTree - <a href="https://www.sourcetreeapp.com/" target="_blank" rel="external">https://www.sourcetreeapp.com/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以最基本的Git命令行为例，先下载Git</span></span><br><span class="line">https://git-scm.com/download/</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置git提交用户名和邮箱，定义别名方便区分</span></span><br><span class="line">git config --global user.name <span class="string">"你的姓名"</span></span><br><span class="line">git config --global user.email <span class="string">"you@example.com"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#克隆仓库</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="built_in">cap</span>@<span class="number">172.28</span>.<span class="number">70.243</span>:/<span class="built_in">cap</span>/cap.git</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">clone</span> <span class="built_in">cap</span>@<span class="number">172.28</span>.<span class="number">70.243</span>:/<span class="built_in">cap</span>/cap.git</span><br><span class="line">Cloning into <span class="string">'cap'</span>...</span><br><span class="line">warning: You appear to have cloned an empty repository.</span><br><span class="line">Checking connectivity... done.</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试推送</span></span><br><span class="line">touch README</span><br><span class="line">git add README</span><br><span class="line">git commit -m <span class="string">"add readme"</span></span><br><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line">Counting objects: <span class="number">3</span>, done.</span><br><span class="line">Writing objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), <span class="number">199</span> bytes | <span class="number">0</span> bytes/s, done.</span><br><span class="line">Total <span class="number">3</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To <span class="built_in">cap</span>@<span class="number">172.28</span>.<span class="number">70.243</span>:/<span class="built_in">cap</span>/cap.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br></pre></td></tr></table></figure>
<h2 id="Git常用命令">Git常用命令</h2><p><strong>符号约定</strong></p>
<ul>
<li><code>&lt;xxx&gt;</code> 自定义内容</li>
<li><code>[xxx]</code> 可选内容</li>
<li><code>[&lt;xxx&gt;]</code>自定义可选内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#初始设置</span></span><br><span class="line">git config --global user.name <span class="string">"&lt;用户名&gt;"</span> <span class="comment">#设置用户名</span></span><br><span class="line">git config --global user.email <span class="string">"&lt;电子邮件&gt;"</span> <span class="comment">#设置电子邮件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#本地操作</span></span><br><span class="line">git add [-i] <span class="comment">#保存更新，-i为逐个确认。</span></span><br><span class="line">git status <span class="comment">#检查更新。</span></span><br><span class="line">git commit [<span class="operator">-a</span>] -m <span class="string">"&lt;更新说明&gt;"</span> <span class="comment">#提交更新，-a为包含内容修改和增删，-m为说明信息，也可以使用 -am。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#远端操作</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;git地址&gt; <span class="comment">#克隆到本地。</span></span><br><span class="line">git fetch <span class="comment">#远端抓取。</span></span><br><span class="line">git merge <span class="comment">#与本地当前分支合并。</span></span><br><span class="line">git pull [&lt;远端别名&gt;] [&lt;远端branch&gt;] <span class="comment">#抓取并合并,相当于第2、3步</span></span><br><span class="line">git push [<span class="operator">-f</span>] [&lt;远端别名&gt;] [&lt;远端branch&gt;] <span class="comment">#推送到远端，-f为强制覆盖</span></span><br><span class="line">git remote add &lt;别名&gt; &lt;git地址&gt; <span class="comment">#设置远端别名</span></span><br><span class="line">git remote [-v] <span class="comment">#列出远端，-v为详细信息</span></span><br><span class="line">git remote show &lt;远端别名&gt; <span class="comment">#查看远端信息</span></span><br><span class="line">git remote rename &lt;远端别名&gt; &lt;新远端别名&gt; <span class="comment">#重命名远端</span></span><br><span class="line">git remote rm &lt;远端别名&gt; <span class="comment">#删除远端</span></span><br><span class="line">git remote update [&lt;远端别名&gt;] <span class="comment">#更新分支列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#分支相关</span></span><br><span class="line">git branch [-r] [<span class="operator">-a</span>] <span class="comment">#列出分支，-r远端 ,-a全部</span></span><br><span class="line">git branch &lt;分支名&gt; <span class="comment">#新建分支</span></span><br><span class="line">git branch -b &lt;分支名&gt; <span class="comment">#新建并切换分支</span></span><br><span class="line">git branch <span class="operator">-d</span> &lt;分支名&gt; <span class="comment">#删除分支</span></span><br><span class="line">git checkout &lt;分支名&gt; <span class="comment">#切换到分支</span></span><br><span class="line">git checkout -b &lt;本地branch&gt; [-t &lt;远端别名&gt;/&lt;远端分支&gt;] <span class="comment">#-b新建本地分支并切换到分支, -t绑定远端分支</span></span><br><span class="line">git merge &lt;分支名&gt; <span class="comment">#合并某分支到当前分支</span></span><br></pre></td></tr></table></figure>
<p>Git常用命令 - <a href="http://gityuan.com/2015/06/27/git-notes/" target="_blank" rel="external">http://gityuan.com/2015/06/27/git-notes/</a></p>
<p><img src="http://gityuan.com/images/git/1.png" alt=""></p>
<ul>
<li>workspace: 本地的工作目录。（记作A）</li>
<li>index：缓存区域，临时保存本地改动。（记作B）</li>
<li>local repository: 本地仓库，只想最后一次提交HEAD。（记作C）</li>
<li>remote repository：远程仓库。（记作D）</li>
</ul>
<blockquote>
<p>以下所有的命令的功能说明，都采用上述的标记的A、B、C、D的方式来阐述。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#初始化</span></span><br><span class="line">git init //创建</span><br><span class="line">git <span class="built_in">clone</span> /path/to/repository //检出</span><br><span class="line">git config --global user.email <span class="string">"you@example.com"</span> //配置email</span><br><span class="line">git config --global user.name <span class="string">"Name"</span> //配置用户名</span><br><span class="line"></span><br><span class="line"><span class="comment">#操作</span></span><br><span class="line">git add &lt;file&gt; // 文件添加，A → B</span><br><span class="line">git add . // 所有文件添加，A → B</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">"代码提交信息"</span> //文件提交，B → C</span><br><span class="line">git commit --amend //与上次commit合并, *B → C</span><br><span class="line"></span><br><span class="line">git push origin master //推送至master分支, C → D</span><br><span class="line">git pull //更新本地仓库至最新改动， D → A</span><br><span class="line">git fetch //抓取远程仓库更新， D → C</span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> //查看提交记录</span><br><span class="line">git status //查看修改状态</span><br><span class="line">git diff//查看详细修改内容</span><br><span class="line">git show//显示某次提交的内容</span><br><span class="line"></span><br><span class="line"><span class="comment">#撤销操作</span></span><br><span class="line">git reset &lt;file&gt;//某个文件索引会回滚到最后一次提交， C → B</span><br><span class="line">git reset//索引会回滚到最后一次提交， C → B</span><br><span class="line">git reset --hard // 索引会回滚到最后一次提交， C → B → A</span><br><span class="line"></span><br><span class="line">git checkout // 从index复制到workspace， B → A</span><br><span class="line">git checkout -- files // 文件从index复制到workspace， B → A</span><br><span class="line">git checkout HEAD -- files // 文件从<span class="built_in">local</span> repository复制到workspace， C → A</span><br><span class="line"></span><br><span class="line"><span class="comment">#分支相关</span></span><br><span class="line">git checkout -b branch_name //创建名叫“branch_name”的分支，并切换过去</span><br><span class="line">git checkout master //切换回主分支</span><br><span class="line">git branch <span class="operator">-d</span> branch_name // 删除名叫“branch_name”的分支</span><br><span class="line">git push origin branch_name //推送分支到远端仓库</span><br><span class="line">git merge branch_name // 合并分支branch_name到当前分支(如master)</span><br><span class="line">git rebase //衍合，线性化的自动， D → A</span><br><span class="line"></span><br><span class="line"><span class="comment">#冲突处理</span></span><br><span class="line">git diff //对比workspace与index</span><br><span class="line">git diff HEAD //对于workspace与最后一次commit</span><br><span class="line">git diff &lt;<span class="built_in">source</span>_branch&gt; &lt;target_branch&gt; //对比差异</span><br><span class="line">git add &lt;filename&gt; //修改完冲突，需要add以标记合并成功</span><br><span class="line"></span><br><span class="line"><span class="comment">#其他</span></span><br><span class="line">gitk //开灯图形化git</span><br><span class="line">git config color.ui <span class="literal">true</span> //彩色的 git 输出</span><br><span class="line">git config format.pretty oneline //显示历史记录时，每个提交的信息只显示一行</span><br><span class="line">git add -i //交互式添加文件到暂存区</span><br></pre></td></tr></table></figure>
<h2 id="Git使用规范">Git使用规范</h2><p>Git 使用规范流程 - <a href="http://www.ruanyifeng.com/blog/2015/08/git-use-process.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/08/git-use-process.html</a><br>团队中的 Git 实践 - <a href="https://ourai.ws/posts/working-with-git-in-team/" target="_blank" rel="external">https://ourai.ws/posts/working-with-git-in-team/</a><br>构家网 git 团队协作使用规范 v2 - <a href="http://wenku.baidu.com/view/e1430d1b7f1922791788e81e" target="_blank" rel="external">http://wenku.baidu.com/view/e1430d1b7f1922791788e81e</a></p>
<blockquote>
<p>Git使用规范提醒</p>
</blockquote>
<ul>
<li>使用Git过程中，必须通过创建分支进行开发，坚决禁止在主干分支上直接开发。review的同事有责任检查其他同事是否遵循分支规范。</li>
<li>在Git中，默认是不会提交空目录的，如果想提交某个空目录到版本库中，需要在该目录下新建一个 .gitignore 的空白文件，就可以提交了</li>
<li>把外部文件纳入到自己的 Git 分支来的时候一定要记得是先比对，确认所有修改都是自己修改的，然后再纳入。不然，容易出现代码回溯</li>
<li>多人协作时，不要各自在自己的 Git 分支开发，然后发文件合并。正确的方法应该是开一个远程分支，然后一起在远程分支里协作。不然，容易出现代码回溯（即别人的代码被覆盖的情况）</li>
<li>每个人提交代码是一定要 git diff 看提交的东西是不是都是自己修改的。如果有不是自己修改的内容，很可能就是代码回溯</li>
<li>review 代码的时候如果看到有被删除掉的代码，一定要确实是否是写代码的同事自己删除的。如果不是，很可能就是代码回溯</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[Git是目前世界上最先进的分布式版本控制系统]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Windows常用软件推荐]]></title>
    <link href="http://wsgzao.github.io/post/windows/"/>
    <id>http://wsgzao.github.io/post/windows/</id>
    <published>2016-04-19T08:35:27.000Z</published>
    <updated>2016-04-19T01:52:25.128Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/l6zV1ws3.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>很多人都认为我是计算机高手，其实我只会帮你修理下你的电脑啦，曾几何时我也帮助过好多好多的同学和老师，尝试和体验各种各样的软件，但谁又能想到我曾今也对你们的电脑做过很多失败的坑爹操作，把你们最宝贵的数据撸得灰飞烟灭。作为一名非职业HelpDesk，我一定不是最最优秀的那一群技术大牛，但我也努力超越了99.99%的从业者，Because I just love and enjoy thinking to do better and better.</p>
<p>如果你认同<code>高效，实用</code>的软件使用理念就跟着我走吧，让我们一起寻找<code>适合自己的好用软件</code>。</p>
<blockquote>
<p>长期更新此文以督促自己的懒惰，我要用佳软改变你一生的习惯。</p>
</blockquote>
<hr>
<h2 id="更新记录">更新记录</h2><p>2016年04月19日 - PC Hunter，阿呆猫/ADSafe，微信/钉钉，Navicat<br>2016年01月04日 - 扩展阅读增加利器，完善细节内容<br>2015年12月10日 - 增加硬件选型专题，替换SecureCRT为Xmanager，mRemoteNG为MobaXterm<br>2015年10月05日 - 增加Office 2016, 清理不和谐内容<br>2015年08月06日 - 增加Ditto, mRemoteNG, SocksCap64, SwitchHosts<br>2015年08月04日 - 增加StartIsBack++, Clover, Cmd Markdown, JetBrains<br>2015年05月29日 - 增加AnyDesk，COW，替换QQ拼音纯净版为百度输入法<br>2015年04月16日 - 增加Listary，Bandisoft，Adobe Acrobat DC，Auto CAD 2016<br>2015年03月31日 - 增加微PE，有道云协作，自同步<br>2015年03月05日 - 正式更名为Windows常用软件推荐，统一日志标题和链接<br>2015年02月24日 - 替换TrueCrypt为VeraCrypt，增加易数一键还原，百度电脑专家<br>2015年02月20日 - 剥离Mac和Android部分<br>2014年11月12日 - 增加Win10，3DM运行库，网易云音乐，好奇心日报，调整部分链接和描述<br>2014年08月26日 - 引导部分原版链接至第三方Mod修改版(绿色精简)<br>2014年08月13日 - 增加DirectX Repair，EaseUS Data Recovery Wizard和Mac专题<br>2014年08月12日 - 精简优化分离内容，转化为Markdown书写<br>2014年06月02日 - 更新猎豹免费WiFi和猎豹清理大师<br>2014年04月15日 - 更新Windows 8.1 With Update和一小波翻墙工具并调整部分软件推荐<br>2014年03月18日 - 更新TeamViewer 9，Sublime 3，读知乎<br>2014年03月07日 - 新增雅虎天气，更新Office2013 With SP1等其它软件版本及评语<br>2014年01月20日 - 更新部分软件评语，新增专业软件部分之文件传输专题<br>2013年12月27日 - 手机浏览器回归QQ浏览器，更新部分软件版本和推荐优先级<br>2013年12月03日 - 更新部分软件版本，新增专业软件部分之文本处理专题<br>2013年11月28日 - 更新大批软件版本，新增福昕风腾PDF，StartIsBackPlus，高德地图<br>2013年11月21日 - PE更换为IT天空 SKYPE<br>2013年11月03日 - 增加专业软件部分之网络穿透专题<br>2013年10月08日 - 简单看图制图类工具更换为QQ影像<br>2013年10月04日 - 手机浏览器更换为傲游及链接文字描述等细节<br>2013年09月21日 - 精细化内容<br>2013年09月19日 - 完善内容<br>2013年09月07日 - 补充专业软件部分<br>2013年08月29日 - 微调精炼语法<br>2013年08月28日 - 优化下语句和措辞<br>2013年08月27日 - 增加Software List For Android<br>2013年08月26日 - 增加OS部分<br>2013年08月25日 - 补充特色推荐部分<br>2013年08月24日 - 常用软件部分基本结束<br>2013年08月23日 - 补充内容<br>2013年08月22日 - 补充内容<br>2013年08月21日 - 梳理框架</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/windows/" target="_blank" rel="external">http://wsgzao.github.io/post/windows/</a></p>
<p>扩展阅读</p>
<ul>
<li>利器 - <a href="http://liqi.io/" target="_blank" rel="external">http://liqi.io/</a></li>
<li>小众软件 - <a href="http://love.appinn.com/" target="_blank" rel="external">http://love.appinn.com/</a></li>
<li>善用佳软 - <a href="http://xbeta.info/" target="_blank" rel="external">http://xbeta.info/</a></li>
<li>zd423 - <a href="http://www.zdfans.com/" target="_blank" rel="external">http://www.zdfans.com/</a></li>
<li>Apps索引 - <a href="http://wsgzao.github.io/index/#Apps" target="_blank" rel="external">http://wsgzao.github.io/index/#Apps</a></li>
</ul>
<hr>
<h2 id="硬件选型">硬件选型</h2><blockquote>
<p>选择笔记本不一定为了办公和轻便，使用台式机也未必只是为了玩游戏和大屏享受，手机和平板也可以辅助我们工作，无论选择哪种硬件，使用起来能够赏心悦目，得心应手，提高效率才是我们追求的本质。</p>
</blockquote>
<h3 id="笔记本">笔记本</h3><ol>
<li>从颜值角度出发我会推荐Dell XPS和MacBook</li>
<li>从实用方向考虑我会选择ThinkPad X250和ThinkPad X1</li>
<li>其它好的选择当然也是随心啦，比如大神船和最有可能乱入的小米和华为</li>
</ol>
<h3 id="台式机">台式机</h3><blockquote>
<p>京东提供了一个相对透明开放的装机平台，至少可以让很多人避开奸商偷袭</p>
</blockquote>
<p>京东装机大师 - <a href="http://diy.jd.com/" target="_blank" rel="external">http://diy.jd.com/</a><br>萌叔装机好福哟 - <a href="https://shironeko.taobao.com" target="_blank" rel="external">https://shironeko.taobao.com</a></p>
<h3 id="配件">配件</h3><blockquote>
<p>推荐大家多参考利器</p>
</blockquote>
<ol>
<li>8G内存和256G SSD固态硬盘会逐步成为标配，提高生产力的首选</li>
<li>你可能也需要手感不错的鼠标和掷地有声的机械键盘</li>
<li>一把舒服的座椅和高大上的显示器</li>
<li>欢迎继续补充</li>
</ol>
<h3 id="系统部署">系统部署</h3><p>ThinkPad X1 Carbon使用经验分享(解决Windows 10高分屏模糊) - <a href="http://wsgzao.github.io/post/thinkpad/" target="_blank" rel="external">http://wsgzao.github.io/post/thinkpad/</a></p>
<h2 id="操作系统">操作系统</h2><blockquote>
<p>重装系统建议谨慎行事，丢失数据可是很蛋疼的一件事哦</p>
</blockquote>
<p>Windows 7 - <a href="http://zxkh19501.blog.163.com/" target="_blank" rel="external">http://zxkh19501.blog.163.com/</a></p>
<ul>
<li>普通用户建议稳定在Win7</li>
<li>怀有好奇心的朋友可考虑向Win10迈进</li>
<li>玩游戏和办公需求高者请勿尝鲜</li>
</ul>
<p>Windows 10 - <a href="http://www.zdfans.com/win10" target="_blank" rel="external">http://www.zdfans.com/win10</a></p>
<ul>
<li>Windows 10强势回归</li>
</ul>
<p>Ghost - <a href="http://songyongzhi.blog.163.com/" target="_blank" rel="external">http://songyongzhi.blog.163.com/</a></p>
<ul>
<li>偷懒请认准Ghost，ESD会慢慢成为新的标准</li>
<li>安装方式建议【U盘引导+移动硬盘安装】</li>
</ul>
<p>Others - <a href="http://msdn.itellyou.cn/" target="_blank" rel="external">http://msdn.itellyou.cn/</a></p>
<ul>
<li>简单直接的微软原版资源下载渠道</li>
</ul>
<p>U盘装机助理 - <a href="http://www.itiankong.net/forum-usbzl-1.html" target="_blank" rel="external">http://www.itiankong.net/forum-usbzl-1.html</a></p>
<ul>
<li>作者频繁的更新速度深深的折磨着我幼小的心灵</li>
</ul>
<p>微PE - <a href="http://www.wepe.com.cn/" target="_blank" rel="external">http://www.wepe.com.cn/</a></p>
<ul>
<li>感谢前通用PE作者@李培聪的付出，祝你创业顺利哈</li>
</ul>
<hr>
<h2 id="常用软件">常用软件</h2><h3 id="特色推荐">特色推荐</h3><p>Listary -  <a href="http://www.listary.com/" target="_blank" rel="external">http://www.listary.com/</a></p>
<ul>
<li>如果Mac下的Alfred作为排名第一的效率工具类神器，那你还在犹豫什么呢，必装</li>
<li>我也从Launchy转投Listary，是时候放开Everything/Total Commander</li>
</ul>
<p>阿呆猫 - <a href="http://www.admflt.com/" target="_blank" rel="external">http://www.admflt.com/</a></p>
<ul>
<li>ADSafe名气太响受到制约，移动端去广告可继续使用</li>
<li>发现上网异常请自觉停用此类去广告软件</li>
</ul>
<p>Http File Server - <a href="http://www.rejetto.com/hfs/?f=dl" target="_blank" rel="external">http://www.rejetto.com/hfs/?f=dl</a></p>
<ul>
<li>十分方便的HTTP文件共享服务器</li>
</ul>
<p>PC Hunter - <a href="http://www.xuetr.com/" target="_blank" rel="external">http://www.xuetr.com/</a></p>
<ul>
<li>PC Hunter是一个Windows系统信息查看软件，同时也是一个手工杀毒辅助软件</li>
</ul>
<h3 id="压缩解压缩">压缩解压缩</h3><p>好压 - <a href="http://haozip.2345.com/" target="_blank" rel="external">http://haozip.2345.com/</a></p>
<ul>
<li>简单方便，自带虚拟光驱</li>
<li>WinRAR，7zip，360压缩也许都很优秀，但我相信自己体验后做出的选择</li>
</ul>
<p>Bandizip - <a href="http://www.bandisoft.com/bandizip" target="_blank" rel="external">http://www.bandisoft.com/bandizip</a></p>
<ul>
<li>Bandisoft出品，轻巧、快速、免费的压缩软件</li>
</ul>
<h3 id="图像浏览处理">图像浏览处理</h3><p>2345看图王 - <a href="http://pic.2345.com/" target="_blank" rel="external">http://pic.2345.com/</a></p>
<ul>
<li>速度最快的看图软件</li>
<li>ACDSee臃肿，Picasa乏力，专业制图请使用PS</li>
</ul>
<p>Honeyview - <a href="http://www.bandisoft.com/honeyview/" target="_blank" rel="external">http://www.bandisoft.com/honeyview/</a></p>
<ul>
<li>也是Bandisoft家族出品，速度惊人的图像浏览器</li>
</ul>
<p>Faststone Capture - <a href="http://www.portablesoft.org/faststone-capture/" target="_blank" rel="external">http://www.portablesoft.org/faststone-capture/</a></p>
<ul>
<li>截图神器+录屏工具</li>
<li>我也不反对大家使用QQ截图哈</li>
</ul>
<p>Adobe Photoshop - <a href="http://www.flighty.cn/html/soft/20141016_263.html" target="_blank" rel="external">http://www.flighty.cn/html/soft/20141016_263.html</a></p>
<ul>
<li>专业制图利器</li>
<li>Mod By 轻狂志</li>
</ul>
<h3 id="文字办公">文字办公</h3><p>Microsoft Office 2016 - <a href="http://pan.baidu.com/s/1hq4gSTI" target="_blank" rel="external">http://pan.baidu.com/s/1hq4gSTI</a></p>
<ul>
<li>整合32位和64位，整合Visio &amp; Project</li>
<li>移动端推荐使用金山WPS</li>
<li>推荐大家购买Office 365，全平台好用且不贵</li>
</ul>
<p>Microsoft Office 2007 - <a href="http://pan.baidu.com/share/link?shareid=966283776&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=966283776&amp;uk=1157904223</a></p>
<ul>
<li>Office 2007 SP3中英双语VOL集成</li>
<li>整合Visio &amp; Project</li>
<li>已完美激活建议求稳者安装</li>
</ul>
<p>MathType - <a href="http://fengqingwuhen.blog.163.com/blog/static/17747406320141019104445935/" target="_blank" rel="external">http://fengqingwuhen.blog.163.com/blog/static/17747406320141019104445935/</a></p>
<ul>
<li>最佳数学公式编辑器</li>
</ul>
<p>福昕风腾PDF套件金山版 - <a href="http://pan.baidu.com/s/17qSRE" target="_blank" rel="external">http://pan.baidu.com/s/17qSRE</a></p>
<ul>
<li>优秀的个人免费PDF阅读软件</li>
<li>简单小巧够用</li>
</ul>
<p>Adobe Acrobat - <a href="http://yun.baidu.com/s/1c0Lmgj2" target="_blank" rel="external">http://yun.baidu.com/s/1c0Lmgj2</a></p>
<ul>
<li>需要使用专业功能朋友还是坚持Acrobat吧</li>
</ul>
<h3 id="浏览器">浏览器</h3><p>Maxthon傲游 - <a href="http://www.maxthon.cn/" target="_blank" rel="external">http://www.maxthon.cn/</a></p>
<ul>
<li>被搜狗，360极速，金山猎豹，百度浏览器，QQ浏览器依次挑战，但依旧努力改变着世界</li>
<li>因为微信试试全新的QQ浏览器吧</li>
</ul>
<p>Google Chrome - <a href="http://chrome.google.com/" target="_blank" rel="external">http://chrome.google.com/</a></p>
<ul>
<li>简洁的界面和精益求精的内核是核心</li>
<li>插件丰富，版本飙得够快</li>
</ul>
<h3 id="输入法">输入法</h3><p>百度输入法 - <a href="http://shurufa.baidu.com" target="_blank" rel="external">http://shurufa.baidu.com</a></p>
<ul>
<li>百度输入法尊重用户体验成功上位，全平台统一已成定局</li>
<li>搜狗/腾讯输入法已经合体，产品同质化的今天选择谁已经不再重要</li>
</ul>
<h3 id="安全防护">安全防护</h3><p>腾讯电脑管家 - <a href="http://guanjia.qq.com" target="_blank" rel="external">http://guanjia.qq.com</a></p>
<ul>
<li>刷个存在感，希望淡淡的耍流氓</li>
</ul>
<p>金山毒霸 - <a href="http://www.ijinshan.com/" target="_blank" rel="external">http://www.ijinshan.com/</a></p>
<ul>
<li>金山一直很努力，但也学着耍流氓</li>
<li>猎豹系列很出色</li>
</ul>
<p>360安全中心 - <a href="http://www.360.cn/" target="_blank" rel="external">http://www.360.cn/</a></p>
<ul>
<li>用户体验和技术实力毋庸置疑</li>
<li>我不喜欢周鸿祎yī靠打压对手的流氓商业模式</li>
<li>360已经在安全领域形成垄断优势</li>
</ul>
<p>百度电脑专家 - <a href="http://zhuanjia.baidu.com/" target="_blank" rel="external">http://zhuanjia.baidu.com/</a></p>
<ul>
<li>360和腾讯都有电脑修复，但唯独百度解决了很多实际问题</li>
<li>百度卫士和杀毒还需要努力啊，被KPI逼着真耍流氓</li>
</ul>
<h3 id="媒体处理">媒体处理</h3><p>QQ影音 - <a href="http://player.qq.com/" target="_blank" rel="external">http://player.qq.com/</a></p>
<ul>
<li>全能，轻巧，无广告</li>
<li>PotPlayer或许是目前最佳的播放器</li>
</ul>
<p>QQ音乐 - <a href="http://music.qq.com/" target="_blank" rel="external">http://music.qq.com/</a></p>
<ul>
<li>我办理了绿钻</li>
</ul>
<p>网易云音乐 - <a href="http://music.163.com" target="_blank" rel="external">http://music.163.com</a></p>
<ul>
<li>网易再一次用优秀的产品体验为自己赢得了口碑</li>
</ul>
<p>完美解码 - <a href="http://jm.wmzhe.com/" target="_blank" rel="external">http://jm.wmzhe.com/</a></p>
<ul>
<li>高清全能解码播放</li>
<li>视频制作需要</li>
</ul>
<p>格式工厂 - <a href="http://www.pcfreetime.com/" target="_blank" rel="external">http://www.pcfreetime.com/</a></p>
<ul>
<li>经常音视频转码必备之一吧</li>
</ul>
<h3 id="下载工具">下载工具</h3><p>QQ旋风 - <a href="http://xf.qq.com/" target="_blank" rel="external">http://xf.qq.com/</a></p>
<ul>
<li>界面清爽，回归下载本质</li>
<li>如今浏览器自带下载也足矣</li>
</ul>
<p>迅雷 - <a href="http://dl.xunlei.com/" target="_blank" rel="external">http://dl.xunlei.com/</a></p>
<ul>
<li>产品本身很优秀</li>
<li>恭喜IPO成功，期待和小米的整合组建智能家庭</li>
</ul>
<h3 id="聊天通信">聊天通信</h3><p>QQ - <a href="http://im.qq.com/" target="_blank" rel="external">http://im.qq.com/</a></p>
<ul>
<li>我办理了QQ会员</li>
</ul>
<p>飞信 - <a href="http://feixin.10086.cn/" target="_blank" rel="external">http://feixin.10086.cn/</a></p>
<ul>
<li>群发短信，微信改变了我们的生活，4G的时代短信将离我们远去</li>
<li>只剩免费的短信报警作用吧</li>
</ul>
<p>微信 - <a href="http://weixin.qq.com/" target="_blank" rel="external">http://weixin.qq.com/</a></p>
<ul>
<li>简单的生活方式，合理的权限隐私控制</li>
<li>被陌陌/钉钉弯道超车也是产品定位无法改变的格局</li>
</ul>
<p>钉钉 - <a href="http://www.dingtalk.com/" target="_blank" rel="external">http://www.dingtalk.com/</a></p>
<ul>
<li>虽然一直不看好陌陌，但存在即合理，视频主播和网红都这么火，能变现才是硬道理</li>
<li>钉钉的企业级协同办公直击用户的痛点，希望能越做越好</li>
</ul>
<h3 id="词典翻译">词典翻译</h3><p>有道词典 - <a href="http://cidian.youdao.com/" target="_blank" rel="external">http://cidian.youdao.com/</a></p>
<ul>
<li>越做越强，短期内无人能超越</li>
<li>金山词霸和必应词典看移动端吧</li>
</ul>
<h3 id="邮件客户端">邮件客户端</h3><p>Foxmail - <a href="http://foxmail.com.cn/" target="_blank" rel="external">http://foxmail.com.cn/</a></p>
<ul>
<li>入职后的第一件事就是收发邮件</li>
<li>个人日常在线邮箱建议使用QQ邮箱</li>
<li>投简历还是无奈选择Gmail</li>
</ul>
<h3 id="文本编辑器">文本编辑器</h3><p>NotePad2 - <a href="http://pan.baidu.com/s/1qWkb1q0" target="_blank" rel="external">http://pan.baidu.com/s/1qWkb1q0</a></p>
<ul>
<li>差个tab标签，建议替换自带记事本</li>
<li>Mod By zhfi</li>
</ul>
<p>Sublime Text - <a href="http://pan.baidu.com/share/home?uk=3693847658#category/type=0" target="_blank" rel="external">http://pan.baidu.com/share/home?uk=3693847658#category/type=0</a></p>
<ul>
<li>无比性感的编辑器，</li>
<li>建议补充搭配使用</li>
</ul>
<p>UEStudio -  <a href="http://hrtsea.com/?s=UEStudio" target="_blank" rel="external">http://hrtsea.com/?s=UEStudio</a></p>
<ul>
<li>专业强大的文本编辑器</li>
<li>略显臃肿</li>
</ul>
<p>Cmd Markdown - <a href="http://www.zybuluo.com/mdeditor" target="_blank" rel="external">http://www.zybuluo.com/mdeditor</a></p>
<ul>
<li>Markdown简洁的语法可以辅助你书写更有质量的文章</li>
<li>作业部落推出客户端啦</li>
</ul>
<h3 id="数据同步共享">数据同步共享</h3><p>金山快盘 - <a href="http://www.kuaipan.cn/" target="_blank" rel="external">http://www.kuaipan.cn/</a></p>
<ul>
<li>百度网盘统一文件共享，360不时捅其菊花，金山不断深耕协同办公，腾讯继续保持蛋疼状态</li>
</ul>
<p>Evernote - <a href="http://www.evernote.com/" target="_blank" rel="external">http://www.evernote.com/</a></p>
<ul>
<li>笔记类应用除了onenote我只认可它</li>
<li>建议搭配金山快盘和Evernote，提高工作效率</li>
</ul>
<p>有道云协作 - <a href="http://note.youdao.com/groupintro.html" target="_blank" rel="external">http://note.youdao.com/groupintro.html</a></p>
<ul>
<li>跨平台支持多人实时协作，可以极大提升团队效率</li>
<li>虽然没有直接推荐有道云笔记但对于文字编辑类工作者来说整合使用还是很方便的</li>
</ul>
<p>FileGee - <a href="http://cn.filegee.com/" target="_blank" rel="external">http://cn.filegee.com/</a></p>
<ul>
<li>国内优秀的个人免费本地同步工具</li>
</ul>
<p>自同步 - <a href="http://www.zisync.com/" target="_blank" rel="external">http://www.zisync.com/</a></p>
<ul>
<li>局域网最高效的文件同步、共享工具</li>
</ul>
<h3 id="数据备份恢复">数据备份恢复</h3><p>易数一键还原 - <a href="http://www.onekeyrestore.cn/" target="_blank" rel="external">http://www.onekeyrestore.cn/</a></p>
<ul>
<li>以DiskGenius为内核开发，安全易用靠谱</li>
<li>同时推荐ORM一键还原系统</li>
</ul>
<p>DiskGenius -  <a href="http://pan.baidu.com/s/1kTj3b75" target="_blank" rel="external">http://pan.baidu.com/s/1kTj3b75</a></p>
<ul>
<li>国内磁盘分区和数据恢复的佼佼者</li>
<li>Mod By MyCrack</li>
</ul>
<p>EaseUS Data Recovery Wizard - <a href="http://www.0daydown.com/?s=EaseUS+Data+Recovery" target="_blank" rel="external">http://www.0daydown.com/?s=EaseUS+Data+Recovery</a></p>
<ul>
<li>原先是国产易我数据恢复，现在依旧犀利啊</li>
</ul>
<h3 id="数据加密">数据加密</h3><p>VeraCrypt -  <a href="http://sourceforge.net/projects/veracrypt/" target="_blank" rel="external">http://sourceforge.net/projects/veracrypt/</a></p>
<ul>
<li>替代TrueCrypt，不断修复安全漏洞</li>
<li>微软自带的 BitLocker 驱动器加密也足矣</li>
</ul>
<h3 id="快速启动">快速启动</h3><p>StartIsBack++ - <a href="http://www.zdfans.com/5573.html" target="_blank" rel="external">http://www.zdfans.com/5573.html</a></p>
<ul>
<li>最好用的开始菜单恢复软件</li>
</ul>
<p>Clover - <a href="http://ejie.me/" target="_blank" rel="external">http://ejie.me/</a></p>
<ul>
<li>为你的 Windows Explorer 插上翅膀</li>
<li>可惜作者不更新了，在Win10上会有一些小Bug</li>
</ul>
<p>Ditto - <a href="http://ditto-cp.sourceforge.net/" target="_blank" rel="external">http://ditto-cp.sourceforge.net/</a></p>
<ul>
<li>不可不用的精品免费Windows剪贴板增强小工具</li>
</ul>
<p>SwitchHosts - <a href="http://oldj.github.io/SwitchHosts/" target="_blank" rel="external">http://oldj.github.io/SwitchHosts/</a></p>
<ul>
<li>SwitchHosts! 是一个管理、切换多个 hosts 方案的工具</li>
<li>它是一个免费开源的软件，基于 wxPython 开发，可在 Windows/Linux/Mac 下运行</li>
</ul>
<h3 id="光盘刻录">光盘刻录</h3><p>Nero -  <a href="http://pan.baidu.com/share/link?shareid=1935729386&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=1935729386&amp;uk=1157904223</a></p>
<ul>
<li>专注刻录，刻录时记得校验数据，别刻飞了</li>
</ul>
<p>UltraISO - <a href="http://www.zdfans.com/1397.html" target="_blank" rel="external">http://www.zdfans.com/1397.html</a></p>
<ul>
<li>作为经常折腾各类操作系统的人来说，它不可或缺</li>
</ul>
<h3 id="驱动运行库">驱动运行库</h3><p>万能驱动助理 - <a href="http://www.wandrv.com" target="_blank" rel="external">http://www.wandrv.com</a></p>
<ul>
<li>确实是装机必备的万能驱动包</li>
</ul>
<p>驱动精灵 - <a href="http://www.drivergenius.com/" target="_blank" rel="external">http://www.drivergenius.com/</a></p>
<ul>
<li>不重装电脑或者驱动异常，别没事升级驱动</li>
</ul>
<p>DirectX Repair - <a href="http://blog.csdn.net/vbcom/article/details/6962388" target="_blank" rel="external">http://blog.csdn.net/vbcom/article/details/6962388</a></p>
<ul>
<li>系统+游戏修复神器啊</li>
</ul>
<p>3DM游戏运行库 - <a href="http://bbs.3dmgame.com/thread-3551335-1-1.html" target="_blank" rel="external">http://bbs.3dmgame.com/thread-3551335-1-1.html</a></p>
<ul>
<li>集成32位和64位运行库，是目前互联网上最新最全的常用运行库合集</li>
</ul>
<h3 id="远程控制">远程控制</h3><p>TeamViewer - <a href="http://www.zdfans.com/789.html" target="_blank" rel="external">http://www.zdfans.com/789.html</a></p>
<ul>
<li>远程控制，内网穿透，VPN共享，跨平台</li>
<li>对个人免费，业界良心啊，QQ表示继续努力</li>
</ul>
<p>AnyDesk - <a href="http://anydesk.com/" target="_blank" rel="external">http://anydesk.com/</a></p>
<ul>
<li>远程控制效果或许会超出你的想象，作为TeamViewer备用方案</li>
</ul>
<p>向日葵 - <a href="http://sunlogin.oray.com/zh_CN/" target="_blank" rel="external">http://sunlogin.oray.com/zh_CN/</a></p>
<ul>
<li>硬是一种态度</li>
</ul>
<hr>
<h2 id="专业软件">专业软件</h2><blockquote>
<p>大部分行业都有属于自己的专业工具，我这里仅结合实际列举较为实用的</p>
</blockquote>
<p>VMware Workstation -  <a href="http://www.zdfans.com/?s=vmware" target="_blank" rel="external">http://www.zdfans.com/?s=vmware</a></p>
<ul>
<li>我相信硬件性能过剩的趋势将驱使更多的人走近虚拟化，感受另一个奇妙的世界</li>
</ul>
<p>Xmanager - <a href="http://www.0daydown.com/?s=Xmanager+" target="_blank" rel="external">http://www.0daydown.com/?s=Xmanager+</a></p>
<ul>
<li>相信新版Xmanager一定会让你爱不释手，放下SecureCRT的执念</li>
<li>利用Xmanager-Passive可以轻松映射图形化界面，Xshell、SecureCRT，PuTTY等都适用</li>
</ul>
<p>Adobe - <a href="http://yun.baidu.com/share/home?uk=1308988221" target="_blank" rel="external">http://yun.baidu.com/share/home?uk=1308988221</a></p>
<ul>
<li>Mod By liuhangtnnd</li>
</ul>
<p>Auto CAD - <a href="http://www.zdfans.com/4808.html" target="_blank" rel="external">http://www.zdfans.com/4808.html</a></p>
<ul>
<li>Mod By 珊瑚の海</li>
</ul>
<p>FreeMind - <a href="http://sourceforge.net/projects/freemind/" target="_blank" rel="external">http://sourceforge.net/projects/freemind/</a></p>
<ul>
<li>免费简单好用的思维脑图工具</li>
<li>XMind，Mindjet MindManager或许更专业</li>
</ul>
<p>Axure RP - <a href="http://www.0daydown.com/?s=Axure+RP" target="_blank" rel="external">http://www.0daydown.com/?s=Axure+RP</a></p>
<ul>
<li>一个产品经理必备的交互原型设计工具</li>
<li>ProcessOn做为一个在线协作绘图平台也是非常好用的</li>
</ul>
<p>JetBrains - <a href="http://www.jetbrains.com/" target="_blank" rel="external">http://www.jetbrains.com/</a></p>
<ul>
<li>IntelliJ IDEA, PhpStorm, PyCharm, ReSharper等都是这家出品的</li>
<li>学生和老师可以免费试用全套产品哈</li>
</ul>
<p>Navicat - <a href="http://www.navicat.com.cn/" target="_blank" rel="external">http://www.navicat.com.cn/</a></p>
<ul>
<li>最佳的数据库管理工具</li>
</ul>
<h3 id="网络穿透专题">网络穿透专题</h3><blockquote>
<p>善用此类工具你可以穿透各类网络干你想干的事情</p>
</blockquote>
<p>CCProxy - <a href="http://www.ccproxy.com/" target="_blank" rel="external">http://www.ccproxy.com/</a></p>
<ul>
<li>最佳共享上网行为管理软件</li>
<li>与Teamviewer VPN协同二级代理穿透网络</li>
</ul>
<p>COW - <a href="https://github.com/cyfdecyf/cow" target="_blank" rel="external">https://github.com/cyfdecyf/cow</a></p>
<ul>
<li>COW 是一个简化穿墙的 HTTP 代理服务器</li>
</ul>
<p>Proxifier - <a href="http://pan.baidu.com/share/link?shareid=3076195103&amp;uk=1157904223" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=3076195103&amp;uk=1157904223</a></p>
<ul>
<li>让不支持代理的软件也能通，如mstsc</li>
</ul>
<p>MobaXterm - <a href="http://www.0daydown.com/?s=MobaXterm" target="_blank" rel="external">http://www.0daydown.com/?s=MobaXterm</a></p>
<ul>
<li>MobaXterm是一款豪华、全功能的终端软件MobaXterm</li>
<li>用来代替mRemote管理3389在适合不过了</li>
</ul>
<p>SocksCap64 - <a href="http://www.sockscap64.com/" target="_blank" rel="external">http://www.sockscap64.com/</a></p>
<ul>
<li>最好用的网络加速/Socks代理软件</li>
</ul>
<h3 id="文本处理专题">文本处理专题</h3><blockquote>
<p>本专题将重点解决日常办公中遇到的PDF转换，内容检索，ORC识别等专向领域</p>
</blockquote>
<p>Smallpdf - <a href="http://smallpdf.com/cn" target="_blank" rel="external">http://smallpdf.com/cn</a></p>
<ul>
<li>云服务时代可以让我们轻松玩转pdf</li>
</ul>
<p>FileLocator Pro - <a href="http://www.portablesoft.org/filelocator-pro-portable/" target="_blank" rel="external">http://www.portablesoft.org/filelocator-pro-portable/</a></p>
<ul>
<li>最好的免索引全文搜索工具</li>
<li>文件检索请使用Everything</li>
</ul>
<p>ABBYY FineReader Corporate - <a href="http://www.ttrar.com/html/ABBYY-FineReader-Corporate.html" target="_blank" rel="external">http://www.ttrar.com/html/ABBYY-FineReader-Corporate.html</a></p>
<ul>
<li>世界第一的OCR软件!识别率英文120%!中文99%!这货是真的真的很强</li>
</ul>
<p>Beyond Compare - <a href="http://www.ttrar.com/html/Beyond-Compare.html" target="_blank" rel="external">http://www.ttrar.com/html/Beyond-Compare.html</a></p>
<ul>
<li>不可多得的专业级的文件夹和文件对比工具</li>
</ul>
<h3 id="文件传输专题">文件传输专题</h3><blockquote>
<p>本身这没有什么好介绍的，但是最近智能家庭的概念和各大互联网企业的动作让我看见某些市场前景，我这里简单预测下自己的判断。<br>迅雷的离线下载、云点播和百度云这两样”范云服务“产品将在未来的智能家庭硬件大战中起到关键性的作用，它们与其它产品如无线路由器，电视机的合作和融合将会彻底改变我们的生活方式，目前来看已经在改变。</p>
</blockquote>
<p>常用下载工具没有推荐 - ?</p>
<ul>
<li>无论是迅雷，QQ旋风，还是国外的IDM，EagleGet，最终应该转型为类似百度云这样的平台类应用</li>
</ul>
<p>WinSCP - <a href="http://winscp.net/eng/download.php" target="_blank" rel="external">http://winscp.net/eng/download.php</a></p>
<ul>
<li>个人认为是目前最佳的sftp和ftp传输工具，用户体验已超越FileZilla Client</li>
</ul>
<p>Serv-U - <a href="http://www.ttrar.com/html/Serv-U-FTP-Server-Platinum.html" target="_blank" rel="external">http://www.ttrar.com/html/Serv-U-FTP-Server-Platinum.html</a></p>
<ul>
<li>这也许是世界上最好的FTP服务器之一</li>
<li>如果觉得贵不妨尝试下国产的xlight</li>
</ul>
<p>FileZilla Server - <a href="https://filezilla-project.org/download.php?type=server" target="_blank" rel="external">https://filezilla-project.org/download.php?type=server</a></p>
<ul>
<li>Windows下的免费服务端就用这个吧</li>
<li>Unix一般用vsftpd或者ProFTPD较多，当然你也要考虑处理中文乱码</li>
</ul>
<hr>
<p>题图 - 移动先行，云优先   Mobile-First，Cloud-First</p>
]]></content>
    <summary type="html">
    <![CDATA[长期更新此文以督促自己的懒惰，我要用佳软改变你一生的习惯]]>
    
    </summary>
    
      <category term="软件 | Soft" scheme="http://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[vsftpd安装以及配置FTP虚拟用户实践]]></title>
    <link href="http://wsgzao.github.io/post/vsftpd/"/>
    <id>http://wsgzao.github.io/post/vsftpd/</id>
    <published>2016-04-15T07:42:19.000Z</published>
    <updated>2016-04-15T08:12:26.954Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>正如vsftpd官方宣传中所说<code>Probably the most secure and fastest FTP server for UNIX-like systems.</code>我相信这是大多数人选择vsftpd来搭建Linux的FTP服务器的原因，当然ProFTPD用的人应该也不在少数。文章将以清晰直观的方式介绍安装vsftpd以及配置FTP虚拟用户的过程，希望对大家有帮助。</p>
<blockquote>
<p>首选的FTP服务器搭建方式</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2016年04月15日 - 增加vsftp匿名用户上传和下载<br>2015年08月24日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/vsftpd/" target="_blank" rel="external">http://wsgzao.github.io/post/vsftpd/</a></p>
<p>扩展阅读</p>
<p>CentOS 6.4 下安装vsftpd - <a href="http://www.cnblogs.com/xiongpq/p/3384759.html" target="_blank" rel="external">http://www.cnblogs.com/xiongpq/p/3384759.html</a><br>ProFTPD - <a href="http://www.proftpd.org/" target="_blank" rel="external">http://www.proftpd.org/</a><br>vsftpd - <a href="http://vsftpd.beasts.org" target="_blank" rel="external">http://vsftpd.beasts.org</a></p>
<hr>
<h2 id="设置匿名用户上传下载">设置匿名用户上传下载</h2><blockquote>
<p>使用最简单的方法设置vsftp匿名用户上传和下载</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装vsftpd</span></span><br><span class="line">yum -y install vsftpd</span><br><span class="line">chkconfig vsftpd on</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改vsftpd.conf</span></span><br><span class="line">cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.bak</span><br><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#默认部分可保持不动</span></span><br><span class="line">anonymous_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="built_in">local</span>_<span class="built_in">enable</span>=YES</span><br><span class="line">write_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="built_in">local</span>_<span class="built_in">umask</span>=<span class="number">022</span></span><br><span class="line">dirmessage_<span class="built_in">enable</span>=YES</span><br><span class="line">xferlog_<span class="built_in">enable</span>=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=YES</span><br><span class="line"></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">userlist_<span class="built_in">enable</span>=YES</span><br><span class="line">tcp_wrappers=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加匿名访问目录</span></span><br><span class="line">anon_root=/var/ftp</span><br><span class="line"></span><br><span class="line"><span class="comment">#打开匿名用户上传/删除/重命名权限</span></span><br><span class="line">anon_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_mkdir_write_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_other_write_<span class="built_in">enable</span>=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#匿名用户的掩码（如需要，需自己添加，含义：如umask是022,这时创建一个权限为666的文件，文件的实际权限为666-022=644）</span></span><br><span class="line">anon_<span class="built_in">umask</span>=<span class="number">022</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设定支持ASCII模式的上传和下载功能</span></span><br><span class="line">ascii_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">ascii_download_<span class="built_in">enable</span>=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加日志记录</span></span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/xferlog</span><br><span class="line">dual_<span class="built_in">log</span>_<span class="built_in">enable</span>=YES</span><br><span class="line">vsftpd_<span class="built_in">log</span>_file=/var/<span class="built_in">log</span>/vsftpd.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启vsftpd服务并配置目录权限</span></span><br><span class="line">service vsftpd restart</span><br><span class="line"><span class="built_in">cd</span> /var/ftp</span><br><span class="line">mkdir pub</span><br><span class="line">chmod <span class="number">777</span> pub/</span><br><span class="line"></span><br><span class="line"><span class="comment">#常见问题</span></span><br><span class="line">默认情况下，ftp的根目录为/var/ftp，为了安全，这个目录默认不允许设置为<span class="number">777</span>权限，否则ftp将无法访问。但是我们要匿名上传文件，需要“other”用户的写权限，正确的做法：</span><br><span class="line">在/var/ftp中建立一个pub（名子自己起吧）文件夹，将个文件夹权限设置为<span class="number">777</span>（视具体需要自己设），在upload这个文件夹中，匿名用户可以上传文件、创建文件夹、删除文件等。一般至此，便实现vsftpd匿名用户的上传下载了。如果还不行可能selinux的问题，关闭即可。</span><br></pre></td></tr></table></figure>
<h2 id="安装vsftpd">安装vsftpd</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前系统版本</span></span><br><span class="line">cat /etc/redhat-release </span><br><span class="line">CentOS release <span class="number">6.6</span> (Final)</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看是否已经安装vsftpd</span></span><br><span class="line">rpm -qa | grep vsftpd</span><br><span class="line"><span class="comment">#如果没有，就安装，并设置开机启动</span></span><br><span class="line">yum -y install vsftpd</span><br><span class="line">chkconfig vsftpd on</span><br></pre></td></tr></table></figure>
<h2 id="基于虚拟用户的配置">基于虚拟用户的配置</h2><blockquote>
<p>所谓虚拟用户就是没有使用真实的帐户，只是通过映射到真实帐户和设置权限的目的。虚拟用户不能登录CentOS系统。</p>
</blockquote>
<h3 id="修改配置文件">修改配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#服务器独立运行</span></span><br><span class="line">listen=YES</span><br><span class="line"><span class="comment">#设定不允许匿名访问</span></span><br><span class="line">anonymous_<span class="built_in">enable</span>=NO</span><br><span class="line"><span class="comment">#设定本地用户可以访问。注：如使用虚拟宿主用户，在该项目设定为NO的情况下所有虚拟用户将无法访问</span></span><br><span class="line"><span class="built_in">local</span>_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#使用户不能离开主目录</span></span><br><span class="line">chroot_list_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#设定支持ASCII模式的上传和下载功能</span></span><br><span class="line">ascii_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">ascii_download_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#PAM认证文件名。PAM将根据/etc/pam.d/vsftpd进行认证</span></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line"><span class="comment">#设定启用虚拟用户功能</span></span><br><span class="line">guest_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#指定虚拟用户的宿主用户，CentOS中已经有内置的ftp用户了</span></span><br><span class="line">guest_username=ftp</span><br><span class="line"><span class="comment">#设定虚拟用户个人vsftp的CentOS FTP服务文件存放路径。存放虚拟用户个性的CentOS FTP服务文件(配置文件名=虚拟用户名)</span></span><br><span class="line">user_config_dir=/etc/vsftpd/vuser_conf</span><br><span class="line"><span class="comment">#配置vsftpd日志（可选）</span></span><br><span class="line">xferlog_<span class="built_in">enable</span>=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/xferlog</span><br><span class="line">dual_<span class="built_in">log</span>_<span class="built_in">enable</span>=YES</span><br><span class="line">vsftpd_<span class="built_in">log</span>_file=/var/<span class="built_in">log</span>/vsftpd.log</span><br></pre></td></tr></table></figure>
<h3 id="进行认证">进行认证</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装Berkeley DB工具，很多人找不到db_load的问题就是没有安装这个包</span></span><br><span class="line">yum install db4 db4-utils</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建用户密码文本，注意奇行是用户名，偶行是密码</span></span><br><span class="line">vi /etc/vsftpd/vuser_passwd.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line"><span class="number">123456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#生成虚拟用户认证的db文件</span></span><br><span class="line">db_load -T -t <span class="built_in">hash</span> <span class="operator">-f</span> /etc/vsftpd/vuser_passwd.txt /etc/vsftpd/vuser_passwd.db</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑认证文件，全部注释掉原来语句，再增加以下两句</span></span><br><span class="line">vi /etc/pam.d/vsftpd</span><br><span class="line"></span><br><span class="line">auth required pam_userdb.so db=/etc/vsftpd/vuser_passwd</span><br><span class="line">account required pam_userdb.so db=/etc/vsftpd/vuser_passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建虚拟用户配置文件</span></span><br><span class="line">mkdir /etc/vsftpd/vuser_conf/</span><br><span class="line"><span class="comment">#文件名等于vuser_passwd.txt里面的账户名，否则下面设置无效</span></span><br><span class="line">vi /etc/vsftpd/vuser_conf/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#虚拟用户根目录,根据实际情况修改</span></span><br><span class="line"><span class="built_in">local</span>_root=/data/ftp</span><br><span class="line">write_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_<span class="built_in">umask</span>=<span class="number">022</span></span><br><span class="line">anon_world_readable_only=NO</span><br><span class="line">anon_upload_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_mkdir_write_<span class="built_in">enable</span>=YES</span><br><span class="line">anon_other_write_<span class="built_in">enable</span>=YES</span><br></pre></td></tr></table></figure>
<h3 id="设置FTP根目录权限">设置FTP根目录权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#最新的vsftpd要求对主目录不能有写的权限所以ftp为755，主目录下面的子目录再设置777权限</span></span><br><span class="line">mkdir /data/ftp</span><br><span class="line">chmod -R <span class="number">755</span> /data</span><br><span class="line">chmod -R <span class="number">777</span> /data/ftp</span><br><span class="line"></span><br><span class="line"><span class="comment">#建立限制用户访问目录的空文件</span></span><br><span class="line">touch /etc/vsftpd/chroot_list</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果启用vsftpd日志需手动建立日志文件</span></span><br><span class="line">touch /var/<span class="built_in">log</span>/xferlog </span><br><span class="line">touch /var/<span class="built_in">log</span>/vsftpd.log</span><br></pre></td></tr></table></figure>
<h3 id="配置PASV模式（可选）">配置PASV模式（可选）</h3><blockquote>
<p>vsftpd默认没有开启PASV模式，现在FTP只能通过PORT模式连接，要开启PASV默认需要通过下面的配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">打开/etc/vsftpd/vsftpd.conf，在末尾添加</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启PASV模式</span></span><br><span class="line">pasv_<span class="built_in">enable</span>=YES</span><br><span class="line"><span class="comment">#最小端口号</span></span><br><span class="line">pasv_min_port=<span class="number">40000</span></span><br><span class="line"><span class="comment">#最大端口号</span></span><br><span class="line">pasv_max_port=<span class="number">40080</span></span><br><span class="line">pasv_promiscuous=YES</span><br><span class="line"></span><br><span class="line"><span class="comment">#在防火墙配置内开启40000到40080端口</span></span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p -dport <span class="number">40000</span>:<span class="number">40080</span> -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启iptabls和vsftpd</span></span><br><span class="line">service iptables restart</span><br><span class="line">service vsftpd restart</span><br><span class="line"></span><br><span class="line">现在可以使用PASV模式连接你的FTP服务器了~</span><br></pre></td></tr></table></figure>
<h3 id="Selinux和防火墙">Selinux和防火墙</h3><blockquote>
<p>该关闭的关闭，该放行的放行</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭selinux/iptables</span></span><br><span class="line">sed -i <span class="string">'/SELINUX/s/enforcing/disabled/'</span> /etc/selinux/config</span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">chkconfig iptables off</span><br><span class="line">service iptables stop</span><br></pre></td></tr></table></figure>
<h2 id="常见问题">常见问题</h2><p>如果登录时出现</p>
<pre><code><span class="number">500</span> OOPS: priv_sock_get_result. Connection closed <span class="keyword">by</span> remote host.
</code></pre><p>这样的错误，需要升级pam</p>
<pre><code><span class="title">yum</span> update pam
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[首选的FTP服务器搭建方式]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Cobbler自动化安装配置实践]]></title>
    <link href="http://wsgzao.github.io/post/cobbler/"/>
    <id>http://wsgzao.github.io/post/cobbler/</id>
    <published>2016-04-12T08:22:32.000Z</published>
    <updated>2016-04-19T01:08:53.020Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/b1p5A8Cy.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>Cobbler是一个自动化和简化系统安装的工具，通过使用网络引导来控制和启动安装。Cobbler的特性包括存储库镜像、Kickstart模板和连接电源管理系统。使用Cobbler之前需要先了解下PXE和Kickstart的基本原理，文章包含了Cobbler工作原理和Cobbler部署实践两部分内容，交叉关联性的内容还是蛮多的，遇到报错也不要怕，都会一步一步解决的。</p>
<blockquote>
<p>使用Cobbler轻松设置和管理网络安装环境</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年04月12日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/cobbler/" target="_blank" rel="external">http://wsgzao.github.io/post/cobbler/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Cobbler Manuals - <a href="http://cobbler.github.io/manuals/" target="_blank" rel="external">http://cobbler.github.io/manuals/</a><br>自动化运维工具Cobbler - <a href="http://cuchadanfan.blog.51cto.com/9940284/1698348" target="_blank" rel="external">http://cuchadanfan.blog.51cto.com/9940284/1698348</a></p>
<h2 id="Cobbler工作原理">Cobbler工作原理</h2><p>Cobbler由Python语言开发，是对PXE和Kickstart以及DHCP的封装。融合很多特性，提供了CLI和Web的管理形式。更加方便的实行网络安装。同时，Cobbler也提供了API接口，使用其它语言也很容易做扩展。它不紧可以安装物理机，同时也支持kvm、xen虚拟化、Guest OS的安装。更多的是它还能结合Puppet等集中化管理软件，实现自动化的管理。</p>
<p>Cobbler 支持众多的发行版：Red Hat、Fedora、CentOS、Debian、Ubuntu 和 SuSE。当添加一个操作系统（通常通过使用 ISO 文件）时，Cobbler 知道如何解压缩合适的文件并调整网络服务，以正确引导机器。Cobbler 使用命令行方式管理，也提供了基于Web的图形化配置管理工具（cobbler-web）。通过配置cobbler自动部署DHCP、TFTP、HTTP，在安装过程中加载kiskstart无人值守安装应答文件实现无人值守。从客户端使用PXE引导启动安装。</p>
<p><strong>Server端</strong><br>第一步，启动Cobbler服务<br>第二步，进行Cobbler错误检查，执行cobbler check命令<br>第三步，进行配置同步，执行cobbler sync命令<br>第四步，复制相关启动文件文件到TFTP目录中<br>第五步，启动DHCP服务，提供地址分配<br>第六步，DHCP服务分配IP地址<br>第七步，TFTP传输启动文件<br>第八步，Server端接收安装信息<br>第九步，Server端发送ISO镜像与Kickstart文件 </p>
<p><strong>Client端</strong><br>第一步，客户端以PXE模式启动<br>第二步，客户端获取IP地址<br>第三步，通过TFTP服务器获取启动文件<br>第四步，进入Cobbler安装选择界面<br>第五步，客户端确定加载信息<br>第六步，根据配置信息准备安装系统<br>第七步，加载Kickstart文件<br>第八步，传输系统安装的其它文件<br>第九步，进行安装系统 </p>
<h2 id="Cobbler部署实践">Cobbler部署实践</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置YUM源</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repo.d/</span><br><span class="line">vi epel.repo</span><br><span class="line"></span><br><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">6</span> - <span class="variable">$basearch</span></span><br><span class="line">baseurl=http://download.fedoraproject.org/pub/epel/<span class="number">6</span>/<span class="variable">$basearch</span></span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-6&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=<span class="number">1</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">6</span> - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=http://download.fedoraproject.org/pub/epel/<span class="number">6</span>/<span class="variable">$basearch</span>/debug</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-6&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=<span class="number">0</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-<span class="number">6</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">6</span> - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=http://download.fedoraproject.org/pub/epel/<span class="number">6</span>/SRPMS</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-6&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=<span class="number">0</span></span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-<span class="number">6</span></span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入GPG key</span></span><br><span class="line">sudo rpm --import http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改repo文件添加CentOS 6.X的YUM源</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">cp rhel-source.repo rhel-source.repo.bak</span><br><span class="line">vi rhel-source.repo</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Base</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Updates</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Extras</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Plus</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除缓存查看是否生效</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line">yum repolist</span><br><span class="line"></span><br><span class="line"><span class="comment">#直接cobbler关联依赖包</span></span><br><span class="line">yum install cobbler cobbler-web httpd rsync tftp-server xinetd dhcp python-ctypes debmirror pykickstart cman fence-agents dnsmasq </span><br><span class="line"></span><br><span class="line"><span class="comment">#使用yum-plugin-downloadonly插件</span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/cobbler cobbler cobbler-web httpd rsync tftp-server xinetd dhcp python-ctypes debmirror pykickstart cman fence-agents dnsmasq </span><br><span class="line"></span><br><span class="line"><span class="comment">#必要服务</span></span><br><span class="line">（<span class="number">1</span>）cobbler      （cobbler的核心）</span><br><span class="line">（<span class="number">2</span>）httpd        （提供cobbler的web界面）</span><br><span class="line">（<span class="number">3</span>）dhcpd        （为自动安装系统分配IP地址）</span><br><span class="line">（<span class="number">4</span>）epel-release （为之提供yum源）</span><br><span class="line">（<span class="number">5</span>）rsync        （cobbler需要同步信息）</span><br><span class="line">（<span class="number">6</span>）cobbler-web  （cobbler的一个web插件）</span><br><span class="line">（<span class="number">7</span>）xinetd       （为rsync和tftp的守护进程）</span><br><span class="line">（<span class="number">8</span>）tftp         （传送安装的一些文件的类似ftp）</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查cobbler配置，常见错误如下</span></span><br><span class="line">cobbler check</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> : The <span class="string">'server'</span> field <span class="keyword">in</span> /etc/cobbler/settings must be <span class="built_in">set</span> to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP <span class="keyword">for</span> the boot server as reachable by all machines that will use it.</span><br><span class="line"><span class="number">2</span> : For PXE to be functional, the <span class="string">'next_server'</span> field <span class="keyword">in</span> /etc/cobbler/settings must be <span class="built_in">set</span> to something other than <span class="number">127.0</span>.<span class="number">0.1</span>, and should match the IP of the boot server on the PXE network.</span><br><span class="line"><span class="number">3</span> : change <span class="string">'disable'</span> to <span class="string">'no'</span> <span class="keyword">in</span> /etc/xinetd.d/tftp</span><br><span class="line"><span class="number">4</span> : some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run <span class="string">'cobbler get-loaders'</span> to download them, or, <span class="keyword">if</span> you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files <span class="keyword">in</span> this directory, should you want to support all architectures, should include pxelinux.<span class="number">0</span>, menu.c32, elilo.efi, and yaboot. The <span class="string">'cobbler get-loaders'</span> <span class="built_in">command</span> is the easiest way to resolve these requirements.</span><br><span class="line"><span class="number">5</span> : change <span class="string">'disable'</span> to <span class="string">'no'</span> <span class="keyword">in</span> /etc/xinetd.d/rsync</span><br><span class="line"><span class="number">6</span> : file /etc/xinetd.d/rsync does not exist</span><br><span class="line"><span class="number">7</span> : debmirror package is not installed, it will be required to manage debian deployments and repositories</span><br><span class="line"><span class="number">8</span> : ksvalidator was not found, install pykickstart</span><br><span class="line"><span class="number">9</span> : The default password used by the sample templates <span class="keyword">for</span> newly installed machines (default_password_crypted <span class="keyword">in</span> /etc/cobbler/settings) is still <span class="built_in">set</span> to <span class="string">'cobbler'</span> and should be changed, try: <span class="string">"openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'"</span> to generate new one</span><br><span class="line"><span class="number">10</span> : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.编辑/etc/cobbler/settings文件，找到 server选项，修改为本机IP即可</span><br><span class="line"><span class="number">2</span>.编辑/etc/cobbler/settings文件，找到 next_server选项，修改为本机IP即可</span><br><span class="line"><span class="number">3</span>.SELinux的设置, 如果上面已经关闭了SELinux就不用管了</span><br><span class="line"><span class="number">4</span>.执行 cobbler get-loaders，系统将自动下载loader程序，完成提示<span class="number">4</span>的修复工作。</span><br><span class="line"><span class="number">5</span>.编辑/etc/xinetd.d/tftp文件，将文件中的<span class="built_in">disable</span>字段的配置由yes改为no</span><br><span class="line"><span class="number">6</span>.编辑/etc/xinetd.d/rsync文件，将文件中的<span class="built_in">disable</span>字段的配置由yes改为no</span><br><span class="line"><span class="number">7</span>.在iptables中将<span class="number">69</span>，<span class="number">80</span>，<span class="number">25151</span>端口打开。如果仅仅只是在内部环境中使用，建议直接将防火墙关掉</span><br><span class="line"><span class="number">8</span>.提示说debmirror没安装。如果不是安装 debian之类的系统，此提示可以忽略</span><br><span class="line"><span class="number">9</span>.修改cobbler用户的默认密码，可以使用如下命令生成密码，并使用生成后的密码替换/etc/cobbler/settings中的密码。生成密码命令：openssl passwd -<span class="number">1</span> -salt <span class="string">'random-phrase-here'</span> <span class="string">'your-password-here'</span>其中“random-phrase-here”为任意字符</span><br><span class="line"><span class="number">10</span>.安装cman或者fence-agents</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭selinux/iptables</span></span><br><span class="line">sed -i <span class="string">'/SELINUX/s/enforcing/disabled/'</span> /etc/selinux/config</span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">chkconfig iptables off</span><br><span class="line">service iptables stop</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置tftp服务和rsync服务</span></span><br><span class="line">sed -i <span class="string">'/disable/c\\tdisable\t\t\t= no'</span> /etc/xinetd.d/tftp</span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'s/\=\ yes/\=\ no/g'</span> /etc/xinetd.d/rsync </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置DHCP server的IP</span></span><br><span class="line">sed -i <span class="string">'s/next_server: 127.0.0.1/next_server: 172.28.70.245/g'</span> /etc/cobbler/settings  </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置cobbler的IP</span></span><br><span class="line">sed -i <span class="string">'s/server: 127.0.0.1/server: 172.28.70.245/g'</span> /etc/cobbler/settings  </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler管理rsync</span></span><br><span class="line">sed -i <span class="string">'s/manage_rsync: 0/manage_rsync: 1/g'</span> /etc/cobbler/settings  </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler管理DHCP</span></span><br><span class="line">sed -i <span class="string">'s/manage_dhcp: 0/manage_dhcp: 1/g'</span> /etc/cobbler/settings </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler一次安装开关（可选）</span></span><br><span class="line">sed -i <span class="string">'s/pxe_just_once: 0/pxe_just_once: 1/g'</span> /etc/cobbler/settings</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler管理DNS（可选）</span></span><br><span class="line">sed -i <span class="string">'s/manage_dns: 0/manage_dns: 1/g'</span> /etc/cobbler/settings</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启动态更新（可选）</span></span><br><span class="line">sed -i <span class="string">'s/allow_dynamic_settings: 0/allow_dynamic_settings: 1/g'</span> /etc/cobbler/settings</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置debmirror</span></span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'s/@dists=/#@dists=/g'</span> /etc/debmirror.conf</span><br><span class="line">sed -i <span class="operator">-e</span> <span class="string">'s/@arches=/#@arches=/g'</span> /etc/debmirror.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑dnsmasq.template中dhcp-range部分</span></span><br><span class="line"><span class="comment">#vi /etc/cobbler/dnsmasq.template</span></span><br><span class="line">vi /etc/dnsmasq.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cobbler generated configuration file for dnsmasq</span></span><br><span class="line"><span class="comment"># $date</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># resolve.conf .. ?</span></span><br><span class="line"><span class="comment">#no-poll</span></span><br><span class="line"><span class="comment">#enable-dbus</span></span><br><span class="line"><span class="built_in">read</span>-ethers</span><br><span class="line">addn-hosts = /var/lib/cobbler/cobbler_hosts</span><br><span class="line"></span><br><span class="line">dhcp-range=<span class="number">172.28</span>.<span class="number">70.246</span>,<span class="number">172.28</span>.<span class="number">70.250</span></span><br><span class="line">dhcp-option=<span class="number">3</span>,<span class="variable">$next_server</span></span><br><span class="line">dhcp-lease-max=<span class="number">1000</span></span><br><span class="line">dhcp-authoritative</span><br><span class="line">dhcp-boot=pxelinux.<span class="number">0</span></span><br><span class="line">dhcp-boot=net:normalarch,pxelinux.<span class="number">0</span></span><br><span class="line">dhcp-boot=net:ia64,<span class="variable">$elilo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启dnsmasq</span></span><br><span class="line">/etc/init.d/dnsmasq restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑dhcp.template</span></span><br><span class="line">cp /etc/cobbler/dhcp.template /etc/cobbler/dhcp.template.bak</span><br><span class="line">vi /etc/cobbler/dhcp.template</span><br><span class="line"></span><br><span class="line"><span class="comment"># ******************************************************************</span></span><br><span class="line"><span class="comment"># Cobbler managed dhcpd.conf file</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># generated from cobbler dhcp.conf template ($date)</span></span><br><span class="line"><span class="comment"># Do NOT make changes to /etc/dhcpd.conf. Instead, make your changes</span></span><br><span class="line"><span class="comment"># in /etc/cobbler/dhcp.template, as /etc/dhcpd.conf will be</span></span><br><span class="line"><span class="comment"># overwritten.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ******************************************************************</span></span><br><span class="line"></span><br><span class="line">ddns-update-style interim;</span><br><span class="line"></span><br><span class="line">allow booting;</span><br><span class="line">allow bootp;</span><br><span class="line"></span><br><span class="line">ignore client-updates;</span><br><span class="line"><span class="built_in">set</span> vendorclass = option vendor-class-identifier;</span><br><span class="line"></span><br><span class="line">option pxe-system-type code <span class="number">93</span> = unsigned <span class="built_in">integer</span> <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">subnet <span class="number">172.28</span>.<span class="number">70.0</span> netmask <span class="number">255.255</span>.<span class="number">255.0</span> &#123;</span><br><span class="line">     option routers             <span class="number">172.28</span>.<span class="number">70.254</span>;</span><br><span class="line">     option domain-name-servers <span class="number">172.28</span>.<span class="number">70.254</span>;</span><br><span class="line">     option subnet-mask         <span class="number">255.255</span>.<span class="number">255.0</span>;</span><br><span class="line">     range dynamic-bootp        <span class="number">172.28</span>.<span class="number">70.246</span> <span class="number">172.28</span>.<span class="number">70.250</span>;</span><br><span class="line">     default-lease-time         <span class="number">21600</span>;</span><br><span class="line">     max-lease-time             <span class="number">43200</span>;</span><br><span class="line">     next-server                <span class="variable">$next_server</span>;</span><br><span class="line">     class <span class="string">"pxeclients"</span> &#123;</span><br><span class="line">          match <span class="keyword">if</span> substring (option vendor-class-identifier, <span class="number">0</span>, <span class="number">9</span>) = <span class="string">"PXEClient"</span>;</span><br><span class="line">          <span class="keyword">if</span> option pxe-system-type = <span class="number">00</span>:<span class="number">02</span> &#123;</span><br><span class="line">                  filename <span class="string">"ia64/elilo.efi"</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-system-type = <span class="number">00</span>:<span class="number">06</span> &#123;</span><br><span class="line">                  filename <span class="string">"grub/grub-x86.efi"</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-system-type = <span class="number">00</span>:<span class="number">07</span> &#123;</span><br><span class="line">                  filename <span class="string">"grub/grub-x86_64.efi"</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  filename <span class="string">"pxelinux.0"</span>;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#for dhcp_tag in $dhcp_tags.keys():</span></span><br><span class="line">    <span class="comment">## group could be subnet if your dhcp tags line up with your subnets</span></span><br><span class="line">    <span class="comment">## or really any valid dhcpd.conf construct ... if you only use the</span></span><br><span class="line">    <span class="comment">## default dhcp tag in cobbler, the group block can be deleted for a</span></span><br><span class="line">    <span class="comment">## flat configuration</span></span><br><span class="line"><span class="comment"># group for Cobbler DHCP tag: $dhcp_tag</span></span><br><span class="line">group &#123;</span><br><span class="line">        <span class="comment">#for mac in $dhcp_tags[$dhcp_tag].keys():</span></span><br><span class="line">            <span class="comment">#set iface = $dhcp_tags[$dhcp_tag][$mac]</span></span><br><span class="line">    host <span class="variable">$iface</span>.name &#123;</span><br><span class="line">        hardware ethernet <span class="variable">$mac</span>;</span><br><span class="line">        <span class="comment">#if $iface.ip_address:</span></span><br><span class="line">        fixed-address <span class="variable">$iface</span>.ip_address;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.hostname:</span></span><br><span class="line">        option host-name <span class="string">"<span class="variable">$iface</span>.hostname"</span>;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.netmask:</span></span><br><span class="line">        option subnet-mask <span class="variable">$iface</span>.netmask;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.gateway:</span></span><br><span class="line">        option routers <span class="variable">$iface</span>.gateway;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">#if $iface.enable_gpxe:</span></span><br><span class="line">        <span class="keyword">if</span> exists user-class and option user-class = <span class="string">"gPXE"</span> &#123;</span><br><span class="line">            filename <span class="string">"http://<span class="variable">$cobbler_server</span>/cblr/svc/op/gpxe/system/<span class="variable">$iface</span>.owner"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> exists user-class and option user-class = <span class="string">"iPXE"</span> &#123;</span><br><span class="line">            filename <span class="string">"http://<span class="variable">$cobbler_server</span>/cblr/svc/op/gpxe/system/<span class="variable">$iface</span>.owner"</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            filename <span class="string">"undionly.kpxe"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#else</span></span><br><span class="line">        filename <span class="string">"<span class="variable">$iface</span>.filename"</span>;</span><br><span class="line">        <span class="comment">#end if</span></span><br><span class="line">        <span class="comment">## Cobbler defaults to $next_server, but some users</span></span><br><span class="line">        <span class="comment">## may like to use $iface.system.server for proxied setups</span></span><br><span class="line">        next-server <span class="variable">$next_server</span>;</span><br><span class="line">        <span class="comment">## next-server $iface.next_server;</span></span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">#end for</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#end for</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将dns和dhcp的管理引擎都配置为dnsmasq，修改/etc/cobbler/modules.conf</span></span><br><span class="line">vi /etc/cobbler/modules.conf</span><br><span class="line"></span><br><span class="line">[authentication]</span><br><span class="line">module = authn_configfile</span><br><span class="line">[dns]</span><br><span class="line">module = manage_dnsmasq</span><br><span class="line">[dhcp]</span><br><span class="line">module = manage_dnsmasq</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改httpd配置并启动</span></span><br><span class="line">vi /etc/httpd/conf/httpd.conf</span><br><span class="line"></span><br><span class="line">ServerName <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">80</span></span><br><span class="line"></span><br><span class="line">/etc/init.d/httpd restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置目标系统root密码，这个设置只对CentOS/RHEL有效</span></span><br><span class="line">PASSWORD=<span class="string">"`echo "</span>admin123<span class="string">" | openssl passwd -1 -salt 'root' –stdin`"</span></span><br><span class="line">sed -i s@<span class="string">"^default_password_crypted.*$"</span>@<span class="string">"default_password_crypted: \"<span class="variable">$PASSWORD</span>\""</span>@g /etc/cobbler/settings</span><br><span class="line">***</span><br><span class="line">default_password_crypted: <span class="string">"<span class="variable">$1</span><span class="variable">$cobbler</span><span class="variable">$k</span>/5ITeQUOffuOujzEvhjY."</span></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载启动菜单,启动报错请尝试service cobblerd restart </span></span><br><span class="line">cobbler get-loaders</span><br><span class="line"></span><br><span class="line">cobbler@root<span class="comment">#cobbler get-loaders</span></span><br><span class="line">task started: <span class="number">2016</span>-<span class="number">04</span>-<span class="number">11</span>_092911_get_loaders</span><br><span class="line">task started (id=Download Bootloader Content, time=Mon Apr <span class="number">11</span> <span class="number">09</span>:<span class="number">29</span>:<span class="number">11</span> <span class="number">2016</span>)</span><br><span class="line">downloading http://cobbler.github.io/loaders/README to /var/lib/cobbler/loaders/README</span><br><span class="line">downloading http://cobbler.github.io/loaders/COPYING.elilo to /var/lib/cobbler/loaders/COPYING.elilo</span><br><span class="line">downloading http://cobbler.github.io/loaders/COPYING.yaboot to /var/lib/cobbler/loaders/COPYING.yaboot</span><br><span class="line">downloading http://cobbler.github.io/loaders/COPYING.syslinux to /var/lib/cobbler/loaders/COPYING.syslinux</span><br><span class="line">downloading http://cobbler.github.io/loaders/elilo-<span class="number">3.8</span>-ia64.efi to /var/lib/cobbler/loaders/elilo-ia64.efi</span><br><span class="line">downloading http://cobbler.github.io/loaders/yaboot-<span class="number">1.3</span>.<span class="number">17</span> to /var/lib/cobbler/loaders/yaboot</span><br><span class="line">downloading http://cobbler.github.io/loaders/pxelinux.<span class="number">0</span>-<span class="number">3.86</span> to /var/lib/cobbler/loaders/pxelinux.<span class="number">0</span></span><br><span class="line">downloading http://cobbler.github.io/loaders/menu.c32-<span class="number">3.86</span> to /var/lib/cobbler/loaders/menu.c32</span><br><span class="line">downloading http://cobbler.github.io/loaders/grub-<span class="number">0.97</span>-x86.efi to /var/lib/cobbler/loaders/grub-x86.efi</span><br><span class="line">downloading http://cobbler.github.io/loaders/grub-<span class="number">0.97</span>-x86_64.efi to /var/lib/cobbler/loaders/grub-x86_64.efi</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启相关服务并配置自动启动</span></span><br><span class="line">chkconfig cobblerd on  </span><br><span class="line">chkconfig httpd on</span><br><span class="line">chkconfig xinetd on</span><br><span class="line">chkconfig dnsmasq on </span><br><span class="line"> </span><br><span class="line">service httpd restart  </span><br><span class="line">service xinetd restart  </span><br><span class="line">service dnsmasq restart </span><br><span class="line">service cobblerd restart  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查并同步cobbler配置，如果有如下报错确认文件存在可以忽略</span></span><br><span class="line">cobbler@ZJ/etc/cobbler<span class="comment">#cobbler check</span></span><br><span class="line">The following are potential configuration items that you may want to fix:</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> : file /etc/xinetd.d/rsync does not exist</span><br><span class="line"></span><br><span class="line">Restart cobblerd and <span class="keyword">then</span> run <span class="string">'cobbler sync'</span> to apply changes.</span><br><span class="line"></span><br><span class="line">cobbler@ZJ/etc/cobbler<span class="comment">#cobbler sync</span></span><br><span class="line">task started: <span class="number">2016</span>-<span class="number">04</span>-<span class="number">11</span>_170138_sync</span><br><span class="line">task started (id=Sync, time=Mon Apr <span class="number">11</span> <span class="number">17</span>:<span class="number">01</span>:<span class="number">38</span> <span class="number">2016</span>)</span><br><span class="line">running pre-sync triggers</span><br><span class="line">cleaning trees</span><br><span class="line">removing: /var/lib/tftpboot/grub/images</span><br><span class="line">copying bootloaders</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/pxelinux.<span class="number">0</span> -&gt; /var/lib/tftpboot/pxelinux.<span class="number">0</span></span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/menu.c32 -&gt; /var/lib/tftpboot/menu.c32</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/yaboot -&gt; /var/lib/tftpboot/yaboot</span><br><span class="line">trying hardlink /usr/share/syslinux/memdisk -&gt; /var/lib/tftpboot/memdisk</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/grub-x86_64.efi -&gt; /var/lib/tftpboot/grub/grub-x86_64.efi</span><br><span class="line">trying hardlink /var/lib/cobbler/loaders/grub-x86.efi -&gt; /var/lib/tftpboot/grub/grub-x86.efi</span><br><span class="line">copying distros to tftpboot</span><br><span class="line">copying images</span><br><span class="line">generating PXE configuration files</span><br><span class="line">generating PXE menu structure</span><br><span class="line">rendering DHCP files</span><br><span class="line">rendering DNS files</span><br><span class="line">rendering TFTPD files</span><br><span class="line">generating /etc/xinetd.d/tftp</span><br><span class="line">cleaning link caches</span><br><span class="line">rendering Rsync files</span><br><span class="line">running post-sync triggers</span><br><span class="line">running python triggers from /var/lib/cobbler/triggers/sync/post/*</span><br><span class="line">running python trigger cobbler.modules.sync_post_restart_services</span><br><span class="line">running: service dnsmasq restart</span><br><span class="line">received on stdout: Shutting down dnsmasq: [  OK  ]</span><br><span class="line">Starting dnsmasq: [  OK  ]</span><br><span class="line"></span><br><span class="line">received on stderr: </span><br><span class="line">running shell triggers from /var/lib/cobbler/triggers/sync/post/*</span><br><span class="line">running python triggers from /var/lib/cobbler/triggers/change/*</span><br><span class="line">running python trigger cobbler.modules.scm_track</span><br><span class="line">running shell triggers from /var/lib/cobbler/triggers/change/*</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"></span><br><span class="line"><span class="comment">#开启动态编辑后的效果</span></span><br><span class="line">cobbler setting report</span><br><span class="line">cobbler setting report [--name=option]</span><br><span class="line"></span><br><span class="line">allow_duplicate_hostnames               : <span class="number">0</span></span><br><span class="line">allow_duplicate_ips                     : <span class="number">0</span></span><br><span class="line">allow_duplicate_macs                    : <span class="number">0</span></span><br><span class="line">allow_dynamic_settings                  : <span class="number">1</span></span><br><span class="line">always_write_dhcp_entries               : <span class="number">0</span></span><br><span class="line">anamon_enabled                          : <span class="number">0</span></span><br><span class="line">auth_token_expiration                   : <span class="number">3600</span></span><br><span class="line">authn_pam_service                       : login</span><br><span class="line"><span class="built_in">bind</span>_chroot_path                        : </span><br><span class="line"><span class="built_in">bind</span>_master                             : <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">build_reporting_email                   : [<span class="string">'root@localhost'</span>]</span><br><span class="line">build_reporting_enabled                 : <span class="number">0</span></span><br><span class="line">build_reporting_ignorelist              : [<span class="string">''</span>]</span><br><span class="line">build_reporting_sender                  : </span><br><span class="line">build_reporting_smtp_server             : localhost</span><br><span class="line">build_reporting_subject                 : </span><br><span class="line">build_reporting_to_address              : </span><br><span class="line">buildisodir                             : /var/cache/cobbler/buildiso</span><br><span class="line">cheetah_import_whitelist                : [<span class="string">'random'</span>, <span class="string">'re'</span>, <span class="string">'time'</span>]</span><br><span class="line">client_use_https                        : <span class="number">0</span></span><br><span class="line">client_use_localhost                    : <span class="number">0</span></span><br><span class="line">cobbler_master                          : </span><br><span class="line">consoles                                : /var/consoles</span><br><span class="line">createrepo_flags                        : -c cache <span class="operator">-s</span> sha</span><br><span class="line">default_deployment_method               : ssh</span><br><span class="line">default_kickstart                       : /var/lib/cobbler/kickstarts/default.ks</span><br><span class="line">default_name_servers                    : []</span><br><span class="line">default_name_servers_search             : []</span><br><span class="line">default_ownership                       : [<span class="string">'admin'</span>]</span><br><span class="line">default_password_crypted                : <span class="variable">$1</span><span class="variable">$root</span><span class="variable">$JX8M6OcOn</span>.pjk0pHdnG0y0</span><br><span class="line">default_template_<span class="built_in">type</span>                   : cheetah</span><br><span class="line">default_virt_bridge                     : xenbr0</span><br><span class="line">default_virt_disk_driver                : raw</span><br><span class="line">default_virt_file_size                  : <span class="number">5</span></span><br><span class="line">default_virt_ram                        : <span class="number">512</span></span><br><span class="line">default_virt_<span class="built_in">type</span>                       : xenpv</span><br><span class="line"><span class="built_in">enable</span>_gpxe                             : <span class="number">0</span></span><br><span class="line"><span class="built_in">enable</span>_menu                             : <span class="number">1</span></span><br><span class="line">func_auto_setup                         : <span class="number">0</span></span><br><span class="line">func_master                             : overlord.example.org</span><br><span class="line">http_port                               : <span class="number">80</span></span><br><span class="line">isc_<span class="built_in">set</span>_host_name                       : <span class="number">0</span></span><br><span class="line">iso_template_dir                        : /etc/cobbler/iso</span><br><span class="line">kerberos_realm                          : EXAMPLE.COM</span><br><span class="line">kernel_options                          : &#123;<span class="string">'ksdevice'</span>: <span class="string">'bootif'</span>, <span class="string">'lang'</span>: <span class="string">' '</span>, <span class="string">'text'</span>: <span class="string">'~'</span>&#125;</span><br><span class="line">kernel_options_s390x                    : &#123;<span class="string">'vnc'</span>: <span class="string">'~'</span>, <span class="string">'ip'</span>: False, <span class="string">'RUNKS'</span>: <span class="number">1</span>, <span class="string">'ramdisk_size'</span>: <span class="number">40000</span>, <span class="string">'ro'</span>: <span class="string">'~'</span>, <span class="string">'root'</span>: <span class="string">'/dev/ram0'</span>&#125;</span><br><span class="line">ldap_anonymous_<span class="built_in">bind</span>                     : <span class="number">1</span></span><br><span class="line">ldap_base_dn                            : DC=example,DC=com</span><br><span class="line">ldap_management_default_<span class="built_in">type</span>            : authconfig</span><br><span class="line">ldap_port                               : <span class="number">389</span></span><br><span class="line">ldap_search_<span class="built_in">bind</span>_dn                     : </span><br><span class="line">ldap_search_passwd                      : </span><br><span class="line">ldap_search_prefix                      : uid=</span><br><span class="line">ldap_server                             : ldap.example.com</span><br><span class="line">ldap_tls                                : <span class="number">1</span></span><br><span class="line">ldap_tls_cacertfile                     : </span><br><span class="line">ldap_tls_certfile                       : </span><br><span class="line">ldap_tls_keyfile                        : </span><br><span class="line">manage_dhcp                             : <span class="number">1</span></span><br><span class="line">manage_dns                              : <span class="number">1</span></span><br><span class="line">manage_forward_zones                    : []</span><br><span class="line">manage_reverse_zones                    : []</span><br><span class="line">manage_rsync                            : <span class="number">1</span></span><br><span class="line">manage_tftp                             : <span class="number">1</span></span><br><span class="line">manage_tftpd                            : <span class="number">1</span></span><br><span class="line">mgmt_classes                            : []</span><br><span class="line">mgmt_parameters                         : &#123;<span class="string">'from_cobbler'</span>: <span class="number">1</span>&#125;</span><br><span class="line">next_server                             : <span class="number">172.28</span>.<span class="number">70.245</span></span><br><span class="line">power_management_default_<span class="built_in">type</span>           : ipmitool</span><br><span class="line">power_template_dir                      : /etc/cobbler/power</span><br><span class="line">proxy_url_ext                           : </span><br><span class="line">proxy_url_int                           : </span><br><span class="line">puppet_auto_setup                       : <span class="number">0</span></span><br><span class="line">puppet_parameterized_classes            : <span class="number">1</span></span><br><span class="line">puppet_server                           : puppet</span><br><span class="line">puppet_version                          : <span class="number">2</span></span><br><span class="line">puppetca_path                           : /usr/bin/puppet</span><br><span class="line">pxe_just_once                           : <span class="number">1</span></span><br><span class="line">pxe_template_dir                        : /etc/cobbler/pxe</span><br><span class="line">redhat_management_key                   : </span><br><span class="line">redhat_management_permissive            : <span class="number">0</span></span><br><span class="line">redhat_management_server                : xmlrpc.rhn.redhat.com</span><br><span class="line">redhat_management_<span class="built_in">type</span>                  : off</span><br><span class="line">register_new_installs                   : <span class="number">0</span></span><br><span class="line">remove_old_puppet_certs_automatically   : <span class="number">0</span></span><br><span class="line">replicate_repo_rsync_options            : -avzH</span><br><span class="line">replicate_rsync_options                 : -avzH</span><br><span class="line">reposync_flags                          : <span class="operator">-l</span> -n <span class="operator">-d</span></span><br><span class="line">restart_dhcp                            : <span class="number">1</span></span><br><span class="line">restart_dns                             : <span class="number">1</span></span><br><span class="line">restart_xinetd                          : <span class="number">1</span></span><br><span class="line">run_install_triggers                    : <span class="number">1</span></span><br><span class="line">scm_track_enabled                       : <span class="number">0</span></span><br><span class="line">scm_track_mode                          : git</span><br><span class="line">serializer_pretty_json                  : <span class="number">0</span></span><br><span class="line">server                                  : <span class="number">172.28</span>.<span class="number">70.245</span></span><br><span class="line">sign_puppet_certs_automatically         : <span class="number">0</span></span><br><span class="line">signature_path                          : /var/lib/cobbler/distro_signatures.json</span><br><span class="line">signature_url                           : http://cobbler.github.io/signatures/<span class="number">2.6</span>.x/latest.json</span><br><span class="line">snippetsdir                             : /var/lib/cobbler/snippets</span><br><span class="line">template_remote_kickstarts              : <span class="number">0</span></span><br><span class="line">virt_auto_boot                          : <span class="number">1</span></span><br><span class="line">webdir                                  : /var/www/cobbler</span><br><span class="line">xmlrpc_port                             : <span class="number">25151</span></span><br><span class="line">yum_distro_priority                     : <span class="number">1</span></span><br><span class="line">yum_post_install_mirror                 : <span class="number">1</span></span><br><span class="line">yumdownloader_flags                     : --resolve</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改seting文件cobbler登陆服务器地址</span></span><br><span class="line">cobbler setting edit --name=server --value=<span class="number">172.28</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#ks脚本关闭pxe，这样就不会重复安装</span></span><br><span class="line">cobbler setting edit --name=pxe_just_once --value=<span class="number">1</span></span><br><span class="line"><span class="comment">#TFTP服务器 IP地址</span></span><br><span class="line">cobbler setting edit --name=next_server --value=<span class="number">172.28</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#cobbler管理rsync，dhcp，dns</span></span><br><span class="line">cobbler setting edit --name=manage_rsync --value=<span class="number">1</span></span><br><span class="line">cobbler setting edit --name=manage_dhcp --value=<span class="number">1</span></span><br><span class="line">cobbler setting edit --name=manage_dns --value=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="cobbler导入镜像">cobbler导入镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用镜像文件</span></span><br><span class="line">mount -o loop /tmp/rhel-server-<span class="number">6.3</span>-x86_64-dvd.iso /mnt/rhel63</span><br><span class="line"><span class="comment">#使用光盘</span></span><br><span class="line">mount /dev/sr0 /mnt/rhel63</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行镜像导入，并关联自定义的自动安装配置ks脚本，这个地方我们可以为不同的系统版本指定不同的自动安装ks脚本（这个过程实际比较长，cobbler会把软件整个复制一份到本地，在这之前，务必确认硬盘空间足够装下镜像）</span></span><br><span class="line">cobbler import --path=/tmp/rhel63 --name=rhel63 --kickstart=/var/lib/cobbler/kickstarts/rhel63.cfg</span><br><span class="line"></span><br><span class="line">task started: <span class="number">2016</span>-<span class="number">04</span>-<span class="number">12</span>_090326_import</span><br><span class="line">task started (id=Media import, time=Tue Apr <span class="number">12</span> <span class="number">09</span>:<span class="number">03</span>:<span class="number">26</span> <span class="number">2016</span>)</span><br><span class="line">Found a candidate signature: breed=redhat, version=rhel6</span><br><span class="line">Found a matching signature: breed=redhat, version=rhel6</span><br><span class="line">Adding distros from path /var/www/cobbler/ks_mirror/rhel63:</span><br><span class="line">creating new distro: rhel63-x86_64</span><br><span class="line">trying symlink: /var/www/cobbler/ks_mirror/rhel63 -&gt; /var/www/cobbler/links/rhel63-x86_64</span><br><span class="line">creating new profile: rhel63-x86_64</span><br><span class="line">associating repos</span><br><span class="line">checking <span class="keyword">for</span> rsync repo(s)</span><br><span class="line">checking <span class="keyword">for</span> rhn repo(s)</span><br><span class="line">checking <span class="keyword">for</span> yum repo(s)</span><br><span class="line">starting descent into /var/www/cobbler/ks_mirror/rhel63 <span class="keyword">for</span> rhel63-x86_64</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/HighAvailability</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/HighAvailability</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/HighAvailability/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/HighAvailability/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/Server</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/Server</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/Server/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/Server/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/LoadBalancer</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/LoadBalancer</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/LoadBalancer/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/LoadBalancer/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/ScalableFileSystem/repodata</span><br><span class="line">processing repo at : /var/www/cobbler/ks_mirror/rhel63/ResilientStorage</span><br><span class="line">need to process repo/comps: /var/www/cobbler/ks_mirror/rhel63/ResilientStorage</span><br><span class="line">looking <span class="keyword">for</span> /var/www/cobbler/ks_mirror/rhel63/ResilientStorage/repodata/*comps*.xml</span><br><span class="line">Keeping repodata as-is :/var/www/cobbler/ks_mirror/rhel63/ResilientStorage/repodata</span><br><span class="line">*** TASK COMPLETE ***</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看cobbler导入结果</span></span><br><span class="line">cobbler distro list</span><br><span class="line">cobbler report</span><br><span class="line"></span><br><span class="line"><span class="comment">#验证ks有效性，剩下的就是PXE引导测试了</span></span><br><span class="line">cobbler validateks</span><br></pre></td></tr></table></figure>
<h2 id="cobbler-web">cobbler-web</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置Web登录,cobbler 2.6以上版本已经无需修改</span></span><br><span class="line">sed -i <span class="string">'s/module = authn_denyall/module = authn_configfile/g'</span> /etc/cobbler/modules.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置Cobbler Web登录用户登录密码</span></span><br><span class="line">htdigest /etc/cobbler/users.digest <span class="string">"Cobbler"</span> cobbler</span><br><span class="line">Changing password <span class="keyword">for</span> user cobbler <span class="keyword">in</span> realm Cobbler</span><br><span class="line">New password:cobbler</span><br><span class="line">Re-type new password:cobbler</span><br><span class="line"></span><br><span class="line"><span class="comment">#cobbler_web登录地址，推荐使用命令行管理</span></span><br><span class="line">http://&#123;IP&#125;/cobbler_web</span><br></pre></td></tr></table></figure>
<h2 id="Cobbler相关选项说明">Cobbler相关选项说明</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Cobbler 常用命令详解</span></span><br><span class="line">cobbler check <span class="comment">#检查cobbler配置 </span></span><br><span class="line">cobbler sync <span class="comment">#同步配置到dhcp/pxe和数据目录 </span></span><br><span class="line">cobbler list <span class="comment">#列出所有的cobbler元素 </span></span><br><span class="line">cobbler import <span class="comment">#导入安装的系统镜像 </span></span><br><span class="line">cobbler report <span class="comment">#列出各元素的详细信息 </span></span><br><span class="line">cobbler distro <span class="comment">#查看导入的发行版系统信息 </span></span><br><span class="line">cobbler profile <span class="comment">#查看配置信息 </span></span><br><span class="line">cobbler system <span class="comment">#查看添加的系统信息 </span></span><br><span class="line">cobbler reposync <span class="comment">#同步yum仓库到本地</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入镜像文件</span></span><br><span class="line">命令：cobbler import --path=镜像路径 -- name=安装引导名 --arch=<span class="number">32</span>位或<span class="number">64</span>位</span><br><span class="line">参数：</span><br><span class="line">path 是镜像所挂载的目录 </span><br><span class="line">name 是导入到cobbler里面显示的名字 </span><br><span class="line">arch 是<span class="number">32</span>位系统还是<span class="number">64</span>位系统</span><br><span class="line"></span><br><span class="line"><span class="comment">#导入kickstart文件</span></span><br><span class="line">命令：cobbler profile add --name=list名 --distro=镜像 --kickstart=路径</span><br><span class="line">参数：</span><br><span class="line">name是表示添加的ks 的名字，用cobbler report可以看到这个名字 </span><br><span class="line">distro 是用哪个镜像，list的distros里面选择一个，需要版本相对应 </span><br><span class="line">kickstart 是具体的 ks 文件路径</span><br><span class="line"></span><br><span class="line"><span class="comment">#同步DHCP、HTTPD</span></span><br><span class="line">命令：cobbler sync</span><br><span class="line">注，每次修改完dhcp.template之类的配置文件需要执行一次使其生效。</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看Cobbler列表</span></span><br><span class="line">命令：cobbler list</span><br><span class="line">注，列出Cobbler所有的元素。</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除相关列表</span></span><br><span class="line">命令：cobbler distro/profile remove --name=要删除的引导文件名</span><br><span class="line">删除指定 distro , 也就是镜像</span><br><span class="line">删除指定的 profile 文件，也就是 ks</span><br><span class="line"></span><br><span class="line"><span class="comment">#Cobbler安装后目录说明</span></span><br><span class="line">cobbler配置文件目录/etc/cobbler：</span><br><span class="line">/etc/cobbler/settings <span class="comment">#cobbler主配置文件 </span></span><br><span class="line">/etc/cobbler/iso/ <span class="comment">#iso模板配置文件 </span></span><br><span class="line">/etc/cobbler/pxe <span class="comment">#pxe模板文件 </span></span><br><span class="line">/etc/cobbler/power <span class="comment">#电源的配置文件 </span></span><br><span class="line">/etc/cobbler/users.conf <span class="comment">#Web 服务授权配置文件 </span></span><br><span class="line">/etc/cobbler/users.digest <span class="comment">#用于web访问的用户名密码配置文件 </span></span><br><span class="line">/etc/cobbler/dhcp.template <span class="comment">#DHCP服务的配置模板 </span></span><br><span class="line">/etc/cobbler/dnsmasq.template <span class="comment">#DNS服务的配置模板 </span></span><br><span class="line">/etc/cobbler/tftpd.template <span class="comment">#tftp服务的配置模板 </span></span><br><span class="line">/etc/cobbler/modules.conf <span class="comment">#Cobbler模块配置文件</span></span><br><span class="line"></span><br><span class="line">cobbler数据目录/var/lib/cobbler：</span><br><span class="line">/var/lib/cobbler/config/ <span class="comment">#用于存放distros、systems、profiles等信息配置文件 </span></span><br><span class="line">/var/lib/cobbler/triggers <span class="comment">#用于存放用户定义的cobbler 命令 </span></span><br><span class="line">/var/lib/cobbler/kickstarts/ <span class="comment">#默认存放kickstart文件 </span></span><br><span class="line">/var/lib/cobbler/loaders <span class="comment">#存放的各种引导程序</span></span><br><span class="line"></span><br><span class="line">镜像数据目录/var/www/cobbler：</span><br><span class="line">/var/www/cobbler/ks_mirror/ <span class="comment">#导入的发行版系统的所有数据 </span></span><br><span class="line">/var/www/cobbler/images/ <span class="comment">#导入发行版的Kernel和initrd镜像用于远程网络启动 </span></span><br><span class="line">/var/www/cobbler/repo_mirror/ <span class="comment">#yum仓库存储目录</span></span><br><span class="line"></span><br><span class="line">日志目录 /var/<span class="built_in">log</span>/cobbler/：</span><br><span class="line">/var/<span class="built_in">log</span>/cobbler/install.log <span class="comment">#客户端的安装系统日志 </span></span><br><span class="line">/var/<span class="built_in">log</span>/cobbler/cobbler.log <span class="comment">#cobbler日志</span></span><br></pre></td></tr></table></figure>
<h2 id="常见问题">常见问题</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多查看错误日志</span></span><br><span class="line">less /var/<span class="built_in">log</span>/cobbler/cobbler.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#为cobbler-web重置用户密码</span></span><br><span class="line">htdigest /etc/cobbler/users.digest <span class="string">"Cobbler"</span> cobbler </span><br><span class="line"><span class="comment">#添加新用户</span></span><br><span class="line">htdigest /etc/cobbler/users.digest <span class="string">"Cobbler"</span>  usernam</span><br><span class="line"></span><br><span class="line"><span class="comment">#DHCP多网卡环境可以指定网卡</span></span><br><span class="line">vi /etc/sysconfig/dhcpd </span><br><span class="line"><span class="comment"># Command line options here</span></span><br><span class="line">DHCPDARGS=eth0</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[使用Cobbler轻松设置和管理网络安装环境]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[RHEL(Red Hat Enterprise Linux)配置YUM源]]></title>
    <link href="http://wsgzao.github.io/post/yum/"/>
    <id>http://wsgzao.github.io/post/yum/</id>
    <published>2016-04-01T08:22:32.000Z</published>
    <updated>2016-04-01T06:40:45.289Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>YUM（全称为 Yellow dog Updater, Modified）是一个在Fedora中的Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载和安装。文章以RHEL(Red Hat Enterprise Linux)配置YUM源为例分享YUM常用命令技巧以及如何搭建ISO本地源和CentOS YUM源。</p>
<blockquote>
<p>YUM是一个安装，卸载和搜索软件包的工具</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年04月01日 - 更新rhel7.1配置CentOS 7 YUM源<br>2016年03月25日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/yum/" target="_blank" rel="external">http://wsgzao.github.io/post/yum/</a></p>
<p><strong>扩展阅读</strong></p>
<p>RHEL/CentOS/OracleLinux 7.x使用EPEL和REMI第三方yum源 - <a href="http://www.ha97.com/5649.html" target="_blank" rel="external">http://www.ha97.com/5649.html</a></p>
<h2 id="YUM常用命令">YUM常用命令</h2><blockquote>
<p>列举平时做常用的几组YUM命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#清除缓存目录</span></span><br><span class="line">yum clean all</span><br><span class="line"><span class="comment">#更新缓存</span></span><br><span class="line">yum makecache</span><br><span class="line"><span class="comment">#使用YUM查找软件包</span></span><br><span class="line">yum search telnet</span><br><span class="line"><span class="comment">#用YUM安装软件包</span></span><br><span class="line">yum install telnet</span><br><span class="line"><span class="comment">#用YUM删除软件包</span></span><br><span class="line">yum remove telnet</span><br><span class="line"><span class="comment">#安装更新软件</span></span><br><span class="line">yum update</span><br><span class="line">yum update telnet</span><br></pre></td></tr></table></figure>
<h2 id="本地YUM源">本地YUM源</h2><blockquote>
<p>无论直接加载ISO还是拷贝文件来搭建本地YUM源都是很简单的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过ISO镜像挂载或者复制文件</span></span><br><span class="line">mount -o loop rhel-server-<span class="number">6.3</span>-x86_64-dvd.iso /mnt</span><br><span class="line">mkdir /tmp/repo</span><br><span class="line">cp -r /mnt/* /tmp/repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑本地YUM源文件</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line"><span class="comment">#清除老配置，rm -rf *</span></span><br><span class="line">vi local.repo</span><br><span class="line"></span><br><span class="line">[rhel6.<span class="number">3</span>]</span><br><span class="line">name=rhel6.<span class="number">3</span></span><br><span class="line">baseurl=file:///tmp/repo</span><br><span class="line">enabled=<span class="number">1</span></span><br><span class="line">gpgcheck=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除yum缓存并更新</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line">Loaded plugins: product-id, refresh-packagekit, security, subscription-manager</span><br><span class="line">Updating certificate-based repositories.</span><br><span class="line">Unable to <span class="built_in">read</span> consumer identity</span><br><span class="line">rhel6.<span class="number">3</span>                 | <span class="number">4.0</span> kB     <span class="number">00</span>:<span class="number">00</span> ...</span><br><span class="line">rhel6.<span class="number">3</span>/filelists_db    | <span class="number">3.7</span> MB     <span class="number">00</span>:<span class="number">00</span> ...</span><br><span class="line">rhel6.<span class="number">3</span>/primary_db      | <span class="number">3.1</span> MB     <span class="number">00</span>:<span class="number">00</span> ...</span><br><span class="line">rhel6.<span class="number">3</span>/other_db        | <span class="number">1.6</span> MB     <span class="number">00</span>:<span class="number">00</span> ...</span><br><span class="line">rhel6.<span class="number">3</span>/group_gz        | <span class="number">204</span> kB     <span class="number">00</span>:<span class="number">00</span> ...</span><br><span class="line">Metadata Cache Created</span><br></pre></td></tr></table></figure>
<h2 id="搭建YUM服务器">搭建YUM服务器</h2><blockquote>
<p>选择ftp或http等方式多可以，偷懒必须要简单有效</p>
</blockquote>
<h3 id="YUM服务端">YUM服务端</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装apache</span></span><br><span class="line">yum install httpd*</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑apache配置文件</span></span><br><span class="line"><span class="built_in">cd</span> /etc/httpd/conf</span><br><span class="line">cp httpd.conf httpd.conf.bak</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除测试启动服务</span></span><br><span class="line">rm <span class="operator">-f</span> /etc/httpd/conf.d/welcome.conf /var/www/error/noindex.html</span><br><span class="line"></span><br><span class="line"><span class="comment">#拷贝文件到目录或者修改httpd.conf中的DocumentRoot</span></span><br><span class="line">cp -r /tmp/repo /var/www/html</span><br><span class="line"><span class="built_in">cd</span> /var/www/html</span><br><span class="line">chmod -R <span class="number">755</span> repo/</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启apache服务 并设置服务自启动</span></span><br><span class="line">service httpd restart</span><br><span class="line">chkconfig httpd on</span><br><span class="line">chkconfig --list | grep httpd</span><br><span class="line"></span><br><span class="line">httpd              <span class="number">0</span>:off    <span class="number">1</span>:off    <span class="number">2</span>:on    <span class="number">3</span>:on    <span class="number">4</span>:on    <span class="number">5</span>:on    <span class="number">6</span>:off</span><br></pre></td></tr></table></figure>
<h3 id="YUM客户端">YUM客户端</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line"><span class="comment">#清除老配置，rm -rf *</span></span><br><span class="line">vi http.repo</span><br><span class="line"></span><br><span class="line">[rhel6.<span class="number">3</span>]</span><br><span class="line">name=rhel6.<span class="number">3</span></span><br><span class="line">baseurl=http://<span class="number">172.28</span>.<span class="number">70.160</span>/repo</span><br><span class="line">enabled=<span class="number">1</span></span><br><span class="line">gpgcheck=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除yum配置缓存并更新</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure>
<h2 id="CentOS_6-X_YUM源">CentOS 6.X YUM源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入GPG key</span></span><br><span class="line">sudo rpm --import http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改repo文件添加CentOS 6.X的YUM源</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">cp rhel-source.repo rhel-source.repo.bak</span><br><span class="line">vi rhel-source.repo</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Base</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Updates</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Extras</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Plus</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除缓存查看是否生效</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line">yum repolist</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装yum-plugin-downloadonly插件</span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line"></span><br><span class="line"><span class="comment">#YUM只下载不安装</span></span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/puppet puppet</span><br></pre></td></tr></table></figure>
<h2 id="CentOS_7-X_YUM源">CentOS 7.X YUM源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入GPG key</span></span><br><span class="line">sudo rpm --import http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改repo文件添加CentOS 7.X的YUM源</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">cp rhel-source.repo rhel-source.repo.bak</span><br><span class="line">vi rhel-source.repo</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Base</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">7</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Updates</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">7</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Extras</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">7</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.ustc.edu.cn/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Plus</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">7</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除缓存查看是否生效</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line">yum repolist</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装yum-plugin-downloadonly插件</span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line"></span><br><span class="line"><span class="comment">#YUM只下载不安装</span></span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/pacemaker pacemaker</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[YUM是一个安装，卸载和搜索软件包的工具]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用Gogs轻松搭建可能比GitLab更好用的Git服务平台]]></title>
    <link href="http://wsgzao.github.io/post/gogs/"/>
    <id>http://wsgzao.github.io/post/gogs/</id>
    <published>2016-03-31T08:22:32.000Z</published>
    <updated>2016-03-31T09:46:22.685Z</updated>
    <content type="html"><![CDATA[<p><img src="http://static.oschina.net/uploads/space/2016/0306/021849_Gf8X_852826.png" alt=""></p>
<h2 id="前言">前言</h2><p>GitHub已经成为首选的代码托管平台，因为它又很多很棒的功能，操作简单，几乎所有的开发者都喜欢它。但是搭建GitLab过程并没有想象中的简单，利用Bitnami当然也是一种偷懒的好选择。Gogs (Go Git Service) 是一款极易搭建的自助 Git 服务，Gogs 的目标是打造一个最简单、最快速和最轻松的方式搭建自助 Git 服务。使用 Go 语言开发使得 Gogs 能够通过独立的二进制分发，并且支持 Go 语言支持的 所有平台，包括 Linux、Mac OS X、Windows 以及 ARM 平台。</p>
<blockquote>
<p>Gogs可能是比GitLab更好的选择</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年03月31日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/gogs/" target="_blank" rel="external">http://wsgzao.github.io/post/gogs/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Gogs - <a href="https://gogs.io/" target="_blank" rel="external">https://gogs.io/</a><br>GitLab - <a href="https://about.gitlab.com/" target="_blank" rel="external">https://about.gitlab.com/</a><br>Bitnami GitLab Stack - <a href="https://bitnami.com/stack/gitlab" target="_blank" rel="external">https://bitnami.com/stack/gitlab</a></p>
<h2 id="Bitnami_GitLab_Stack">Bitnami GitLab Stack</h2><blockquote>
<p>Bitnami GitLab Stack ships with the following software versions</p>
</blockquote>
<ul>
<li>GitLab 8.5.7</li>
<li>Apache 2.4.18</li>
<li>ImageMagick 6.7.5</li>
<li>PostgreSQL 9.4.6</li>
<li>Git 2.7.4</li>
<li>Ruby 2.1.8</li>
<li>Rails 4.2.5.1</li>
<li>RubyGems 1.8.12</li>
</ul>
<blockquote>
<p>Btinami GitLab Stack 安装真心简单，爽</p>
</blockquote>
<p>chmod 755 bitnami-gitlab-8.5.7-0-linux.run</p>
<p><a href="https://bitnami.com/stack/gitlab/README.txt" target="_blank" rel="external">https://bitnami.com/stack/gitlab/README.txt</a></p>
<h2 id="Gogs功能特性">Gogs功能特性</h2><ul>
<li>支持活动时间线</li>
<li>支持 SSH 以及 HTTP/HTTPS 协议</li>
<li>支持 SMTP、LDAP 和反向代理的用户认证</li>
<li>支持反向代理子路径</li>
<li>支持用户、组织和仓库管理系统</li>
<li>支持仓库和组织级别 Web 钩子（包括 Slack 集成）</li>
<li>支持仓库 Git 钩子和部署密钥</li>
<li>支持仓库工单（Issue）、合并请求（Pull Request）和 Wiki</li>
<li>支持添加和删除仓库协作者</li>
<li>支持 Gravatar 以及自定义源</li>
<li>支持邮件服务</li>
<li>支持后台管理面板</li>
<li>支持 MySQL、PostgreSQL、SQLite3 和 TiDB（实验性支持） 数据库</li>
<li>支持多语言本地化（15 种语言）</li>
</ul>
<blockquote>
<p>以GitHub作为参考比较对象</p>
</blockquote>
<table>
<thead>
<tr>
<th>特性</th>
<th>Gogs</th>
<th>Gitlab</th>
<th>Github</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dashboard &amp; File Browser</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Issue Tracking, Milestones &amp; Commit keywords</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Organizations support</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Wiki</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Code Review</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Code Snippets</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Web Hooks</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Git Hooks</td>
<td>Y</td>
<td>* Enterprise</td>
<td>* Enterprise</td>
</tr>
<tr>
<td>LDAP Login</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>LDAP Group Sync</td>
<td>N</td>
<td>* Enterprise</td>
<td>* Enterprise</td>
</tr>
<tr>
<td>Branded Login Page</td>
<td>N</td>
<td>* Enterprise</td>
<td>* Enterprise</td>
</tr>
<tr>
<td>Language</td>
<td>Go</td>
<td>Ruby</td>
<td>Ruby</td>
</tr>
<tr>
<td>Platform</td>
<td>Cross-Platform</td>
<td>Linux</td>
<td>* Virtual Machine</td>
</tr>
<tr>
<td>License</td>
<td>MIT</td>
<td>MIT</td>
<td>Proprietary</td>
</tr>
<tr>
<td>Resource Usage</td>
<td>Low</td>
<td>Medium/High</td>
<td>Medium/High</td>
</tr>
</tbody>
</table>
<h2 id="Gogs环境要求">Gogs环境要求</h2><blockquote>
<p>我以rhel6.3为例，已经属于生命周期边缘了</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装git</span></span><br><span class="line">yum install -y git </span><br><span class="line">git --version</span><br><span class="line">git version <span class="number">1.7</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#安装mysql-server</span></span><br><span class="line">yum install -y mysql-server</span><br><span class="line">mysql --version</span><br><span class="line">mysql  Ver <span class="number">14.14</span> Distrib <span class="number">5.1</span>.<span class="number">73</span>, <span class="keyword">for</span> redhat-linux-gnu (x86_64) using readline <span class="number">5.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动数据库</span></span><br><span class="line">service mysqld start</span><br><span class="line">chkconfig mysqld on</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建gogs数据库</span></span><br><span class="line"><span class="built_in">cd</span> /home/git/gogs/scripts</span><br><span class="line"><span class="comment">#mysql -u root -p &lt; mysql.sql</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment"># （输入密码，无密码直接跳过）</span></span><br><span class="line"><span class="built_in">set</span> global storage_engine = <span class="string">'InnoDB'</span>;</span><br><span class="line">create database gogs character <span class="built_in">set</span> utf8 collate utf8_bin;</span><br><span class="line">create user <span class="string">'gogs'</span>@<span class="string">'localhost'</span> identified by <span class="string">'gogs'</span>;</span><br><span class="line">grant all privileges on gogs.* to <span class="string">'gogs'</span>@<span class="string">'localhost'</span>;</span><br><span class="line">flush privileges;</span><br><span class="line"><span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure>
<h2 id="部署Gogs">部署Gogs</h2><blockquote>
<p>Gogs是一款极易搭建的自助Git服务</p>
</blockquote>
<p><a href="https://gogs.io/docs" target="_blank" rel="external">https://gogs.io/docs</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建git用户</span></span><br><span class="line">sudo adduser git</span><br><span class="line">su - git</span><br><span class="line"></span><br><span class="line"><span class="comment">#解压gogs</span></span><br><span class="line"><span class="built_in">cd</span> /home/git</span><br><span class="line">unzip gogs_v0.<span class="number">9.13</span>_linux_amd64.zip</span><br><span class="line">ls /home/git/gogs/</span><br><span class="line">gogs  LICENSE  public  README.md  README_ZH.md  scripts  templates</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动gogs</span></span><br><span class="line"><span class="built_in">cd</span> /home/git/gogs</span><br><span class="line">./gogs web</span><br><span class="line"></span><br><span class="line"><span class="number">2016</span>/<span class="number">03</span>/<span class="number">31</span> <span class="number">16</span>:<span class="number">23</span>:<span class="number">53</span> [W] Custom config <span class="string">'/home/git/gogs/custom/conf/app.ini'</span> not found, ignore this <span class="keyword">if</span> you<span class="string">'re running first time</span><br><span class="line">2016/03/31 16:23:53 [T] Custom path: /home/git/gogs/custom</span><br><span class="line">2016/03/31 16:23:53 [T] Log path: /home/git/gogs/log</span><br><span class="line">2016/03/31 16:23:53 [I] Gogs: Go Git Service 0.9.13.0318</span><br><span class="line">2016/03/31 16:23:53 [I] Log Mode: Console(Trace)</span><br><span class="line">2016/03/31 16:23:53 [I] Cache Service Enabled</span><br><span class="line">2016/03/31 16:23:53 [I] Session Service Enabled</span><br><span class="line">2016/03/31 16:23:53 [I] SQLite3 Supported</span><br><span class="line">2016/03/31 16:23:53 [I] Run Mode: Development</span><br><span class="line">2016/03/31 16:23:54 [I] Listen: http://0.0.0.0:3000</span><br><span class="line"></span><br><span class="line">#后台运行</span><br><span class="line">nohup ./gogs web &amp;</span><br><span class="line">tail -f nohup.out</span></span><br></pre></td></tr></table></figure>
<h2 id="app-ini配置文件">app.ini配置文件</h2><blockquote>
<p>注意DOMAIN和ROOT_URL这两个参数</p>
</blockquote>
<p><a href="https://gogs.io/docs/advanced/configuration_cheat_sheet" target="_blank" rel="external">https://gogs.io/docs/advanced/configuration_cheat_sheet</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首次安装可以打开浏览器完成剩余配置</span></span><br><span class="line">http://ip:<span class="number">3000</span>/install</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过修改app.ini也可以</span></span><br><span class="line">vi /home/git/gogs/custom/conf/app.ini</span><br><span class="line"></span><br><span class="line">APP_NAME = Gogs: Go Git Service</span><br><span class="line">RUN_USER = git</span><br><span class="line">RUN_MODE = prod</span><br><span class="line"></span><br><span class="line">[database]</span><br><span class="line">DB_TYPE  = mysql</span><br><span class="line">HOST     = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">3306</span></span><br><span class="line">NAME     = gogs</span><br><span class="line">USER     = gogs</span><br><span class="line">PASSWD   = gogs</span><br><span class="line">SSL_MODE = <span class="built_in">disable</span></span><br><span class="line">PATH     = data/gogs.db</span><br><span class="line"></span><br><span class="line">[repository]</span><br><span class="line">ROOT = /home/git/gogs-repositories</span><br><span class="line"></span><br><span class="line">[server]</span><br><span class="line">DOMAIN       = <span class="number">172.28</span>.<span class="number">70.134</span> </span><br><span class="line">HTTP_PORT    = <span class="number">3000</span></span><br><span class="line">ROOT_URL     = http://<span class="number">172.28</span>.<span class="number">70.134</span>:<span class="number">3000</span>/</span><br><span class="line">DISABLE_SSH  = <span class="literal">false</span></span><br><span class="line">SSH_PORT     = <span class="number">22</span></span><br><span class="line">OFFLINE_MODE = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[mailer]</span><br><span class="line">ENABLED = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[service]</span><br><span class="line">REGISTER_EMAIL_CONFIRM = <span class="literal">false</span></span><br><span class="line">ENABLE_NOTIFY_MAIL     = <span class="literal">false</span></span><br><span class="line">DISABLE_REGISTRATION   = <span class="literal">false</span></span><br><span class="line">ENABLE_CAPTCHA         = <span class="literal">true</span></span><br><span class="line">REQUIRE_SIGNIN_VIEW    = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[picture]</span><br><span class="line">DISABLE_GRAVATAR = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[session]</span><br><span class="line">PROVIDER = file</span><br><span class="line"></span><br><span class="line">[<span class="built_in">log</span>]</span><br><span class="line">MODE      = file</span><br><span class="line">LEVEL     = Info</span><br><span class="line">ROOT_PATH = /home/git/gogs/<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">[security]</span><br><span class="line">INSTALL_LOCK = <span class="literal">true</span></span><br><span class="line">SECRET_KEY   = i4B7R55aRaFdw8j</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[Gogs可能是比GitLab更好的选择]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[TCP/UDP常用端口列表]]></title>
    <link href="http://wsgzao.github.io/post/service-names-port-numbers/"/>
    <id>http://wsgzao.github.io/post/service-names-port-numbers/</id>
    <published>2016-03-30T08:22:32.000Z</published>
    <updated>2016-03-30T11:44:59.183Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>文章的表格中列举了Linux 中的服务、守护进程、和程序所使用的最常见的通信端口，该列表还可以在 /etc/services 文件中找到，更多详细信息推荐查看由互联网号码分派局（IANA）制定的“著名的已注册动态端口”官方列表。本文引用了维基百科中文版内的TCP/UDP端口列表，颜色和标签很清晰，感谢维护者们的更新。最后还是提醒大家开发程序时记得提前查阅一下端口是否和已经定义的存在冲突，能避免尽量不要选择共用相同的端口，为后期IP+PORT方式定位应用铺平道路。</p>
<blockquote>
<p>熟悉常用的TCP/UDP端口很有必要</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年03月30日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/service-names-port-numbers/" target="_blank" rel="external">http://wsgzao.github.io/post/service-names-port-numbers/</a></p>
<p><strong>扩展阅读</strong></p>
<p>TCP/UDP端口列表 - <a href="https://zh.wikipedia.org/wiki/TCP/UDP端口列表" target="_blank" rel="external">https://zh.wikipedia.org/wiki/TCP/UDP端口列表</a><br>Service Name and Transport Protocol Port Number Registry - <a href="http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml" target="_blank" rel="external">http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml</a></p>
<h2 id="服务器常用端口">服务器常用端口</h2><table>
<thead>
<tr>
<th>端口</th>
<th>服务</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>21</td>
<td>FTP</td>
<td>FTP服务器所开放的端口，用于上传、下载</td>
</tr>
<tr>
<td>22</td>
<td>SSH</td>
<td>22端口就是ssh端口，用于通过命令行模式远程连接Linux系统服务器</td>
</tr>
<tr>
<td>25</td>
<td>SMTP</td>
<td>SMTP服务器所开放的端口，用于发送邮件</td>
</tr>
<tr>
<td>80</td>
<td>HTTP</td>
<td>用于网站服务例如IIS、Apache、Nginx等提供对外访问</td>
</tr>
<tr>
<td>110</td>
<td>POP3</td>
<td>110端口是为POP3（邮件协议3）服务开放的</td>
</tr>
<tr>
<td>137/138/139</td>
<td>NETBIOS</td>
<td>其中137、138是UDP端口，当通过网上邻居传输文件时用这个端口。而139端口：通过这个端口进入的连接试图获得NetBIOS/SMB服务。这个协议被用于windows文件和打印机共享和SAMBA</td>
</tr>
<tr>
<td>143</td>
<td>IMAP</td>
<td>143端口主要是用于“Internet Message AccessProtocol”v2（Internet消息访问协议，简称IMAP），和POP3一样，是用于电子邮件的接收的协议</td>
</tr>
<tr>
<td>443</td>
<td>HTTPS</td>
<td>网页浏览端口，能提供加密和通过安全端口传输的另一种HTTP</td>
</tr>
<tr>
<td>1433</td>
<td>SQL Server</td>
<td>1433端口，是SQL Server默认的端口，SQL Server服务使用两个端口：TCP-1433、UDP-1434。其中1433用于供SQL Server对外提供服务，1434用于向请求者返回SQL Server使用了哪个TCP/IP端口</td>
</tr>
<tr>
<td>3306</td>
<td>MySQL</td>
<td>3306端口，是MySQL数据库的默认端口，用于MySQL对外提供服务</td>
</tr>
<tr>
<td>3389</td>
<td>Windows Server Remote Desktop Services</td>
<td>3389端口是Windows远程桌面的服务端口，可以通过这个端口，用”远程桌面”等连接工具来连接到远程的服务器</td>
</tr>
<tr>
<td>8080</td>
<td>代理端口</td>
<td>8080端口同80端口，是被用于WWW代理服务的，可以实现网页浏览，经常在访问某个网站或使用代理服务器的时候，会加上“:8080”端口号。另外Apache Tomcat web server安装后，默认的服务端口就是8080</td>
</tr>
</tbody>
</table>
<h2 id="TCP/UDP端口列表">TCP/UDP端口列表</h2><p>IANA的端口分配列表 - <a href="http://www.iana.org/assignments/port-numbers" target="_blank" rel="external">http://www.iana.org/assignments/port-numbers</a></p>
<blockquote>
<p>以下列表仅列出常用端口，详细的列表请参阅IANA网站</p>
</blockquote>
<table>
<thead>
<tr>
<th>端口</th>
<th>描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>0/TCP,UDP</td>
<td>保留端口；不使用（若发送过程不准备接受回复消息，则可以作为源端口）</td>
</tr>
<tr>
<td>1/TCP,UDP</td>
<td>TCPMUX（传输控制协议端口服务多路开关选择器）</td>
</tr>
<tr>
<td>5/TCP,UDP</td>
<td>RJE（远程作业登录）</td>
</tr>
<tr>
<td>7/TCP,UDP</td>
<td>ECHO（回显）协议</td>
</tr>
<tr>
<td>9/TCP,UDP</td>
<td>DISCARD（丢弃）协议</td>
</tr>
<tr>
<td>11/TCP,UDP</td>
<td>SYSTAT协议</td>
</tr>
<tr>
<td>13/TCP,UDP</td>
<td>DAYTIME协议</td>
</tr>
<tr>
<td>15/TCP,UDP</td>
<td>NETSTAT协议</td>
</tr>
<tr>
<td>17/TCP,UDP</td>
<td>QOTD（Quote of the Day，每日引用）协议</td>
</tr>
<tr>
<td>18/TCP,UDP</td>
<td>消息发送协议</td>
</tr>
<tr>
<td>19/TCP,UDP</td>
<td>CHARGEN（字符发生器）协议</td>
</tr>
<tr>
<td>20/TCP,UDP</td>
<td>文件传输协议 - 默认数据端口</td>
</tr>
<tr>
<td>21/TCP,UDP</td>
<td>文件传输协议 - 控制端口</td>
</tr>
<tr>
<td>22/TCP,UDP</td>
<td>SSH（Secure Shell） - 远程登录协议，用于安全登录文件传输（SCP，SFTP）及端口重新定向</td>
</tr>
<tr>
<td>23/TCP,UDP</td>
<td>Telnet终端仿真协议 - 未加密文本通信</td>
</tr>
<tr>
<td>25/TCP,UDP</td>
<td>SMTP（简单邮件传输协议） - 用于邮件服务器间的电子邮件传递</td>
</tr>
<tr>
<td>26/TCP,UDP</td>
<td>RSFTP - 一个简单的类似FTP的协议</td>
</tr>
<tr>
<td>35/TCP,UDP</td>
<td>QMS Magicolor 2 printer</td>
</tr>
<tr>
<td>37/TCP,UDP</td>
<td>TIME时间协议</td>
</tr>
<tr>
<td>39/TCP,UDP</td>
<td>Resource Location Protocol（资源定位协议）</td>
</tr>
<tr>
<td>41/TCP,UDP</td>
<td>图形</td>
</tr>
<tr>
<td>42/TCP,UDP</td>
<td>Host Name Server（主机名服务）</td>
</tr>
<tr>
<td>42/TCP,UDP</td>
<td>WINS（WINS主机名服务）</td>
</tr>
<tr>
<td>43/TCP</td>
<td>WHOIS协议</td>
</tr>
<tr>
<td>49/TCP,UDP</td>
<td>TACACS登录主机协议</td>
</tr>
<tr>
<td>53/TCP,UDP</td>
<td>DNS（域名服务系统）</td>
</tr>
<tr>
<td>56/TCP,UDP</td>
<td>远程访问协议</td>
</tr>
<tr>
<td>57/TCP</td>
<td>MTP，邮件传输协议</td>
</tr>
<tr>
<td>67/UDP</td>
<td>BOOTP（BootStrap协议）服务；同时用于动态主机设置协议</td>
</tr>
<tr>
<td>68/UDP</td>
<td>BOOTP客户端；同时用于动态主机设定协议</td>
</tr>
<tr>
<td>69/UDP</td>
<td>TFTP（小型文件传输协议）</td>
</tr>
<tr>
<td>70/TCP</td>
<td>Gopher信息检索协议</td>
</tr>
<tr>
<td>79/TCP</td>
<td>Finger协议</td>
</tr>
<tr>
<td>80/TCP</td>
<td>HTTP（超文本传输协议）- 用于传输网页</td>
</tr>
<tr>
<td>81/TCP</td>
<td>HTTP预备 (超文本传输协议)</td>
</tr>
<tr>
<td>81/TCP</td>
<td>Torpark - Onion routing ORport</td>
</tr>
<tr>
<td>82/UDP</td>
<td>Torpark - 控制端口</td>
</tr>
<tr>
<td>88/TCP</td>
<td>Kerberos - 认证代理</td>
</tr>
<tr>
<td>101/TCP</td>
<td>主机名</td>
</tr>
<tr>
<td>102/TCP</td>
<td>ISO-TSAP协议</td>
</tr>
<tr>
<td>107/TCP</td>
<td>远程Telnet协议</td>
</tr>
<tr>
<td>109/TCP</td>
<td>POP (Post Office Protocol)，“邮局协议”，第2版</td>
</tr>
<tr>
<td>110/TCP</td>
<td>POP3（“邮局协议”，第3版）- 用于接收电子邮件</td>
</tr>
<tr>
<td>111/TCP,UDP</td>
<td>Sun协议</td>
</tr>
<tr>
<td>113/TCP</td>
<td>ident - 旧的服务器身份识别系统，仍然被IRC服务器用来认证它的用户</td>
</tr>
<tr>
<td>115/TCP</td>
<td>SFTP,简单文件传输协议</td>
</tr>
<tr>
<td>117/TCP</td>
<td>UUCP-PATH</td>
</tr>
<tr>
<td>118/TCP,UDP</td>
<td>SQL服务</td>
</tr>
<tr>
<td>119/TCP</td>
<td>网络新闻传输协议 - 用来收取新闻组的消息</td>
</tr>
<tr>
<td>123/UDP</td>
<td>NTP（Network Time Protocol） - 用于时间同步</td>
</tr>
<tr>
<td>135/TCP,UDP</td>
<td>EPMAP (End Point Mapper) / Microsoft RPC Locator Service</td>
</tr>
<tr>
<td>137/TCP,UDP</td>
<td>NetBIOS NetBIOS Name Service</td>
</tr>
<tr>
<td>138/TCP,UDP</td>
<td>NetBIOS NetBIOS Datagram Service</td>
</tr>
<tr>
<td>139/TCP,UDP</td>
<td>NetBIOS NetBIOS Session Service</td>
</tr>
<tr>
<td>143/TCP,UDP</td>
<td>IMAP4（Internet Message Access Protocol 4） - used for retrieving E-mails</td>
</tr>
<tr>
<td>152/TCP,UDP</td>
<td>BFTP, Background File Transfer Program</td>
</tr>
<tr>
<td>153/TCP,UDP</td>
<td>SGMP, Simple Gateway Monitoring Protocol</td>
</tr>
<tr>
<td>156/TCP,UDP</td>
<td>SQL服务</td>
</tr>
<tr>
<td>158/TCP,UDP</td>
<td>DMSP, Distributed Mail Service Protocol</td>
</tr>
<tr>
<td>161/TCP,UDP</td>
<td>SNMP (Simple Network Management Protocol)</td>
</tr>
<tr>
<td>162/TCP,UDP</td>
<td>SNMPTRAP</td>
</tr>
<tr>
<td>170/TCP</td>
<td>Print-srv</td>
</tr>
<tr>
<td>179/TCP</td>
<td>BGP (Border Gateway Protocol)</td>
</tr>
<tr>
<td>194/TCP</td>
<td>IRC（互联网中继聊天）</td>
</tr>
<tr>
<td>201/TCP,UDP</td>
<td>AppleTalk Routing Maintenance</td>
</tr>
<tr>
<td>209/TCP,UDP</td>
<td>Quick Mail传输协议</td>
</tr>
<tr>
<td>213/TCP,UDP</td>
<td>IPX</td>
</tr>
<tr>
<td>218/TCP,UDP</td>
<td>MPP，信息发布协议</td>
</tr>
<tr>
<td>220/TCP,UDP</td>
<td>IMAP，交互邮件访问协议第3版</td>
</tr>
<tr>
<td>259/TCP,UDP</td>
<td>ESRO, Efficient Short Remote Operations</td>
</tr>
<tr>
<td>264/TCP,UDP</td>
<td>BGMP，Border Gateway Multicast Protocol</td>
</tr>
<tr>
<td>308/TCP</td>
<td>Novastor Online Backup</td>
</tr>
<tr>
<td>311/TCP</td>
<td>Apple Server-Admin-Tool, Workgroup-Manager-Tool</td>
</tr>
<tr>
<td>318/TCP,UDP</td>
<td>TSP，时间戳协议（英语：Time Stamp Protocol）</td>
</tr>
<tr>
<td>323/TCP,UDP</td>
<td>IMMP, Internet Message Mapping Protocol</td>
</tr>
<tr>
<td>383/TCP,UDP</td>
<td>HP OpenView HTTPs Operations Agent</td>
</tr>
<tr>
<td>366/TCP,UDP</td>
<td>SMTP, Simple Mail Transfer Protocol. ODMR, On-Demand Mail Relay</td>
</tr>
<tr>
<td>369/TCP,UDP</td>
<td>Rpc2portmap</td>
</tr>
<tr>
<td>371/TCP,UDP</td>
<td>ClearCase albd</td>
</tr>
<tr>
<td>384/TCP,UDP</td>
<td>一个远程网络服务器系统</td>
</tr>
<tr>
<td>387/TCP,UDP</td>
<td>AURP, AppleTalk Update-based Routing Protocol</td>
</tr>
<tr>
<td>389/TCP,UDP</td>
<td>轻型目录访问协议</td>
</tr>
<tr>
<td>401/TCP,UDP</td>
<td>UPS Uninterruptible Power Supply</td>
</tr>
<tr>
<td>411/TCP</td>
<td>Direct Connect Hub port</td>
</tr>
<tr>
<td>412/TCP</td>
<td>Direct Connect Client-To-Client port</td>
</tr>
<tr>
<td>427/TCP,UDP</td>
<td>SLP (Service Location Protocol)</td>
</tr>
<tr>
<td>443/TCP</td>
<td>HTTPS - HTTP over TLS/SSL（加密传输）</td>
</tr>
<tr>
<td>444/TCP,UDP</td>
<td>SNPP，Simple Network Paging Protocol</td>
</tr>
<tr>
<td>445/TCP</td>
<td>Microsoft-DS (Active Directory，Windows shares, Sasser worm，Agobot, Zobotworm)</td>
</tr>
<tr>
<td>445/UDP</td>
<td>Microsoft-DS SMB file sharing</td>
</tr>
<tr>
<td>464/TCP,UDP</td>
<td>Kerberos Change/Set password</td>
</tr>
<tr>
<td>465/TCP</td>
<td>Cisco protocol</td>
</tr>
<tr>
<td>465/TCP</td>
<td>SMTP over SSL</td>
</tr>
<tr>
<td>475/TCP</td>
<td>tcpnethaspsrv（Hasp services, TCP/IP version）</td>
</tr>
<tr>
<td>497/TCP</td>
<td>dantz backup service</td>
</tr>
<tr>
<td>500/TCP,UDP</td>
<td>ISAKMP，IKE-Internet Key Exchange</td>
</tr>
<tr>
<td>502/TCP,UDP</td>
<td>Modbus，Protocol</td>
</tr>
<tr>
<td>512/TCP</td>
<td>exec, Remote Process Execution</td>
</tr>
<tr>
<td>512/UDP</td>
<td>comsat, together with biff：notifies users of new c.q. yet unread e-mail</td>
</tr>
<tr>
<td>513/TCP</td>
<td>登陆</td>
</tr>
<tr>
<td>513/UDP</td>
<td>Who</td>
</tr>
<tr>
<td>514/TCP</td>
<td>rsh protocol - used to execute non-interactive commandline commands on a remote system and see the screen return</td>
</tr>
<tr>
<td>514/UDP</td>
<td>syslog protocol - used for system logging</td>
</tr>
<tr>
<td>515/TCP</td>
<td>Line Printer Daemon protocol - used in LPD printer servers</td>
</tr>
<tr>
<td>517/UDP</td>
<td>Talk</td>
</tr>
<tr>
<td>518/UDP</td>
<td>NTalk</td>
</tr>
<tr>
<td>520/TCP</td>
<td>efs</td>
</tr>
<tr>
<td>520/UDP</td>
<td>Routing - RIP</td>
</tr>
<tr>
<td>513/UDP</td>
<td>Router</td>
</tr>
<tr>
<td>524/TCP,UDP</td>
<td>NCP（NetWare Core Protocol）is used for a variety things such as access to primary NetWare server resources, Time Synchronization, etc.</td>
</tr>
<tr>
<td>525/UDP</td>
<td>Timed，Timeserver</td>
</tr>
<tr>
<td>530/TCP,UDP</td>
<td>远程过程调用</td>
</tr>
<tr>
<td>531/TCP,UDP</td>
<td>AOL Instant Messenger, IRC</td>
</tr>
<tr>
<td>532/TCP</td>
<td>netnews</td>
</tr>
<tr>
<td>533/UDP</td>
<td>netwall, For Emergency Broadcasts</td>
</tr>
<tr>
<td>540/TCP</td>
<td>UUCP (Unix-to-Unix Copy Protocol)</td>
</tr>
<tr>
<td>542/TCP,UDP</td>
<td>commerce (Commerce Applications)</td>
</tr>
<tr>
<td>543/TCP</td>
<td>klogin, Kerberos login</td>
</tr>
<tr>
<td>544/TCP</td>
<td>kshell, Kerberos Remote shell</td>
</tr>
<tr>
<td>546/TCP,UDP</td>
<td>DHCPv6客户端</td>
</tr>
<tr>
<td>547/TCP,UDP</td>
<td>DHCPv6服务器</td>
</tr>
<tr>
<td>548/TCP</td>
<td>AFP (Apple Filing Protocol)</td>
</tr>
<tr>
<td>550/UDP</td>
<td>new-rwho, new-who</td>
</tr>
<tr>
<td>554/TCP,UDP</td>
<td>RTSP (Real Time Streaming Protocol)</td>
</tr>
<tr>
<td>556/TCP</td>
<td>Remotefs, rfs, rfs_server</td>
</tr>
<tr>
<td>560/UDP</td>
<td>rmonitor, Remote Monitor</td>
</tr>
<tr>
<td>561/UDP</td>
<td>monitor</td>
</tr>
<tr>
<td>563/TCP,UDP</td>
<td>NNTP protocol over TLS/SSL (NNTPS)</td>
</tr>
<tr>
<td>587/TCP</td>
<td>email message submission（SMTP，RFC 2476）</td>
</tr>
<tr>
<td>591/TCP</td>
<td>FileMaker 6.0（及之后版本）网络共享（HTTP的替代，见80端口）</td>
</tr>
<tr>
<td>593/TCP,UDP</td>
<td>HTTP RPC Ep Map（RPC over HTTP, often used by DCOM services and Microsoft Exchange Server）</td>
</tr>
<tr>
<td>604/TCP</td>
<td>TUNNEL</td>
</tr>
<tr>
<td>631/TCP,UDP</td>
<td>互联网列印协定</td>
</tr>
<tr>
<td>636/TCP,UDP</td>
<td>LDAP over SSL（加密传输，也被称为LDAPS）</td>
</tr>
<tr>
<td>639/TCP,UDP</td>
<td>MSDP, Multicast Source Discovery Protocol</td>
</tr>
<tr>
<td>646/TCP</td>
<td>LDP, Label Distribution Protocol</td>
</tr>
<tr>
<td>647/TCP</td>
<td>DHCP Failover Protocol</td>
</tr>
<tr>
<td>648/TCP</td>
<td>RRP, Registry Registrar Protocol</td>
</tr>
<tr>
<td>652/TCP</td>
<td>DTCP, Dynamic Tunnel Configuration Protocol</td>
</tr>
<tr>
<td>654/UDP</td>
<td>AODV, Ad hoc On-Demand Distance Vector</td>
</tr>
<tr>
<td>665/TCP</td>
<td>sun-dr, Remote Dynamic Reconfiguration</td>
</tr>
<tr>
<td>666/UDP</td>
<td>毁灭战士，电脑平台上的一系列第一人称射击游戏。</td>
</tr>
<tr>
<td>674/TCP</td>
<td>ACAP, Application Configuration Access Protocol</td>
</tr>
<tr>
<td>691/TCP</td>
<td>MS Exchange Routing</td>
</tr>
<tr>
<td>692/TCP</td>
<td>Hyperwave-ISP</td>
</tr>
<tr>
<td>694/UDP</td>
<td>Linux-HA High availability Heartbeat port</td>
</tr>
<tr>
<td>695/TCP</td>
<td>IEEE-MMS-SSL</td>
</tr>
<tr>
<td>698/UDP</td>
<td>OLSR, Optimized Link State Routing</td>
</tr>
<tr>
<td>699/TCP</td>
<td>Access Network</td>
</tr>
<tr>
<td>700/TCP</td>
<td>EPP, Extensible Provisioning Protocol</td>
</tr>
<tr>
<td>701/TCP</td>
<td>LMP, Link Management Protocol.</td>
</tr>
<tr>
<td>702/TCP</td>
<td>IRIS over BEEP</td>
</tr>
<tr>
<td>706/TCP</td>
<td>SILC, Secure Internet Live Conferencing</td>
</tr>
<tr>
<td>711/TCP</td>
<td>TDP, Tag Distribution Protocol</td>
</tr>
<tr>
<td>712/TCP</td>
<td>TBRPF, Topology Broadcast based on Reverse-Path Forwarding</td>
</tr>
<tr>
<td>720/TCP</td>
<td>SMQP, Simple Message Queue Protocol</td>
</tr>
<tr>
<td>749/TCP, UDP</td>
<td>kerberos-adm, Kerberos administration</td>
</tr>
<tr>
<td>750/UDP</td>
<td>Kerberos version IV</td>
</tr>
<tr>
<td>782/TCP</td>
<td>Conserver serial-console management server</td>
</tr>
<tr>
<td>829/TCP</td>
<td>CMP (Certificate Management Protocol)</td>
</tr>
<tr>
<td>860/TCP</td>
<td>iSCSI</td>
</tr>
<tr>
<td>873/TCP</td>
<td>rsync File synchronisation protocol</td>
</tr>
<tr>
<td>901/TCP</td>
<td>Samba Web Administration Tool (SWAT)</td>
</tr>
<tr>
<td>902</td>
<td>VMware服务器控制台[2]</td>
</tr>
<tr>
<td>904</td>
<td>VMware服务器替代（如果902端口已被占用）</td>
</tr>
<tr>
<td>911/TCP</td>
<td>Network Console on Acid（NCA） - local tty redirection over OpenSSH</td>
</tr>
<tr>
<td>981/TCP</td>
<td>SofaWare Technologies Remote HTTPS management for firewall devices running embedded Checkpoint Firewall-1 software</td>
</tr>
<tr>
<td>989/TCP,UDP</td>
<td>FTP Protocol (data) over TLS/SSL</td>
</tr>
<tr>
<td>990/TCP,UDP</td>
<td>FTP Protocol (control) over TLS/SSL</td>
</tr>
<tr>
<td>991/TCP,UDP</td>
<td>NAS (Netnews Admin System)</td>
</tr>
<tr>
<td>992/TCP,UDP</td>
<td>Telnet protocol over TLS/SSL</td>
</tr>
<tr>
<td>993/TCP</td>
<td>IMAP4 over SSL (encrypted transmission)</td>
</tr>
<tr>
<td>995/TCP</td>
<td>POP3 over SSL (encrypted transmission)</td>
</tr>
<tr>
<td>1025/tcp</td>
<td>NFS-or-IIS</td>
</tr>
<tr>
<td>1026/tcp</td>
<td>Often utilized by Microsoft DCOM services</td>
</tr>
<tr>
<td>1029/tcp</td>
<td>Often utilized by Microsoft DCOM services</td>
</tr>
<tr>
<td>1058/tcp</td>
<td>nim AIX Network Installation Manager</td>
</tr>
<tr>
<td>1059/tcp</td>
<td>nimreg</td>
</tr>
<tr>
<td>1080/tcp</td>
<td>SOCKS proxy</td>
</tr>
<tr>
<td>1099/tcp</td>
<td>RMI Registry</td>
</tr>
<tr>
<td>1099/udp</td>
<td>RMI Registry</td>
</tr>
<tr>
<td>1109/tcp</td>
<td>Kerberos POP</td>
</tr>
<tr>
<td>1140/tcp</td>
<td>AutoNOC</td>
</tr>
<tr>
<td>1167/udp</td>
<td>phone, conference calling</td>
</tr>
<tr>
<td>1176/tcp</td>
<td>Perceptive Automation Indigo home control server</td>
</tr>
<tr>
<td>1182/tcp,udp</td>
<td>AcceleNet</td>
</tr>
<tr>
<td>1194/udp</td>
<td>OpenVPN</td>
</tr>
<tr>
<td>1198/tcp,udp</td>
<td>The cajo project Free dynamic transparent distributed computing in Java</td>
</tr>
<tr>
<td>1200/udp</td>
<td>Steam Friends Applet</td>
</tr>
<tr>
<td>1214/tcp</td>
<td>Kazaa</td>
</tr>
<tr>
<td>1223/tcp,udp</td>
<td>TGP: “TrulyGlobal Protocol” aka “The Gur Protocol”</td>
</tr>
<tr>
<td>1241/tcp,udp</td>
<td>Nessus Security Scanner</td>
</tr>
<tr>
<td>1248/tcp</td>
<td>NSClient/NSClient++/NC_Net (Nagios)</td>
</tr>
<tr>
<td>1270/tcp,udp</td>
<td>Microsoft Operations Manager 2005 agent (MOM 2005)</td>
</tr>
<tr>
<td>1311/tcp</td>
<td>Dell Open Manage Https Port</td>
</tr>
<tr>
<td>1313/tcp</td>
<td>Xbiim (Canvii server) Port</td>
</tr>
<tr>
<td>1337/tcp</td>
<td>WASTE Encrypted File Sharing Program</td>
</tr>
<tr>
<td>1352/tcp</td>
<td>IBM Lotus Notes/Domino RPC</td>
</tr>
<tr>
<td>1387/tcp</td>
<td>Computer Aided Design Software Inc LM (cadsi-lm )</td>
</tr>
<tr>
<td>1387/udp</td>
<td>Computer Aided Design Software Inc LM (cadsi-lm )</td>
</tr>
<tr>
<td>1414/tcp</td>
<td>IBM MQSeries</td>
</tr>
<tr>
<td>1431/tcp</td>
<td>RGTP</td>
</tr>
<tr>
<td>1433/tcp,udp</td>
<td>Microsoft SQL database system</td>
</tr>
<tr>
<td>1434/tcp,udp</td>
<td>Microsoft SQL Monitor</td>
</tr>
<tr>
<td>1494/tcp</td>
<td>Citrix Presentation Server ICA Client</td>
</tr>
<tr>
<td>1512/tcp,udp</td>
<td>WINS</td>
</tr>
<tr>
<td>1521/tcp</td>
<td>nCube License Manager</td>
</tr>
<tr>
<td>1521/tcp</td>
<td>Oracle database default listener, in future releases official port 2483</td>
</tr>
<tr>
<td>1524/tcp,udp</td>
<td>ingreslock, ingres</td>
</tr>
<tr>
<td>1526/tcp</td>
<td>Oracle database common alternative for listener</td>
</tr>
<tr>
<td>1533/tcp</td>
<td>IBM Sametime IM - Virtual Places Chat</td>
</tr>
<tr>
<td>1547/tcp</td>
<td>Laplink</td>
</tr>
<tr>
<td>1547/udp</td>
<td>Laplink</td>
</tr>
<tr>
<td>1550</td>
<td>Gadu-Gadu (Direct Client-to-Client)</td>
</tr>
<tr>
<td>1581/udp</td>
<td>MIL STD 2045-47001 VMF</td>
</tr>
<tr>
<td>1589/udp</td>
<td>Cisco VQP (VLAN Query Protocol) / VMPS</td>
</tr>
<tr>
<td>1627</td>
<td>iSketch</td>
</tr>
<tr>
<td>1677/tcp</td>
<td>Novell GroupWise clients in client/server access mode</td>
</tr>
<tr>
<td>1701/udp</td>
<td>l2tp, Layer 2 Tunnelling protocol</td>
</tr>
<tr>
<td>1716/tcp</td>
<td>America’s Army MMORPG Default Game Port</td>
</tr>
<tr>
<td>1723/tcp</td>
<td>Microsoft PPTP VPN</td>
</tr>
<tr>
<td>1723/udp</td>
<td>Microsoft PPTP VPN</td>
</tr>
<tr>
<td>1725/udp</td>
<td>Valve Steam Client</td>
</tr>
<tr>
<td>1755/tcp</td>
<td>Microsoft Media Services (MMS, ms-streaming)</td>
</tr>
<tr>
<td>1755/udp</td>
<td>Microsoft Media Services (MMS, ms-streaming)</td>
</tr>
<tr>
<td>1761/tcp,udp</td>
<td>cft-0</td>
</tr>
<tr>
<td>1761/tcp</td>
<td>Novell Zenworks Remote Control utility</td>
</tr>
<tr>
<td>1762-1768/tcp,udp</td>
<td>cft-1 to cft-7</td>
</tr>
<tr>
<td>1812/udp</td>
<td>radius, RADIUS authentication protocol</td>
</tr>
<tr>
<td>1813/udp</td>
<td>radacct, RADIUS accounting protocol</td>
</tr>
<tr>
<td>1863/tcp</td>
<td>Windows Live Messenger, MSN</td>
</tr>
<tr>
<td>1900/udp</td>
<td>Microsoft SSDP Enables discovery of UPnP devices</td>
</tr>
<tr>
<td>1935/tcp</td>
<td>Real Time Messaging Protocol (RTMP) raw protocol</td>
</tr>
<tr>
<td>1970/tcp,udp</td>
<td>Danware Data NetOp Remote Control</td>
</tr>
<tr>
<td>1971/tcp,udp</td>
<td>Danware Data NetOp School</td>
</tr>
<tr>
<td>1972/tcp,udp</td>
<td>InterSystems Caché</td>
</tr>
<tr>
<td>1975-77/udp</td>
<td>Cisco TCO (Documentation)</td>
</tr>
<tr>
<td>1984/tcp</td>
<td>Big Brother - network monitoring tool</td>
</tr>
<tr>
<td>1985/udp</td>
<td>Cisco HSRP</td>
</tr>
<tr>
<td>1994/TCP</td>
<td>STUN-SDLC protocol for tunneling</td>
</tr>
<tr>
<td>1998/tcp</td>
<td>Cisco X.25 service (XOT)</td>
</tr>
<tr>
<td>2000/udp</td>
<td>Cisco SCCP (Skinny)</td>
</tr>
<tr>
<td>2000/tcp</td>
<td>Cisco SCCP (Skinny)</td>
</tr>
<tr>
<td>2002/tcp</td>
<td>Cisco Secure Access Control Server (ACS) for Windows</td>
</tr>
<tr>
<td>2030</td>
<td>Oracle Services for Microsoft Transaction Server</td>
</tr>
<tr>
<td>2031/tcp</td>
<td>mobrien-chat - Mike O’Brien November 2004</td>
</tr>
<tr>
<td>2031/udp</td>
<td>mobrien-chat - Mike O’Brien November 2004</td>
</tr>
<tr>
<td>2049/udp</td>
<td>nfs, NFS Server</td>
</tr>
<tr>
<td>2049/udp</td>
<td>shilp</td>
</tr>
<tr>
<td>2053/tcp</td>
<td>knetd, Kerberos de-multiplexor</td>
</tr>
<tr>
<td>2056/udp</td>
<td>Civilization 4 multiplayer</td>
</tr>
<tr>
<td>2073/tcp</td>
<td>DataReel Database</td>
</tr>
<tr>
<td>2073/udp</td>
<td>DataReel Database</td>
</tr>
<tr>
<td>2074/tcp</td>
<td>Vertel VMF SA (i.e. App.. SpeakFreely)</td>
</tr>
<tr>
<td>2074/udp</td>
<td>Vertel VMF SA (i.e. App.. SpeakFreely)</td>
</tr>
<tr>
<td>2082/tcp</td>
<td>Infowave Mobility Server</td>
</tr>
<tr>
<td>2082/tcp</td>
<td>CPanel, default port</td>
</tr>
<tr>
<td>2083/tcp</td>
<td>Secure Radius Service (radsec)</td>
</tr>
<tr>
<td>2083/tcp</td>
<td>CPanel default SSL port</td>
</tr>
<tr>
<td>2086/tcp</td>
<td>GNUnet</td>
</tr>
<tr>
<td>2086/tcp</td>
<td>WebHost Manager default port</td>
</tr>
<tr>
<td>2087/tcp</td>
<td>WebHost Manager default SSL port</td>
</tr>
<tr>
<td>2095/tcp</td>
<td>CPanel default webmail port</td>
</tr>
<tr>
<td>2096/tcp</td>
<td>CPanel default SSL webmail port</td>
</tr>
<tr>
<td>2161/tcp</td>
<td>?-APC Agent</td>
</tr>
<tr>
<td>2181/tcp</td>
<td>EForward-document transport system</td>
</tr>
<tr>
<td>2181/udp</td>
<td>EForward-document transport system</td>
</tr>
<tr>
<td>2200/tcp</td>
<td>Tuxanci game server</td>
</tr>
<tr>
<td>2219/tcp</td>
<td>NetIQ NCAP Protocol</td>
</tr>
<tr>
<td>2219/udp</td>
<td>NetIQ NCAP Protocol</td>
</tr>
<tr>
<td>2220/tcp</td>
<td>NetIQ End2End</td>
</tr>
<tr>
<td>2220/udp</td>
<td>NetIQ End2End</td>
</tr>
<tr>
<td>2222/tcp</td>
<td>DirectAdmin’s default port</td>
</tr>
<tr>
<td>2222/udp</td>
<td>Microsoft Office OS X antipiracy network monitor [1]</td>
</tr>
<tr>
<td>2301/tcp</td>
<td>HP System Management Redirect to port 2381</td>
</tr>
<tr>
<td>2302/udp</td>
<td>ArmA multiplayer (default for game)</td>
</tr>
<tr>
<td>2302/udp</td>
<td>Halo: Combat Evolved multiplayer</td>
</tr>
<tr>
<td>2303/udp</td>
<td>ArmA multiplayer (default for server reporting) (default port for game +1)</td>
</tr>
<tr>
<td>2305/udp</td>
<td>ArmA multiplayer (default for VoN) (default port for game +3)</td>
</tr>
<tr>
<td>2369/tcp</td>
<td>Default port for BMC Software CONTROL-M/Server - Configuration Agent port number - though often changed during installation</td>
</tr>
<tr>
<td>2370/tcp</td>
<td>Default port for BMC Software CONTROL-M/Server - Port utilized to allow the CONTROL-M/Enterprise Manager to connect to the CONTROL-M/Server - though often changed during installation</td>
</tr>
<tr>
<td>2381/tcp</td>
<td>HP Insight Manager default port for webserver</td>
</tr>
<tr>
<td>2404/tcp</td>
<td>IEC 60870-5-104</td>
</tr>
<tr>
<td>2427/udp</td>
<td>Cisco MGCP</td>
</tr>
<tr>
<td>2447/tcp</td>
<td>ovwdb - OpenView Network Node Manager (NNM) daemon</td>
</tr>
<tr>
<td>2447/udp</td>
<td>ovwdb - OpenView Network Node Manager (NNM) daemon</td>
</tr>
<tr>
<td>2483/tcp,udp</td>
<td>Oracle database listening port for unsecure client connections to the listener, replaces port 1521</td>
</tr>
<tr>
<td>2484/tcp,udp</td>
<td>Oracle database listening port for SSL client connections to the listener</td>
</tr>
<tr>
<td>2546/tcp,udp</td>
<td>Vytal Vault - Data Protection Services</td>
</tr>
<tr>
<td>2593/tcp,udp</td>
<td>RunUO - Ultima Online server</td>
</tr>
<tr>
<td>2598/tcp</td>
<td>new ICA - when Session Reliability is enabled, TCP port 2598 replaces port 1494</td>
</tr>
<tr>
<td>2612/tcp,udp</td>
<td>QPasa from MQSoftware</td>
</tr>
<tr>
<td>2710/tcp</td>
<td>XBT Bittorrent Tracker</td>
</tr>
<tr>
<td>2710/udp</td>
<td>XBT Bittorrent Tracker experimental UDP tracker extension</td>
</tr>
<tr>
<td>2710/tcp</td>
<td>Knuddels.de</td>
</tr>
<tr>
<td>2735/tcp</td>
<td>NetIQ Monitor Console</td>
</tr>
<tr>
<td>2735/udp</td>
<td>NetIQ Monitor Console</td>
</tr>
<tr>
<td>2809/tcp</td>
<td>corbaloc:iiop URL, per the CORBA 3.0.3 specification.</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>Also used by IBM WebSphere Application Server Node Agent</td>
</tr>
<tr>
<td>2809/udp</td>
<td>corbaloc:iiop URL, per the CORBA 3.0.3 specification.</td>
</tr>
<tr>
<td>2944/udp</td>
<td>Megaco Text H.248</td>
</tr>
<tr>
<td>2945/udp</td>
<td>Megaco Binary (ASN.1) H.248</td>
</tr>
<tr>
<td>2948/tcp</td>
<td>WAP-push Multimedia Messaging Service (MMS)</td>
</tr>
<tr>
<td>2948/udp</td>
<td>WAP-push Multimedia Messaging Service (MMS)</td>
</tr>
<tr>
<td>2949/tcp</td>
<td>WAP-pushsecure Multimedia Messaging Service (MMS)</td>
</tr>
<tr>
<td>2949/udp</td>
<td>WAP-pushsecure Multimedia Messaging Service (MMS)</td>
</tr>
<tr>
<td>2967/tcp</td>
<td>Symantec AntiVirus Corporate Edition</td>
</tr>
<tr>
<td>3000/tcp</td>
<td>Miralix License server</td>
</tr>
<tr>
<td>3000/udp</td>
<td>Distributed Interactive Simulation (DIS), modifiable default port</td>
</tr>
<tr>
<td>3001/tcp</td>
<td>Miralix Phone Monitor</td>
</tr>
<tr>
<td>3002/tcp</td>
<td>Miralix CSTA</td>
</tr>
<tr>
<td>3003/tcp</td>
<td>Miralix GreenBox API</td>
</tr>
<tr>
<td>3004/tcp</td>
<td>Miralix InfoLink</td>
</tr>
<tr>
<td>3006/tcp</td>
<td>Miralix SMS Client Connector</td>
</tr>
<tr>
<td>3007/tcp</td>
<td>Miralix OM Server</td>
</tr>
<tr>
<td>3025/tcp</td>
<td>netpd.org</td>
</tr>
<tr>
<td>3050/tcp,udp</td>
<td>gds_db (Interbase/Firebird)</td>
</tr>
<tr>
<td>3074/tcp,udp</td>
<td>Xbox Live</td>
</tr>
<tr>
<td>3128/tcp</td>
<td>HTTP used by web caches and the default port for the Squid cache</td>
</tr>
<tr>
<td>3260/tcp</td>
<td>iSCSI target</td>
</tr>
<tr>
<td>3268/tcp</td>
<td>msft-gc, Microsoft Global Catalog (LDAP service which contains data from Active Directory forests)</td>
</tr>
<tr>
<td>3269/tcp</td>
<td>msft-gc-ssl, Microsoft Global Catalog over SSL (similar to port 3268, LDAP over SSL version)</td>
</tr>
<tr>
<td>3300/tcp</td>
<td>TripleA game server</td>
</tr>
<tr>
<td>3305/tcp,udp</td>
<td>ODETTE-FTP</td>
</tr>
<tr>
<td>3306/tcp,udp</td>
<td>MySQL Database system</td>
</tr>
<tr>
<td>3333/tcp</td>
<td>Network Caller ID server</td>
</tr>
<tr>
<td>3386/tcp,udp</td>
<td>GTP’ 3GPP GSM/UMTS CDR logging protocol</td>
</tr>
<tr>
<td>3389/tcp</td>
<td>远端桌面协定（RDP）</td>
</tr>
<tr>
<td>3396/tcp</td>
<td>Novell NDPS Printer Agent</td>
</tr>
<tr>
<td>3689/tcp</td>
<td>DAAP Digital Audio Access Protocol used by Apple’s iTunes</td>
</tr>
<tr>
<td>3690/tcp</td>
<td>Subversion version control system</td>
</tr>
<tr>
<td>3702/tcp,udp</td>
<td>Web Services Dynamic Discovery (WS-Discovery), used by various components of Windows Vista</td>
</tr>
<tr>
<td>3724/tcp</td>
<td>World of Warcraft Online gaming MMORPG</td>
</tr>
<tr>
<td>3784/tcp,udp</td>
<td>Ventrilo VoIP program used by Ventrilo</td>
</tr>
<tr>
<td>3785/udp</td>
<td>Ventrilo VoIP program used by Ventrilo</td>
</tr>
<tr>
<td>3868 tcp,udp</td>
<td>Diameter base protocol</td>
</tr>
<tr>
<td>3872/tcp</td>
<td>Oracle Management Remote Agent</td>
</tr>
<tr>
<td>3899/tcp</td>
<td>Remote Administrator</td>
</tr>
<tr>
<td>3900/tcp</td>
<td>Unidata UDT OS udt_os</td>
</tr>
<tr>
<td>3945/tcp</td>
<td>Emcads server service port, a Giritech product used by G/On</td>
</tr>
<tr>
<td>4000/tcp</td>
<td>Diablo II game NoMachine Network Server (nxd)</td>
</tr>
<tr>
<td>4007/tcp</td>
<td>PrintBuzzer printer monitoring socket server</td>
</tr>
<tr>
<td>4089/udp</td>
<td>OpenCORE Remote Control Service</td>
</tr>
<tr>
<td>4089/tcp</td>
<td>OpenCORE Remote Control Service</td>
</tr>
<tr>
<td>4093/udp</td>
<td>PxPlus Client server interface ProvideX</td>
</tr>
<tr>
<td>4093/tcp</td>
<td>PxPlus Client server interface ProvideX</td>
</tr>
<tr>
<td>4096/udp</td>
<td>Bridge-Relay Element ASCOM</td>
</tr>
<tr>
<td>4100</td>
<td>WatchGuard Authentication Applet - default port</td>
</tr>
<tr>
<td>4111/tcp,udp</td>
<td>Xgrid</td>
</tr>
<tr>
<td>4111/tcp</td>
<td>Microsoft Office SharePoint Portal Server - 默认管理端口</td>
</tr>
<tr>
<td>4226/tcp,udp</td>
<td>Aleph One (computer game)</td>
</tr>
<tr>
<td>4224/tcp</td>
<td>Cisco CDP Cisco discovery Protocol</td>
</tr>
<tr>
<td>4569/udp</td>
<td>Inter-Asterisk eXchange</td>
</tr>
<tr>
<td>4662/tcp</td>
<td>OrbitNet Message Service</td>
</tr>
<tr>
<td>4662/tcp</td>
<td>通常用于eMule</td>
</tr>
<tr>
<td>4664/tcp</td>
<td>Google桌面搜索</td>
</tr>
<tr>
<td>4672/udp</td>
<td>eMule - 常用端口</td>
</tr>
<tr>
<td>4894/tcp</td>
<td>LysKOM Protocol A</td>
</tr>
<tr>
<td>4899/tcp</td>
<td>Radmin 远程控制工具</td>
</tr>
<tr>
<td>5000/tcp</td>
<td>commplex-main</td>
</tr>
<tr>
<td>5000/tcp</td>
<td>UPnP - Windows network device interoperability</td>
</tr>
<tr>
<td>5000/tcp,udp</td>
<td>VTun - VPN 软件</td>
</tr>
<tr>
<td>5001/tcp,udp</td>
<td>Iperf (Tool for measuring TCP and UDP bandwidth performance)</td>
</tr>
<tr>
<td>5001/tcp</td>
<td>Slingbox及Slingplayer</td>
</tr>
<tr>
<td>5003/tcp</td>
<td>FileMaker Filemaker Pro</td>
</tr>
<tr>
<td>5004/udp</td>
<td>RTP Real-time Transport Protocol</td>
</tr>
<tr>
<td>5005/udp</td>
<td>RTP Real-time Transport Protocol</td>
</tr>
<tr>
<td>5031/tcp,udp</td>
<td>AVM CAPI-over-TCP (ISDN over Ethernet tunneling)</td>
</tr>
<tr>
<td>5050/tcp</td>
<td>Yahoo! Messenger</td>
</tr>
<tr>
<td>5051/tcp</td>
<td>ita-agent Symantec Intruder Alert</td>
</tr>
<tr>
<td>5060/tcp</td>
<td>Session Initiation Protocol (SIP)</td>
</tr>
<tr>
<td>5060/udp</td>
<td>Session Initiation Protocol (SIP)</td>
</tr>
<tr>
<td>5061/tcp</td>
<td>Session Initiation Protocol (SIP) over Transport Layer Security (TLS)</td>
</tr>
<tr>
<td>5093/udp</td>
<td>SPSS License Administrator (SPSS)</td>
</tr>
<tr>
<td>5104/tcp</td>
<td>IBM NetCOOL / IMPACT HTTP Service</td>
</tr>
<tr>
<td>5106/tcp</td>
<td>A-Talk Common connection</td>
</tr>
<tr>
<td>5107/tcp</td>
<td>A-Talk 远程服务器连接</td>
</tr>
<tr>
<td>5110/tcp</td>
<td>ProRat Server</td>
</tr>
<tr>
<td>5121/tcp</td>
<td>Neverwinter Nights</td>
</tr>
<tr>
<td>5176/tcp</td>
<td>ConsoleWorks default UI interface</td>
</tr>
<tr>
<td>5190/tcp</td>
<td>ICQ and AOL Instant Messenger</td>
</tr>
<tr>
<td>5222/tcp</td>
<td>XMPP/Jabber - client connection</td>
</tr>
<tr>
<td>5223/tcp</td>
<td>XMPP/Jabber - default port for SSL Client Connection</td>
</tr>
<tr>
<td>5269/tcp</td>
<td>XMPP/Jabber - server connection</td>
</tr>
<tr>
<td>5351/tcp,udp</td>
<td>NAT Port Mapping Protocol - client-requested configuration for inbound connections through network address translators</td>
</tr>
<tr>
<td>5353/udp</td>
<td>mDNS - multicastDNS</td>
</tr>
<tr>
<td>5402/tcp,udp</td>
<td>StarBurst AutoCast MFTP</td>
</tr>
<tr>
<td>5405/tcp,udp</td>
<td>NetSupport</td>
</tr>
<tr>
<td>5421/tcp,udp</td>
<td>Net Support 2</td>
</tr>
<tr>
<td>5432/tcp</td>
<td>PostgreSQL database system</td>
</tr>
<tr>
<td>5445/udp</td>
<td>Cisco Vidéo VT Advantage</td>
</tr>
<tr>
<td>5495/tcp</td>
<td>Applix TM1 Admin server</td>
</tr>
<tr>
<td>5498/tcp</td>
<td>Hotline tracker server connection</td>
</tr>
<tr>
<td>5499/udp</td>
<td>Hotline tracker server discovery</td>
</tr>
<tr>
<td>5500/tcp</td>
<td>VNC remote desktop protocol - for incoming listening viewer, Hotline control connection</td>
</tr>
<tr>
<td>5501/tcp</td>
<td>Hotline file transfer connection</td>
</tr>
<tr>
<td>5517/tcp</td>
<td>Setiqueue Proxy server client for SETI@Home project</td>
</tr>
<tr>
<td>5555/tcp</td>
<td>Freeciv multiplay port for versions up to 2.0, Hewlett Packard Data Protector, SAP</td>
</tr>
<tr>
<td>5556/tcp</td>
<td>Freeciv multiplay port</td>
</tr>
<tr>
<td>5631/tcp</td>
<td>赛门铁克 pcAnywhere</td>
</tr>
<tr>
<td>5632/udp</td>
<td>赛门铁克 pcAnywhere</td>
</tr>
<tr>
<td>5666/tcp</td>
<td>NRPE (Nagios)</td>
</tr>
<tr>
<td>5667/tcp</td>
<td>NSCA (Nagios)</td>
</tr>
<tr>
<td>5800/tcp</td>
<td>VNC remote desktop protocol - for use over HTTP</td>
</tr>
<tr>
<td>5814/tcp,udp</td>
<td>Hewlett-Packard Support Automation (HP OpenView Self-Healing Services)</td>
</tr>
<tr>
<td>5900/tcp</td>
<td>VNC remote desktop protocol (used by ARD)</td>
</tr>
<tr>
<td>6000/tcp</td>
<td>X11 - used between an X client and server over the network</td>
</tr>
<tr>
<td>6001/udp</td>
<td>X11 - used between an X client and server over the network</td>
</tr>
<tr>
<td>6005/tcp</td>
<td>Default port for BMC Software CONTROL-M/Server - Socket Port number used for communication between CONTROL-M processes - though often changed during installation</td>
</tr>
<tr>
<td>6050/tcp</td>
<td>Brightstor Arcserve Backup</td>
</tr>
<tr>
<td>6051/tcp</td>
<td>Brightstor Arcserve Backup</td>
</tr>
<tr>
<td>6100/tcp</td>
<td>Vizrt System</td>
</tr>
<tr>
<td>6110/tcp</td>
<td>softcm HP SoftBench CM</td>
</tr>
<tr>
<td>6110/udp</td>
<td>softcm HP SoftBench CM</td>
</tr>
<tr>
<td>6111/tcp</td>
<td>spc HP SoftBench Sub-Process Control</td>
</tr>
<tr>
<td>6111/udp</td>
<td>spc HP SoftBench Sub-Process Control</td>
</tr>
<tr>
<td>6112/tcp</td>
<td>“dtspcd” - a network daemon that accepts requests from clients to execute commands and launch applications remotely</td>
</tr>
<tr>
<td>6112/tcp</td>
<td>Blizzard’s Battle.net gaming service, ArenaNet gaming service</td>
</tr>
<tr>
<td>6129/tcp</td>
<td>Dameware Remote Control</td>
</tr>
<tr>
<td>6257/udp</td>
<td>WinMX （参见6699端口）</td>
</tr>
<tr>
<td>6346/tcp,udp</td>
<td>gnutella-svc (FrostWire, Limewire, Bearshare, etc.)</td>
</tr>
<tr>
<td>6347/tcp,udp</td>
<td>gnutella-rtr</td>
</tr>
<tr>
<td>6444/tcp,udp</td>
<td>Sun Grid Engine - Qmaster Service</td>
</tr>
<tr>
<td>6445/tcp,udp</td>
<td>Sun Grid Engine - Execution Service</td>
</tr>
<tr>
<td>6502/tcp,udp</td>
<td>Danware Data NetOp Remote Control</td>
</tr>
<tr>
<td>6522/tcp</td>
<td>Gobby (and other libobby-based software)</td>
</tr>
<tr>
<td>6543/udp</td>
<td>Jetnet - default port that the Paradigm Research &amp; Development Jetnet protocol communicates on</td>
</tr>
<tr>
<td>6566/tcp</td>
<td>SANE (Scanner Access Now Easy) - SANE network scanner daemon</td>
</tr>
<tr>
<td>6600/tcp</td>
<td>Music Playing Daemon (MPD)</td>
</tr>
<tr>
<td>6619/tcp,udp</td>
<td>ODETTE-FTP over TLS/SSL</td>
</tr>
<tr>
<td>6665-6669/tcp</td>
<td>Internet Relay Chat</td>
</tr>
<tr>
<td>6679/tcp</td>
<td>IRC SSL （安全互联网中继聊天） - 通常使用的端口</td>
</tr>
<tr>
<td>6697/tcp</td>
<td>IRC SSL （安全互联网中继聊天） - 通常使用的端口</td>
</tr>
<tr>
<td>6699/tcp</td>
<td>WinMX （参见6257端口）</td>
</tr>
<tr>
<td>6881-6999/tcp,udp</td>
<td>BitTorrent 通常使用的端口</td>
</tr>
<tr>
<td>6891-6900/tcp,udp</td>
<td>Windows Live Messenger （文件传输）</td>
</tr>
<tr>
<td>6901/tcp,udp</td>
<td>Windows Live Messenger （语音）</td>
</tr>
<tr>
<td>6969/tcp</td>
<td>acmsoda</td>
</tr>
<tr>
<td>6969/tcp</td>
<td>BitTorrent tracker port</td>
</tr>
<tr>
<td>7000/tcp</td>
<td>Default port for Azureus’s built in HTTPS Bittorrent Tracker</td>
</tr>
<tr>
<td>7001/tcp</td>
<td>Default port for BEA WebLogic Server’s HTTP server - though often changed during installation</td>
</tr>
<tr>
<td>7002/tcp</td>
<td>Default port for BEA WebLogic Server’s HTTPS server - though often changed during installation</td>
</tr>
<tr>
<td>7005/tcp,udp</td>
<td>Default port for BMC Software CONTROL-M/Server and CONTROL-M/Agent’s - Agent to Server port though often changed during installation</td>
</tr>
<tr>
<td>7006/tcp,udp</td>
<td>Default port for BMC Software CONTROL-M/Server and CONTROL-M/Agent’s - Server to Agent port though often changed during installation</td>
</tr>
<tr>
<td>7010/tcp</td>
<td>Default port for Cisco AON AMC (AON Management Console) [2]</td>
</tr>
<tr>
<td>7025/tcp</td>
<td>Zimbra - lmtp [mailbox] - local mail delivery</td>
</tr>
<tr>
<td>7047/tcp</td>
<td>Zimbra - conversion server</td>
</tr>
<tr>
<td>7171/tcp</td>
<td>Tibia</td>
</tr>
<tr>
<td>7306/tcp</td>
<td>Zimbra - mysql [mailbox]</td>
</tr>
<tr>
<td>7307/tcp</td>
<td>Zimbra - mysql [logger] - logger</td>
</tr>
<tr>
<td>7312/udp</td>
<td>Sibelius License Server port</td>
</tr>
<tr>
<td>7670/tcp</td>
<td>BrettspielWelt BSW Boardgame Portal</td>
</tr>
<tr>
<td>7777/tcp</td>
<td>Default port used by Windows backdoor program tini.exe</td>
</tr>
<tr>
<td>8000/tcp</td>
<td>iRDMI - often mistakenly used instead of port 8080 (The Internet Assigned Numbers Authority (iana.org) officially lists this port for iRDMI protocol)</td>
</tr>
<tr>
<td>8000/tcp</td>
<td>Common port used for internet radio streams such as those using SHOUTcast</td>
</tr>
<tr>
<td>8002/tcp</td>
<td>Cisco Systems Unified Call Manager Intercluster Port</td>
</tr>
<tr>
<td>8008/tcp</td>
<td>HTTP 替代端口</td>
</tr>
<tr>
<td>8008/tcp</td>
<td>IBM HTTP Server 默认管理端口</td>
</tr>
<tr>
<td>8009/tcp</td>
<td>Apache JServ 协议 v13 (ajp13) 例如：Apache mod_jk Tomcat会使用。</td>
</tr>
<tr>
<td>8010/tcp</td>
<td>XMPP/Jabber 文件传输</td>
</tr>
<tr>
<td>8074/tcp</td>
<td>Gadu-Gadu</td>
</tr>
<tr>
<td>8080/tcp</td>
<td>HTTP 替代端口 （http_alt） - commonly used for web proxy and caching server, or for running a web server as a non-root user</td>
</tr>
<tr>
<td>8080/tcp</td>
<td>Apache Tomcat</td>
</tr>
<tr>
<td>8086/tcp</td>
<td>HELM Web Host Automation Windows Control Panel</td>
</tr>
<tr>
<td>8086/tcp</td>
<td>Kaspersky AV Control Center TCP Port</td>
</tr>
<tr>
<td>8087/tcp</td>
<td>Hosting Accelerator Control Panel</td>
</tr>
<tr>
<td>8087/udp</td>
<td>Kaspersky AV Control Center UDP Port</td>
</tr>
<tr>
<td>8090/tcp</td>
<td>Another HTTP Alternate (http_alt_alt) - used as an alternative to port 8080</td>
</tr>
<tr>
<td>8118/tcp</td>
<td>Privoxy web proxy - advertisements-filtering web proxy</td>
</tr>
<tr>
<td>8087/tcp</td>
<td>SW Soft Plesk 控制面板</td>
</tr>
<tr>
<td>8200/tcp</td>
<td>GoToMyPC</td>
</tr>
<tr>
<td>8220/tcp</td>
<td>Bloomberg</td>
</tr>
<tr>
<td>8222</td>
<td>VMware Server Management User Interface (insecure web interface)[3]. See also, port 8333</td>
</tr>
<tr>
<td>8291/tcp</td>
<td>Winbox - Default port on a MikroTik RouterOS for a Windows application used to administer MikroTik RouterOS</td>
</tr>
<tr>
<td>8294/tcp</td>
<td>Bloomberg</td>
</tr>
<tr>
<td>8333</td>
<td>VMware 服务器管理用户界面（安全网络界面）[4]. See also, port 8222</td>
</tr>
<tr>
<td>8400</td>
<td>Commvault Unified Data Management</td>
</tr>
<tr>
<td>8443/tcp</td>
<td>SW Soft Plesk Control Panel</td>
</tr>
<tr>
<td>8500/tcp</td>
<td>ColdFusion Macromedia/Adobe ColdFusion default Webserver port</td>
</tr>
<tr>
<td>8501/udp</td>
<td>Duke Nukem 3D - Default Online Port</td>
</tr>
<tr>
<td>8767/udp</td>
<td>TeamSpeak - Default UDP Port</td>
</tr>
<tr>
<td>8880</td>
<td>WebSphere Application Server SOAP Connector port</td>
</tr>
<tr>
<td>8881/tcp</td>
<td>Atlasz Informatics Research Ltd Secure Application Server</td>
</tr>
<tr>
<td>8882/tcp</td>
<td>Atlasz Informatics Research Ltd Secure Application Server</td>
</tr>
<tr>
<td>8888/tcp,udp</td>
<td>NewsEDGE server</td>
</tr>
<tr>
<td>8888/tcp</td>
<td>Sun Answerbook dwhttpd server (deprecated by docs.sun.com)</td>
</tr>
<tr>
<td>8888/tcp</td>
<td>GNUmp3d HTTP music streaming and web interface port</td>
</tr>
<tr>
<td>8888/tcp</td>
<td>Hero Fighter Network Game Server</td>
</tr>
<tr>
<td>9000/tcp</td>
<td>Buffalo LinkSystem web access</td>
</tr>
<tr>
<td>9000/tcp</td>
<td>DBGp</td>
</tr>
<tr>
<td>9000/udp</td>
<td>UDPCast</td>
</tr>
<tr>
<td>9001</td>
<td>cisco-xremote router configuration</td>
</tr>
<tr>
<td>9001</td>
<td>Tor network default port</td>
</tr>
<tr>
<td>9001/tcp</td>
<td>DBGp Proxy</td>
</tr>
<tr>
<td>9009/tcp,udp</td>
<td>Pichat Server - Peer to peer chat software</td>
</tr>
<tr>
<td>9043/tcp</td>
<td>WebSphere Application Server Administration Console secure port</td>
</tr>
<tr>
<td>9060/tcp</td>
<td>WebSphere Application Server Administration Console</td>
</tr>
<tr>
<td>9100/tcp</td>
<td>Jetdirect HP Print Services</td>
</tr>
<tr>
<td>9110/udp</td>
<td>SSMP Message protocol</td>
</tr>
<tr>
<td>9101</td>
<td>Bacula Director</td>
</tr>
<tr>
<td>9102</td>
<td>Bacula File Daemon</td>
</tr>
<tr>
<td>9103</td>
<td>Bacula Storage Daemon</td>
</tr>
<tr>
<td>9119/TCP,UDP</td>
<td>MXit Instant Messenger</td>
</tr>
<tr>
<td>9535/tcp</td>
<td>man, Remote Man Server</td>
</tr>
<tr>
<td>9535</td>
<td>mngsuite - Management Suite Remote Control</td>
</tr>
<tr>
<td>9800/tcp,udp</td>
<td>WebDAV Source Port</td>
</tr>
<tr>
<td>9800</td>
<td>WebCT e-learning portal</td>
</tr>
<tr>
<td>9999</td>
<td>Hydranode - edonkey2000 telnet control port</td>
</tr>
<tr>
<td>9999</td>
<td>Urchin Web Analytics</td>
</tr>
<tr>
<td>10000</td>
<td>Webmin - web based Linux admin tool</td>
</tr>
<tr>
<td>10000</td>
<td>BackupExec</td>
</tr>
<tr>
<td>10008</td>
<td>Octopus Multiplexer - CROMP protocol primary port, hoople.org</td>
</tr>
<tr>
<td>10017</td>
<td>AIX,NeXT, HPUX - rexd daemon control port</td>
</tr>
<tr>
<td>10024/tcp</td>
<td>Zimbra - smtp [mta] - to amavis from postfix</td>
</tr>
<tr>
<td>10025/tcp</td>
<td>Ximbra - smtp [mta] - back to postfix from amavis</td>
</tr>
<tr>
<td>10050/tcp</td>
<td>Zabbix-Agent</td>
</tr>
<tr>
<td>10051/tcp</td>
<td>Zabbix-Server</td>
</tr>
<tr>
<td>10113/tcp</td>
<td>NetIQ Endpoint</td>
</tr>
<tr>
<td>10113/udp</td>
<td>NetIQ Endpoint</td>
</tr>
<tr>
<td>10114/tcp</td>
<td>NetIQ Qcheck</td>
</tr>
<tr>
<td>10114/udp</td>
<td>NetIQ Qcheck</td>
</tr>
<tr>
<td>10115/tcp</td>
<td>NetIQ Endpoint</td>
</tr>
<tr>
<td>10115/udp</td>
<td>NetIQ Endpoint</td>
</tr>
<tr>
<td>10116/tcp</td>
<td>NetIQ VoIP Assessor</td>
</tr>
<tr>
<td>10116/udp</td>
<td>NetIQ VoIP Assessor</td>
</tr>
<tr>
<td>10480</td>
<td>SWAT 4 Dedicated Server</td>
</tr>
<tr>
<td>11211</td>
<td>memcached</td>
</tr>
<tr>
<td>11235</td>
<td>Savage:Battle for Newerth Server Hosting</td>
</tr>
<tr>
<td>11294</td>
<td>Blood Quest Online Server</td>
</tr>
<tr>
<td>11371</td>
<td>OpenPGP HTTP Keyserver</td>
</tr>
<tr>
<td>11576</td>
<td>IPStor Server management communication</td>
</tr>
<tr>
<td>12035/udp</td>
<td>Linden Lab viewer to sim</td>
</tr>
<tr>
<td>12345</td>
<td>NetBus - remote administration tool (often Trojan horse). Also used by NetBuster. Little Fighter 2 (TCP).</td>
</tr>
<tr>
<td>12975/tcp</td>
<td>LogMeIn Hamachi (VPN tunnel software;also port 32976)</td>
</tr>
<tr>
<td>13000-13050/udp</td>
<td>Linden Lab viewer to sim</td>
</tr>
<tr>
<td>13720/tcp</td>
<td>Symantec NetBackup - bprd (formerly VERITAS)</td>
</tr>
<tr>
<td>13721/tcp</td>
<td>Symantec NetBackup - bpdbm (formerly VERITAS)</td>
</tr>
<tr>
<td>13724/tcp</td>
<td>Symantec Network Utility - vnet (formerly VERITAS)</td>
</tr>
<tr>
<td>13782/tcp</td>
<td>Symantec NetBackup - bpcd (formerly VERITAS)</td>
</tr>
<tr>
<td>13783/tcp</td>
<td>Symantec VOPIED protocol (formerly VERITAS)</td>
</tr>
<tr>
<td>14567/udp</td>
<td>Battlefield 1942 and mods</td>
</tr>
<tr>
<td>15000/tcp</td>
<td>psyBNC</td>
</tr>
<tr>
<td>15000/tcp</td>
<td>Wesnoth</td>
</tr>
<tr>
<td>15567/udp</td>
<td>Battlefield Vietnam and mods</td>
</tr>
<tr>
<td>15345/udp</td>
<td>XPilot</td>
</tr>
<tr>
<td>16000/tcp</td>
<td>shroudBNC</td>
</tr>
<tr>
<td>16080/tcp</td>
<td>Mac OS X Server performance cache for HTTP[5]</td>
</tr>
<tr>
<td>16384/udp</td>
<td>Iron Mountain Digital - online backup</td>
</tr>
<tr>
<td>16567/udp</td>
<td>Battlefield 2 and mods</td>
</tr>
<tr>
<td>17788/udp</td>
<td>PPS网路电视</td>
</tr>
<tr>
<td>19226/tcp</td>
<td>Panda Software AdminSecure Communication Agent</td>
</tr>
<tr>
<td>19638/tcp</td>
<td>Ensim Control Panel</td>
</tr>
<tr>
<td>19813/tcp</td>
<td>4D database Client Server Communication</td>
</tr>
<tr>
<td>20000</td>
<td>Usermin - 基于网络的用户工具</td>
</tr>
<tr>
<td>20720/tcp</td>
<td>Symantec i3 Web GUI server</td>
</tr>
<tr>
<td>22347/tcp,udp</td>
<td>WibuKey - default port for WibuKey Network Server of WIBU-SYSTEMS AG</td>
</tr>
<tr>
<td>22350/tcp,udp</td>
<td>CodeMeter - default port for CodeMeter Server of WIBU-SYSTEMS AG</td>
</tr>
<tr>
<td>24554/tcp,udp</td>
<td>binkp - Fidonet mail transfers over TCP/IP</td>
</tr>
<tr>
<td>24800</td>
<td>Synergy：keyboard/mouse sharing software</td>
</tr>
<tr>
<td>24842</td>
<td>StepMania：Online: Dance Dance Revolution Simulator</td>
</tr>
<tr>
<td>25999/tcp</td>
<td>Xfire</td>
</tr>
<tr>
<td>26000/tcp,udp</td>
<td>id Software’s Quake server,</td>
</tr>
<tr>
<td>26000/tcp</td>
<td>CCP’s EVE Online Online gaming MMORPG,</td>
</tr>
<tr>
<td>27000/udp</td>
<td>(through 27006) id Software’s QuakeWorld master server</td>
</tr>
<tr>
<td>27010/udp</td>
<td>Half-Life及其修改版，如Counter-Strike</td>
</tr>
<tr>
<td>27015/udp</td>
<td>Half-Life及其修改版，如Counter-Strike</td>
</tr>
<tr>
<td>27374</td>
<td>Sub7’s default port. Most script kiddies do not change the default port.</td>
</tr>
<tr>
<td>27500/udp</td>
<td>(through 27900) id Software’s QuakeWorld</td>
</tr>
<tr>
<td>27888/udp</td>
<td>Kaillera server</td>
</tr>
<tr>
<td>27900</td>
<td>(through 27901) Nintendo Wi-Fi Connection</td>
</tr>
<tr>
<td>27901/udp</td>
<td>(through 27910) id Software’s Quake II master server</td>
</tr>
<tr>
<td>27960/udp</td>
<td>(through 27969) Activision’s Enemy Territory and id Software’s Quake III Arena and Quake III and some ioquake3 derived games</td>
</tr>
<tr>
<td>28910</td>
<td>任天堂 Wi-Fi连接</td>
</tr>
<tr>
<td>28960</td>
<td>Call of Duty 2 Common Call of Duty 2 port - (PC Version)</td>
</tr>
<tr>
<td>29900</td>
<td>(through 29901) Nintendo Wi-Fi Connection</td>
</tr>
<tr>
<td>29920</td>
<td>任天堂 Wi-Fi连接</td>
</tr>
<tr>
<td>30000</td>
<td>Pokemon Netbattle</td>
</tr>
<tr>
<td>30564/tcp</td>
<td>Multiplicity：keyboard/mouse/clipboard sharing software</td>
</tr>
<tr>
<td>31337/tcp</td>
<td>Back Orifice - remote administration tool（often Trojan horse）</td>
</tr>
<tr>
<td>31337/tcp</td>
<td>xc0r3 - xc0r3 security antivir port</td>
</tr>
<tr>
<td>31415</td>
<td>ThoughtSignal - Server Communication Service（often Informational）</td>
</tr>
<tr>
<td>31456-31458/tcp</td>
<td>TetriNET ports (in order: IRC, game, and spectating)</td>
</tr>
<tr>
<td>32245/tcp</td>
<td>MMTSG-mutualed over MMT (encrypted transmission)</td>
</tr>
<tr>
<td>33434</td>
<td>traceroute</td>
</tr>
<tr>
<td>37777/tcp</td>
<td>Digital Video Recorder hardware</td>
</tr>
<tr>
<td>36963</td>
<td>Counter Strike 2D multiplayer port (2D clone of popular CounterStrike computer game)</td>
</tr>
<tr>
<td>40000</td>
<td>SafetyNET p</td>
</tr>
<tr>
<td>40523</td>
<td>data packets</td>
</tr>
<tr>
<td>43594-43595/tcp</td>
<td>RuneScape</td>
</tr>
<tr>
<td>47808</td>
<td>BACnet Building Automation and Control Networks</td>
</tr>
</tbody>
</table>
]]></content>
    <summary type="html">
    <![CDATA[熟悉常用的TCP/UDP端口很有必要]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Windows批处理(cmd/bat)常用命令小结]]></title>
    <link href="http://wsgzao.github.io/post/windows-batch/"/>
    <id>http://wsgzao.github.io/post/windows-batch/</id>
    <published>2016-03-29T08:22:32.000Z</published>
    <updated>2016-03-29T08:29:18.212Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>批处理文件（batch file）包含一系列 DOS命令，通常用于自动执行重复性任务。用户只需双击批处理文件便可执行任务，而无需重复输入相同指令。编写批处理文件非常简单，但难点在于确保一切按顺序执行。编写严谨的批处理文件可以极大程度地节省时间，在应对重复性工作时尤其有效。</p>
<blockquote>
<p>在Windows中善用批处理可以简化很多重复工作</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年03月29日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/windows-batch/" target="_blank" rel="external">http://wsgzao.github.io/post/windows-batch/</a></p>
<p><strong>扩展阅读</strong></p>
<p>如何编写批处理文件 - <a href="http://zh.wikihow.com/编写批处理文件" target="_blank" rel="external">http://zh.wikihow.com/编写批处理文件</a><br>批处理常用命令总结 - <a href="http://xstarcd.github.io/wiki/windows/windows_cmd_summary.html" target="_blank" rel="external">http://xstarcd.github.io/wiki/windows/windows_cmd_summary.html</a></p>
<h2 id="什么是批处理">什么是批处理</h2><p>批处理(Batch)，也称为批处理脚本。顾名思义，批处理就是对某对象进行批量的处理。批处理文件的扩展名为bat。</p>
<p>目前比较常见 的批处理包含两类：DOS批处理和PS批处理。PS批处理是基于强大的图片编辑软件Photoshop的，用来批量处理图片的脚本；而DOS批处理则是基于DOS命令的，用来自动地批量地执行DOS命令以实现特定操作的脚本。这里要讲的就是DOS批处理。</p>
<p>批处理是一种简化的脚本语言，它应用于DOS和Windows系统中，它是由DOS或者Windows系统内嵌的命令解释器（通常是COMMAND.COM或者CMD.EXE）解释运行。类似于Unix中的Shell脚本。批处理文件具有.bat或者.cmd的扩展名，其最简单的例子，是逐行书写在命令行中会用到的各种命令。更复杂的情况，需要使用if，for，goto等命令控制程序的运行过程，如同C，Basic等中高级语言一样。如果需要实现更复杂的应用，利用外部程序是必要的，这包括系统本身提供的外部命令和第三方提供的工具或者软件。</p>
<p>批处理文件，或称为批处理程序，是由一条条的DOS命令组成的普通文本文件，可以用记事本直接编辑或用DOS命令创建，也可以用DOS下的文本编辑器Edit.exe来编辑。在“命令提示”下键入批处理文件的名称，或者双击该批处理文件，系统就会调用Cmd.exe运行该批处理程序。一般情况下，每条命令占据一行；当然也可以将多条命令用特定符号（如：&amp;、&amp;&amp;、|、||等）分隔后写入同一行中；还有的情况就是像if、for等较高级的命令则要占据几行甚至几十几百行的空间。</p>
<p>系统在解释运行批处理程序时，首先扫描整个批处理程序，然后从第一行代码开始向下逐句执行所有的命令，直至程序结尾或遇见exit命令或出错意外退出。</p>
<h2 id="批处理命令简介">批处理命令简介</h2><ul>
<li>echo</li>
<li>rem</li>
<li>pause</li>
<li>call</li>
<li>start</li>
<li>goto</li>
<li>set</li>
</ul>
<p><a href="http://xstarcd.github.io/wiki/windows/windows_cmd_summary_commands.html" target="_blank" rel="external">http://xstarcd.github.io/wiki/windows/windows_cmd_summary_commands.html</a></p>
<h2 id="批处理符号简介">批处理符号简介</h2><ul>
<li>回显屏蔽 @</li>
<li>重定向1 &gt;与&gt;&gt;</li>
<li>重定向2 &lt;</li>
<li>管道符号 |</li>
<li>转义符 ^</li>
<li>逻辑命令符包括：&amp;、&amp;&amp;、||</li>
</ul>
<p><a href="http://xstarcd.github.io/wiki/windows/windows_cmd_summary_symbols.html" target="_blank" rel="external">http://xstarcd.github.io/wiki/windows/windows_cmd_summary_symbols.html</a></p>
<h2 id="常用DOS命令">常用DOS命令</h2><p><strong>文件夹管理</strong></p>
<ul>
<li>cd 显示当前目录名或改变当前目录。</li>
<li>md 创建目录。</li>
<li>rd 删除一个目录。</li>
<li>dir 显示目录中的文件和子目录列表。</li>
<li>tree 以图形显示驱动器或路径的文件夹结构。</li>
<li>path 为可执行文件显示或设置一个搜索路径。</li>
<li>xcopy 复制文件和目录树。</li>
</ul>
<p><strong>文件管理</strong></p>
<ul>
<li>type 显示文本文件的内容。</li>
<li>copy 将一份或多份文件复制到另一个位置。</li>
<li>del 删除一个或数个文件。</li>
<li>move 移动文件并重命名文件和目录。(Windows XP Home Edition中没有)</li>
<li>ren 重命名文件。</li>
<li>replace 替换文件。</li>
<li>attrib 显示或更改文件属性。</li>
<li>find 搜索字符串。</li>
<li>fc 比较两个文件或两个文件集并显示它们之间的不同</li>
</ul>
<p><strong>网络命令</strong></p>
<ul>
<li>ping 进行网络连接测试、名称解析</li>
<li>ftp 文件传输</li>
<li>net 网络命令集及用户管理</li>
<li>telnet 远程登陆</li>
<li>ipconfig显示、修改TCP/IP设置</li>
<li>msg 给用户发送消息</li>
<li>arp 显示、修改局域网的IP地址-物理地址映射列表</li>
</ul>
<p><strong>系统管理</strong></p>
<ul>
<li>at 安排在特定日期和时间运行命令和程序</li>
<li>shutdown立即或定时关机或重启</li>
<li>tskill 结束进程</li>
<li>taskkill结束进程(比tskill高级，但WinXPHome版中无该命令)</li>
<li>tasklist显示进程列表(Windows XP Home Edition中没有)</li>
<li>sc 系统服务设置与控制</li>
<li>reg 注册表控制台工具</li>
<li>powercfg控制系统上的电源设置</li>
</ul>
<blockquote>
<p>对于以上列出的所有命令，在cmd中输入命令+/?即可查看该命令的帮助信息。如find /?</p>
</blockquote>
<h2 id="Windows_Batch_常用命令">Windows Batch 常用命令</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">echo</span> 和 @</span><br><span class="line">回显命令</span><br><span class="line">@                     #关闭单行回显</span><br><span class="line"><span class="keyword">echo</span> off              #从下一行开始关闭回显</span><br><span class="line">@<span class="keyword">echo</span> off             #从本行开始关闭回显。一般批处理第一行都是这个</span><br><span class="line"><span class="keyword">echo</span> on               #从下一行开始打开回显</span><br><span class="line"><span class="keyword">echo</span>                  #显示当前是 <span class="keyword">echo</span> off 状态还是 <span class="keyword">echo</span> on 状态</span><br><span class="line"><span class="keyword">echo</span>.                 #输出一个”回车换行”，空白行</span><br><span class="line">                         #(同<span class="keyword">echo</span>, <span class="keyword">echo</span>; <span class="keyword">echo</span>+ <span class="keyword">echo</span>[ <span class="keyword">echo</span>] <span class="keyword">echo</span>/ <span class="keyword">echo</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="flow">errorlevel</span></span><br><span class="line"><span class="keyword">echo</span> <span class="envvar">%errorlevel%</span></span><br><span class="line">每个命令运行结束，可以用这个命令行格式查看返回码</span><br><span class="line">默认值为<span class="number">0</span>，一般命令执行出错会设 <span class="flow">errorlevel</span> 为<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span> <span class="built_in">dir</span></span><br><span class="line">显示文件夹内容</span><br><span class="line"><span class="built_in">dir</span>                  #显示当前目录中的文件和子目录</span><br><span class="line"><span class="built_in">dir</span> /a               #显示当前目录中的文件和子目录，包括隐藏文件和系统文件</span><br><span class="line"><span class="built_in">dir</span> c: /a:d          #显示 C 盘当前目录中的目录</span><br><span class="line"><span class="built_in">dir</span> c: /a:-d         #显示 C 盘根目录中的文件</span><br><span class="line"><span class="built_in">dir</span> c: /b/p         #/b只显示文件名，/p分页显示</span><br><span class="line"><span class="built_in">dir</span> *.exe /s         #显示当前目录和子目录里所有的.exe文件</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> <span class="built_in">cd</span></span><br><span class="line">切换目录</span><br><span class="line"><span class="built_in">cd</span>                  #进入根目录</span><br><span class="line"><span class="built_in">cd</span>                   #显示当前目录</span><br><span class="line"><span class="built_in">cd</span> /d d:sdk         #可以同时更改盘符和目录</span><br><span class="line"></span><br><span class="line"><span class="number">5</span> <span class="built_in">md</span></span><br><span class="line">创建目录</span><br><span class="line"><span class="built_in">md</span> d:abc          #如果 d:a 不存在，将会自动创建中级目录</span><br><span class="line">#如果命令扩展名被停用，则需要键入 <span class="built_in">mkdir</span> abc。</span><br><span class="line"></span><br><span class="line"><span class="number">6</span> <span class="built_in">rd</span></span><br><span class="line">删除目录</span><br><span class="line"><span class="built_in">rd</span> abc               #删除当前目录里的 abc 子目录，要求为空目录</span><br><span class="line"><span class="built_in">rd</span> /s/q d:temp      #删除 d:temp 文件夹及其子文件夹和文件，/q安静模式</span><br><span class="line"></span><br><span class="line"><span class="number">7</span> <span class="winutils">del</span></span><br><span class="line">删除文件</span><br><span class="line"><span class="winutils">del</span> d:test.txt      #删除指定文件，不能是隐藏、系统、只读文件</span><br><span class="line"><span class="winutils">del</span> /q/a/f d:temp*.*</span><br><span class="line">删除 d:temp 文件夹里面的所有文件，包括隐藏、只读、系统文件，不包括子目录</span><br><span class="line"><span class="winutils">del</span> /q/a/f/s d:temp*.*</span><br><span class="line">删除 d:temp 及子文件夹里面的所有文件，包括隐藏、只读、系统文件，不包括子目录</span><br><span class="line"></span><br><span class="line"><span class="number">8</span> <span class="winutils">ren</span></span><br><span class="line">重命名命令</span><br><span class="line"><span class="winutils">ren</span> d:temp tmp      #支持对文件夹的重命名</span><br><span class="line"></span><br><span class="line"><span class="number">9</span> <span class="built_in">cls</span></span><br><span class="line">清屏</span><br><span class="line"></span><br><span class="line"><span class="number">10</span> <span class="built_in">type</span></span><br><span class="line">显示文件内容</span><br><span class="line"><span class="built_in">type</span> c:boot.ini     #显示指定文件的内容，程序文件一般会显示乱码</span><br><span class="line"><span class="built_in">type</span> *.txt           #显示当前目录里所有.txt文件的内容</span><br><span class="line"></span><br><span class="line"><span class="number">11</span> <span class="keyword">copy</span></span><br><span class="line">拷贝文件</span><br><span class="line"><span class="keyword">copy</span> c:test.txt d:test.bak</span><br><span class="line">复制 c:test.txt 文件到 d: ，并重命名为 test.bak</span><br><span class="line"><span class="keyword">copy</span> <span class="stream">con</span> test.txt</span><br><span class="line">从屏幕上等待输入，按 Ctrl+Z 结束输入，输入内容存为test.txt文件</span><br><span class="line"><span class="stream">con</span>代表屏幕，<span class="stream">prn</span>代表打印机，<span class="stream">nul</span>代表空设备</span><br><span class="line"><span class="keyword">copy</span> <span class="number">1</span>.txt + <span class="number">2</span>.txt <span class="number">3</span>.txt</span><br><span class="line">合并 <span class="number">1</span>.txt 和 <span class="number">2</span>.txt 的内容，保存为 <span class="number">3</span>.txt 文件</span><br><span class="line">如果不指定 <span class="number">3</span>.txt ，则保存到 <span class="number">1</span>.txt</span><br><span class="line"><span class="keyword">copy</span> test.txt +</span><br><span class="line">复制文件到自己，实际上是修改了文件日期</span><br><span class="line"></span><br><span class="line"><span class="number">12</span> <span class="built_in">title</span></span><br><span class="line">设置<span class="built_in">cmd</span>窗口的标题</span><br><span class="line"><span class="built_in">title</span> 新标题         #可以看到<span class="built_in">cmd</span>窗口的标题栏变了</span><br><span class="line"></span><br><span class="line"><span class="number">13</span> <span class="built_in">ver</span></span><br><span class="line">显示系统版本</span><br><span class="line"></span><br><span class="line"><span class="number">14</span> <span class="built_in">label</span> 和 <span class="built_in">vol</span></span><br><span class="line">设置卷标</span><br><span class="line"><span class="built_in">vol</span>                  #显示卷标</span><br><span class="line"><span class="built_in">label</span>                #显示卷标，同时提示输入新卷标</span><br><span class="line"><span class="built_in">label</span> c:system       #设置C盘的卷标为 system</span><br><span class="line"></span><br><span class="line"><span class="number">15</span> <span class="built_in">pause</span></span><br><span class="line">暂停命令</span><br><span class="line"></span><br><span class="line"><span class="number">16</span> <span class="comment">rem 和 ::</span></span><br><span class="line">注释命令</span><br><span class="line">注释行不执行操作</span><br><span class="line"></span><br><span class="line"><span class="number">17</span> <span class="built_in">date</span> 和 <span class="built_in">time</span></span><br><span class="line">日期和时间</span><br><span class="line"><span class="built_in">date</span>           #显示当前日期，并提示输入新日期，按"回车"略过输入</span><br><span class="line"><span class="built_in">date</span>/t         #只显示当前日期，不提示输入新日期</span><br><span class="line"><span class="built_in">time</span>           #显示当前时间，并提示输入新时间，按"回车"略过输入</span><br><span class="line"><span class="built_in">time</span>/t         #只显示当前时间，不提示输入新时间</span><br><span class="line"></span><br><span class="line"><span class="number">18</span> <span class="flow">goto</span> 和 :</span><br><span class="line">跳转命令</span><br><span class="line">:<span class="built_in">label</span>         #行首为:表示该行是标签行，标签行不执行操作</span><br><span class="line"><span class="function">goto label     #跳转到指定的标签那一行</span><br><span class="line"></span><br><span class="line">19 <span class="title">find</span> (外部命令)</span><br><span class="line">查找命令</span><br><span class="line"><span class="title">find</span> "<span class="title">abc</span>" <span class="title">c:test</span>.<span class="title">txt</span></span><br><span class="line">在 <span class="title">c:test</span>.<span class="title">txt</span> 文件里查找含 <span class="title">abc</span> 字符串的行</span><br><span class="line">如果找不到，将设 <span class="title">errorlevel</span> 返回码为1</span><br><span class="line"><span class="title">find</span> /<span class="title">i</span> “<span class="title">abc</span>” <span class="title">c:test</span>.<span class="title">txt</span></span><br><span class="line">查找含 <span class="title">abc</span> 的行，忽略大小写</span><br><span class="line"><span class="title">find</span> /<span class="title">c</span> "<span class="title">abc</span>" <span class="title">c:test</span>.<span class="title">txt</span></span><br><span class="line">显示含 <span class="title">abc</span> 的行的行数</span><br><span class="line"></span><br><span class="line">20 <span class="title">more</span> (外部命令)</span><br><span class="line">逐屏显示</span><br><span class="line"><span class="title">more</span> <span class="title">c:test</span>.<span class="title">txt</span>     #逐屏显示 <span class="title">c:test</span>.<span class="title">txt</span> 的文件内容</span><br><span class="line"></span><br><span class="line">21 <span class="title">tree</span></span><br><span class="line">显示目录结构</span><br><span class="line"><span class="title">tree</span> <span class="title">d</span>:             #显示<span class="title">D</span>盘的文件目录结构</span><br><span class="line"></span><br><span class="line">22 &amp;</span><br><span class="line">顺序执行多条命令，而不管命令是否执行成功</span><br><span class="line"></span><br><span class="line">23 &amp;&amp;</span><br><span class="line">顺序执行多条命令，当碰到执行出错的命令后将不执行后面的命令</span><br><span class="line"><span class="title">find</span> "<span class="title">ok</span>" <span class="title">c:test</span>.<span class="title">txt</span> &amp;&amp; <span class="title">echo</span> 成功</span><br><span class="line">如果找到了"<span class="title">ok</span>"字样，就显示"成功"，找不到就不显示</span><br><span class="line"></span><br><span class="line">24 ||</span><br><span class="line">顺序执行多条命令，当碰到执行正确的命令后将不执行后面的命令</span><br><span class="line"><span class="title">find</span> "<span class="title">ok</span>" <span class="title">c:test</span>.<span class="title">txt</span> || <span class="title">echo</span> 不成功</span><br><span class="line">如果找不到"<span class="title">ok</span>"字样，就显示"不成功"，找到了就不显示</span><br><span class="line"></span><br><span class="line">25 |</span><br><span class="line">管道命令</span><br><span class="line"><span class="title">dir</span> *.* /<span class="title">s</span>/<span class="title">a</span> | <span class="title">find</span> /<span class="title">c</span> ".<span class="title">exe</span>"</span><br><span class="line">管道命令表示先执行 <span class="title">dir</span> 命令，对其输出的结果执行后面的 <span class="title">find</span> 命令</span><br><span class="line">该命令行结果：输出当前文件夹及所有子文件夹里的.<span class="title">exe</span>文件的个数</span><br><span class="line"><span class="title">type</span> <span class="title">c:test</span>.<span class="title">txt</span>|<span class="title">more</span></span><br><span class="line">这个和 <span class="title">more</span> <span class="title">c:test</span>.<span class="title">txt</span> 的效果是一样的</span><br><span class="line"></span><br><span class="line">26 &gt; 和 &gt;&gt;</span><br><span class="line">输出重定向命令</span><br><span class="line">&gt; 清除文件中原有的内容后再写入</span><br><span class="line">&gt;&gt; 追加内容到文件末尾，而不会清除原有的内容</span><br><span class="line">主要将本来显示在屏幕上的内容输出到指定文件中</span><br><span class="line">指定文件如果不存在，则自动生成该文件</span><br><span class="line"><span class="title">type</span> <span class="title">c:test</span>.<span class="title">txt</span> &gt;<span class="title">prn</span></span><br><span class="line">屏幕上不显示文件内容，转向输出到打印机</span><br><span class="line"><span class="title">echo</span> <span class="title">hello</span> <span class="title">world</span>&gt;<span class="title">con</span></span><br><span class="line">在屏幕上显示<span class="title">hello</span> <span class="title">world</span>，实际上所有输出都是默认 &gt;<span class="title">con</span> 的</span><br><span class="line"><span class="title">copy</span> <span class="title">c:test</span>.<span class="title">txt</span> <span class="title">f</span>: &gt;<span class="title">nul</span></span><br><span class="line">拷贝文件，并且不显示"文件复制成功"的提示信息，但如果<span class="title">f</span>盘不存在，还是会显示出错信息</span><br><span class="line"><span class="title">copy</span> <span class="title">c:test</span>.<span class="title">txt</span> <span class="title">f</span>: &gt;<span class="title">nul</span> 2&gt;<span class="title">nul</span></span><br><span class="line">不显示”文件复制成功”的提示信息，并且<span class="title">f</span>盘不存在的话，也不显示错误提示信息</span><br><span class="line"><span class="title">echo</span> ^^<span class="title">W</span> ^&gt; ^<span class="title">W</span>&gt;<span class="title">c:test</span>.<span class="title">txt</span></span><br><span class="line">生成的文件内容为 ^<span class="title">W</span> &gt; <span class="title">W</span></span><br><span class="line">^ 和 &gt; 是控制命令，要把它们输出到文件，必须在前面加个 ^ 符号</span><br><span class="line"></span><br><span class="line">27 &lt;</span><br><span class="line">从文件中获得输入信息，而不是从屏幕上</span><br><span class="line">一般用于 <span class="title">date</span> <span class="title">time</span> <span class="title">label</span> 等需要等待输入的命令</span><br><span class="line">@<span class="title">echo</span> <span class="title">off</span></span><br><span class="line"><span class="title">echo</span> 2005-05-01&gt;<span class="title">temp.txt</span></span><br><span class="line"><span class="title">date</span> &lt;<span class="title">temp.txt</span></span><br><span class="line"><span class="title">del</span> <span class="title">temp.txt</span></span><br><span class="line">这样就可以不等待输入直接修改当前日期</span><br><span class="line"></span><br><span class="line">28 %0 %1 %2 %3 %4 %5 %6 %7 %8 %9 %*</span><br><span class="line">命令行传递给批处理的参数</span><br><span class="line">%0 批处理文件本身</span><br><span class="line">%1 第一个参数</span><br><span class="line">%9 第九个参数</span><br><span class="line">%* 从第一个参数开始的所有参数</span><br><span class="line"></span><br><span class="line">批参数(%<span class="title">n</span>)的替代已被增强。您可以使用以下语法:</span><br><span class="line"></span><br><span class="line">     %~1          - 删除引号(")，扩充 %1</span><br><span class="line">     %~<span class="title">f1</span>         - 将 %1 扩充到一个完全合格的路径名</span><br><span class="line">     %~<span class="title">d1</span>         - 仅将 %1 扩充到一个驱动器号</span><br><span class="line">     %~<span class="title">p1</span>         - 仅将 %1 扩充到一个路径</span><br><span class="line">     %~<span class="title">n1</span>         - 仅将 %1 扩充到一个文件名</span><br><span class="line">     %~<span class="title">x1</span>         - 仅将 %1 扩充到一个文件扩展名</span><br><span class="line">     %~<span class="title">s1</span>         - 扩充的路径指含有短名</span><br><span class="line">     %~<span class="title">a1</span>         - 将 %1 扩充到文件属性</span><br><span class="line">     %~<span class="title">t1</span>         - 将 %1 扩充到文件的日期/时间</span><br><span class="line">     %~<span class="title">z1</span>         - 将 %1 扩充到文件的大小</span><br><span class="line">     %~$<span class="title">PATH</span> : 1 - 查找列在 <span class="title">PATH</span> 环境变量的目录，并将 %1</span><br><span class="line">                   扩充到找到的第一个完全合格的名称。如果环境</span><br><span class="line">                   变量名未被定义，或者没有找到文件，此组合键会</span><br><span class="line">                   扩充到空字符串</span><br><span class="line"></span><br><span class="line">可以组合修定符来取得多重结果:</span><br><span class="line"></span><br><span class="line">    %~<span class="title">dp1</span>        - 只将 %1 扩展到驱动器号和路径</span><br><span class="line">    %~<span class="title">nx1</span>        - 只将 %1 扩展到文件名和扩展名</span><br><span class="line">    %~<span class="title">dp</span>$<span class="title">PATH</span>:1 - 在列在 <span class="title">PATH</span> 环境变量中的目录里查找 %1，</span><br><span class="line">                   并扩展到找到的第一个文件的驱动器号和路径。</span><br><span class="line">    %~<span class="title">ftza1</span>      - 将 %1 扩展到类似 <span class="title">DIR</span> 的输出行。</span><br><span class="line">可以参照 <span class="title">call</span>/? 或 <span class="title">for</span>/? 看出每个参数的含意</span><br><span class="line"><span class="title">echo</span> <span class="title">load</span> "%%1" "%%2"&gt;<span class="title">c:test</span>.<span class="title">txt</span></span><br><span class="line">生成的文件内容为 <span class="title">load</span> "%1" "%2"</span><br><span class="line">批处理文件里，用这个格式把命令行参数输出到文件</span><br><span class="line"></span><br><span class="line">29 <span class="title">if</span></span><br><span class="line">判断命令</span><br><span class="line"><span class="title">if</span> "%1"=="/<span class="title">a</span>" <span class="title">echo</span> 第一个参数是/<span class="title">a</span></span><br><span class="line"><span class="title">if</span> /<span class="title">i</span> "%1" <span class="title">equ</span> "/<span class="title">a</span>" <span class="title">echo</span> 第一个参数是/<span class="title">a</span></span><br><span class="line">/<span class="title">i</span> 表示不区分大小写，<span class="title">equ</span> 和 == 是一样的，其它运算符参见 <span class="title">if</span>/?</span><br><span class="line"><span class="title">if</span> <span class="title">exist</span> <span class="title">c:test</span>.<span class="title">bat</span> <span class="title">echo</span> 存在<span class="title">c:test</span>.<span class="title">bat</span>文件</span><br><span class="line"><span class="title">if</span> <span class="title">not</span> <span class="title">exist</span> <span class="title">c:windows</span> (</span><br><span class="line">     <span class="title">echo</span> 不存在<span class="title">c:windows</span>文件夹</span><br><span class="line">     )</span><br><span class="line"><span class="title">if</span> <span class="title">exist</span> <span class="title">c:test</span>.<span class="title">bat</span> (</span><br><span class="line">     <span class="title">echo</span> 存在<span class="title">c:test</span>.<span class="title">bat</span></span><br><span class="line">     ) <span class="title">else</span> (</span><br><span class="line">     <span class="title">echo</span> 不存在<span class="title">c:test</span>.<span class="title">bat</span></span><br><span class="line">     )</span><br><span class="line"></span><br><span class="line">30 <span class="title">setlocal</span> 和 <span class="title">endlocal</span></span><br><span class="line">设置”命令扩展名”和”延缓环境变量扩充”</span><br><span class="line"><span class="title">SETLOCAL</span> <span class="title">ENABLEEXTENSIONS</span>             #启用"命令扩展名"</span><br><span class="line"><span class="title">SETLOCAL</span> <span class="title">DISABLEEXTENSIONS</span>            #停用"命令扩展名"</span><br><span class="line"><span class="title">SETLOCAL</span> <span class="title">ENABLEDELAYEDEXPANSION</span>       #启用"延缓环境变量扩充"</span><br><span class="line"><span class="title">SETLOCAL</span> <span class="title">DISABLEDELAYEDEXPANSION</span>      #停用"延缓环境变量扩充"</span><br><span class="line"><span class="title">ENDLOCAL</span>                              #恢复到使用<span class="title">SETLOCAL</span>语句以前的状态</span><br><span class="line">“命令扩展名”默认为启用</span><br><span class="line">“延缓环境变量扩充”默认为停用</span><br><span class="line">批处理结束系统会自动恢复默认值</span><br><span class="line">可以修改注册表以禁用"命令扩展名"，详见 <span class="title">cmd</span> /? 。所以用到"命令扩展名"的程</span><br><span class="line">序，建议在开头和结尾加上 <span class="title">SETLOCAL</span> <span class="title">ENABLEEXTENSIONS</span> 和 <span class="title">ENDLOCAL</span> 语句，以确</span><br><span class="line">保程序能在其它系统上正确运行</span><br><span class="line">"延缓环境变量扩充"主要用于 <span class="title">if</span> 和 <span class="title">for</span> 的符合语句，在 <span class="title">set</span> 的说明里有其实用例程</span><br><span class="line"></span><br><span class="line">31 <span class="title">set</span></span><br><span class="line">设置变量</span><br><span class="line">引用变量可在变量名前后加 % ，即 %变量名%</span><br><span class="line"><span class="title">set</span>                     #显示目前所有可用的变量，包括系统变量和自定义的变量</span><br><span class="line"><span class="title">echo</span> %<span class="title">SystemDrive</span>%      #显示系统盘盘符。系统变量可以直接引用</span><br><span class="line"><span class="title">set</span> <span class="title">p</span>                   #显示所有以<span class="title">p</span>开头的变量，要是一个也没有就设<span class="title">errorlevel</span>=1</span><br><span class="line"><span class="title">set</span> <span class="title">p</span>=<span class="title">aa1bb1aa2bb2</span>      #设置变量<span class="title">p</span>，并赋值为 = 后面的字符串，即<span class="title">aa1bb1aa2bb2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>%                #显示变量<span class="title">p</span>代表的字符串，即<span class="title">aa1bb1aa2bb2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>:~6%             #显示变量<span class="title">p</span>中第6个字符以后的所有字符，即<span class="title">aa2bb2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>:~6,3%           #显示第6个字符以后的3个字符，即<span class="title">aa2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>:~0,3%           #显示前3个字符，即<span class="title">aa1</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>:~-2%            #显示最后面的2个字符，即<span class="title">b2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>:~0,-2%          #显示除了最后2个字符以外的其它字符，即<span class="title">aa1bb1aa2b</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p:aa</span>=<span class="title">c</span>%           #用<span class="title">c</span>替换变量<span class="title">p</span>中所有的<span class="title">aa</span>，即显示<span class="title">c1bb1c2bb2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p:aa</span>=%            #将变量<span class="title">p</span>中的所有<span class="title">aa</span>字符串置换为空，即显示1<span class="title">bb12bb2</span></span><br><span class="line"><span class="title">echo</span> %<span class="title">p</span>:*<span class="title">bb</span>=<span class="title">c</span>%          #第一个<span class="title">bb</span>及其之前的所有字符被替换为<span class="title">c</span>，即显示<span class="title">c1aa2bb2</span></span><br><span class="line"><span class="title">set</span> <span class="title">p</span>=%<span class="title">p</span>:*<span class="title">bb</span>=<span class="title">c</span>%         #设置变量<span class="title">p</span>，赋值为 %<span class="title">p</span>:*<span class="title">bb</span>=<span class="title">c</span>% ，即<span class="title">c1aa2bb2</span></span><br><span class="line"><span class="title">set</span> /<span class="title">a</span> <span class="title">p</span>=39             #设置<span class="title">p</span>为数值型变量，值为39</span><br><span class="line"><span class="title">set</span> /<span class="title">a</span> <span class="title">p</span>=39/10          #支持运算符，有小数时用去尾法，39/10=3.9，去尾得3，<span class="title">p</span>=3</span><br><span class="line"><span class="title">set</span> /<span class="title">a</span> <span class="title">p</span>=<span class="title">p</span>/10           #用 /<span class="title">a</span> 参数时，在 = 后面的变量可以不加%直接引用</span><br><span class="line"><span class="title">set</span> /<span class="title">a</span> <span class="title">p</span>=”1&amp;0″          #”与”运算，要加引号。其它支持的运算符参见<span class="title">set</span>/?</span><br><span class="line"><span class="title">set</span> <span class="title">p</span>=                  #取消<span class="title">p</span>变量</span><br><span class="line"><span class="title">set</span> /<span class="title">p</span> <span class="title">p</span>=请输入</span><br><span class="line">屏幕上显示”请输入”，并会将输入的字符串赋值给变量<span class="title">p</span></span><br><span class="line">注意这条可以用来取代 <span class="title">choice</span> 命令</span><br><span class="line">注意变量在 <span class="title">if</span> 和 <span class="title">for</span> 的复合语句里是一次性全部替换的，如</span><br><span class="line">@<span class="title">echo</span> <span class="title">off</span></span><br><span class="line"><span class="title">set</span> <span class="title">p</span>=<span class="title">aaa</span></span><br><span class="line"><span class="title">if</span> %<span class="title">p</span>%==<span class="title">aaa</span> (</span><br><span class="line">     <span class="title">echo</span> %<span class="title">p</span>%</span><br><span class="line">     <span class="title">set</span> <span class="title">p</span>=<span class="title">bbb</span></span><br><span class="line">     <span class="title">echo</span> %<span class="title">p</span>%</span><br><span class="line">     )</span><br><span class="line">结果将显示</span><br><span class="line"><span class="title">aaa</span></span><br><span class="line"><span class="title">aaa</span></span><br><span class="line">因为在读取 <span class="title">if</span> 语句时已经将所有 %<span class="title">p</span>% 替换为<span class="title">aaa</span></span><br><span class="line">这里的"替换"，在 /? 帮助里就是指"扩充"、"环境变量扩充"</span><br><span class="line">可以启用”延缓环境变量扩充”，用 ! 来引用变量，即 !变量名!</span><br><span class="line">@<span class="title">echo</span> <span class="title">off</span></span><br><span class="line"><span class="title">SETLOCAL</span> <span class="title">ENABLEDELAYEDEXPANSION</span></span><br><span class="line"><span class="title">set</span> <span class="title">p</span>=<span class="title">aaa</span></span><br><span class="line"><span class="title">if</span> %<span class="title">p</span>%==<span class="title">aaa</span> (</span><br><span class="line">     <span class="title">echo</span> %<span class="title">p</span>%</span><br><span class="line">     <span class="title">set</span> <span class="title">p</span>=<span class="title">bbb</span></span><br><span class="line">     <span class="title">echo</span> !<span class="title">p</span>!</span><br><span class="line">     )</span><br><span class="line"><span class="title">ENDLOCAL</span></span><br><span class="line">结果将显示</span><br><span class="line"><span class="title">aaa</span></span><br><span class="line"><span class="title">bbb</span></span><br><span class="line">还有几个动态变量，运行 <span class="title">set</span> 看不到</span><br><span class="line">%<span class="title">CD</span>%                   #代表当前目录的字符串</span><br><span class="line">%<span class="title">DATE</span>%                 #当前日期</span><br><span class="line">%<span class="title">TIME</span>%                 #当前时间</span><br><span class="line">%<span class="title">RANDOM</span>%               #随机整数，介于0~32767</span><br><span class="line">%<span class="title">ERRORLEVEL</span>%           #当前 <span class="title">ERRORLEVEL</span> 值</span><br><span class="line">%<span class="title">CMDEXTVERSION</span>%        #当前命令处理器扩展名版本号</span><br><span class="line">%<span class="title">CMDCMDLINE</span>%           #调用命令处理器的原始命令行</span><br><span class="line">可以用<span class="title">echo</span>命令查看每个变量值，如 <span class="title">echo</span> %<span class="title">time</span>%</span><br><span class="line">注意 %<span class="title">time</span>% 精确到毫秒，在批处理需要延时处理时可以用到</span><br><span class="line"></span><br><span class="line">32 <span class="title">start</span></span><br><span class="line">批处理中调用外部程序的命令，否则等外部程序完成后才继续执行剩下的指令</span><br><span class="line"></span><br><span class="line">33 <span class="title">call</span></span><br><span class="line">批处理中调用另外一个批处理的命令，否则剩下的批处理指令将不会被执行</span><br><span class="line">有时有的应用程序用<span class="title">start</span>调用出错的，也可以<span class="title">call</span>调用</span><br><span class="line"></span><br><span class="line">34 <span class="title">choice</span> (外部命令)</span><br><span class="line">选择命令</span><br><span class="line">让用户输入一个字符，从而选择运行不同的命令，返回码<span class="title">errorlevel</span>为1234……</span><br><span class="line"><span class="title">win98</span>里是<span class="title">choice.com</span></span><br><span class="line"><span class="title">win2000pro</span>里没有，可以从<span class="title">win98</span>里拷过来</span><br><span class="line"><span class="title">win2003</span>里是<span class="title">choice.exe</span></span><br><span class="line"><span class="title">choice</span> /<span class="title">N</span> /<span class="title">C</span> <span class="title">y</span> /<span class="title">T</span> 5 /<span class="title">D</span> <span class="title">y</span>&gt;<span class="title">nul</span></span><br><span class="line">延时5秒</span><br><span class="line"></span><br><span class="line">35 <span class="title">assoc</span> 和 <span class="title">ftype</span></span><br><span class="line">文件关联</span><br><span class="line"><span class="title">assoc</span> 设置'文件扩展名'关联，关联到'文件类型'</span><br><span class="line"><span class="title">ftype</span> 设置'文件类型'关联，关联到'执行程序和参数'</span><br><span class="line">当你双击一个.<span class="title">txt</span>文件时，<span class="title">windows</span>并不是根据.<span class="title">txt</span>直接判断用 <span class="title">notepad.exe</span> 打开</span><br><span class="line">而是先判断.<span class="title">txt</span>属于 <span class="title">txtfile</span> '文件类型'</span><br><span class="line">再调用 <span class="title">txtfile</span> 关联的命令行 <span class="title">txtfile</span>=%<span class="title">SystemRoot</span>%<span class="title">system32NOTEPAD.EXE</span> %1</span><br><span class="line">可以在"文件夹选项"→"文件类型"里修改这2种关联</span><br><span class="line"><span class="title">assoc</span>            #显示所有'文件扩展名'关联</span><br><span class="line"><span class="title">assoc</span> .<span class="title">txt</span>       #显示.<span class="title">txt</span>代表的'文件类型'，结果显示 .<span class="title">txt</span>=<span class="title">txtfile</span></span><br><span class="line"><span class="title">assoc</span> .<span class="title">doc</span>       #显示.<span class="title">doc</span>代表的'文件类型'，结果显示 .<span class="title">doc</span>=<span class="title">Word.Document</span>.8</span><br><span class="line"><span class="title">assoc</span> .<span class="title">exe</span>       #显示.<span class="title">exe</span>代表的'文件类型'，结果显示 .<span class="title">exe</span>=<span class="title">exefile</span></span><br><span class="line"><span class="title">ftype</span>            #显示所有'文件类型'关联</span><br><span class="line"><span class="title">ftype</span> <span class="title">exefile</span>    #显示<span class="title">exefile</span>类型关联的命令行，结果显示 <span class="title">exefile</span>="%1" %*</span><br><span class="line"><span class="title">assoc</span> .<span class="title">txt</span>=<span class="title">Word.Document</span>.8</span><br><span class="line">设置.<span class="title">txt</span>为<span class="title">word</span>类型的文档，可以看到.<span class="title">txt</span>文件的图标都变了</span><br><span class="line"><span class="title">assoc</span> .<span class="title">txt</span>=<span class="title">txtfile</span></span><br><span class="line">恢复.<span class="title">txt</span>的正确关联</span><br><span class="line"><span class="title">ftype</span> <span class="title">exefile</span>="%1" %*</span><br><span class="line">恢复 <span class="title">exefile</span> 的正确关联</span><br><span class="line">如果该关联已经被破坏，可以运行 <span class="title">command.com</span> ，再输入这条命令</span><br><span class="line"></span><br><span class="line">36 <span class="title">pushd</span> 和 <span class="title">popd</span></span><br><span class="line">切换当前目录</span><br><span class="line">@<span class="title">echo</span> <span class="title">off</span></span><br><span class="line"><span class="title">c</span>: &amp; <span class="title">cd</span> &amp; <span class="title">md</span> <span class="title">mp3</span>        #在 <span class="title">C</span>: 建立 <span class="title">mp3</span> 文件夹</span><br><span class="line"><span class="title">md</span> <span class="title">d:mp4</span>                #在 <span class="title">D</span>: 建立 <span class="title">mp4</span> 文件夹</span><br><span class="line"><span class="title">cd</span> /<span class="title">d</span> <span class="title">d:mp4</span>             #更改当前目录为 <span class="title">d:mp4</span></span><br><span class="line"><span class="title">pushd</span> <span class="title">c:mp3</span>             #保存当前目录，并切换当前目录为 <span class="title">c:mp3</span></span><br><span class="line"><span class="title">popd</span>                     #恢复当前目录为刚才保存的 <span class="title">d:mp4</span></span><br><span class="line"></span><br><span class="line">37 <span class="title">for</span></span><br><span class="line">循环命令</span><br><span class="line">这个比较复杂，请对照 <span class="title">for</span>/? 来看</span><br><span class="line"><span class="title">for</span> %%<span class="title">i</span> <span class="title">in</span> (<span class="title">c</span>: <span class="title">d</span>: <span class="title">e</span>: <span class="title">f</span>:) <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span></span><br><span class="line">依次调用小括号里的每个字符串，执行 <span class="title">do</span> 后面的命令</span><br><span class="line">注意%%<span class="title">i</span>，在批处理中 <span class="title">for</span> 语句调用参数用2个%</span><br><span class="line">默认的字符串分隔符是"空格键"，"<span class="title">Tab</span>键"，"回车键"</span><br><span class="line"><span class="title">for</span> %%<span class="title">i</span> <span class="title">in</span> (*.<span class="title">txt</span>) <span class="title">do</span> <span class="title">find</span> "<span class="title">abc</span>" %%<span class="title">i</span></span><br><span class="line">对当前目录里所有的<span class="title">txt</span>文件执行 <span class="title">find</span> 命令</span><br><span class="line"><span class="title">for</span> /<span class="title">r</span> . %%<span class="title">i</span> <span class="title">in</span> (*.<span class="title">txt</span>) <span class="title">do</span> <span class="title">find</span> "<span class="title">abc</span>" %%<span class="title">i</span></span><br><span class="line">在当前目录和子目录里所有的.<span class="title">txt</span>文件中搜索包含 <span class="title">abc</span> 字符串的行</span><br><span class="line"><span class="title">for</span> /<span class="title">r</span> . %%<span class="title">i</span> <span class="title">in</span> (.) <span class="title">do</span> <span class="title">echo</span> %%~<span class="title">pni</span></span><br><span class="line">显示当前目录名和所有子目录名，包括路径，不包括盘符</span><br><span class="line"><span class="title">for</span> /<span class="title">r</span> <span class="title">d:mp3</span> %%<span class="title">i</span> <span class="title">in</span> (*.<span class="title">mp3</span>) <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span>&gt;&gt;<span class="title">d:mp3</span>.<span class="title">txt</span></span><br><span class="line">把 <span class="title">d:mp3</span> 及其子目录里的<span class="title">mp3</span>文件的文件名都存到 <span class="title">d:mp3</span>.<span class="title">txt</span> 里去</span><br><span class="line"><span class="title">for</span> /<span class="title">l</span> %%<span class="title">i</span> <span class="title">in</span> (2,1,8) <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span></span><br><span class="line">生成2345678的一串数字，2是数字序列的开头，8是结尾，1表示每次加1</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> %%<span class="title">i</span> <span class="title">in</span> ('<span class="title">set</span>') <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span></span><br><span class="line">对 <span class="title">set</span> 命令的输出结果循环调用，每行一个</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> "<span class="title">eol</span>=<span class="title">P</span>" %%<span class="title">i</span> <span class="title">in</span> ('<span class="title">set</span>') <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span></span><br><span class="line">取 <span class="title">set</span> 命令的输出结果，忽略以 <span class="title">P</span> 开头的那几行</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> %%<span class="title">i</span> <span class="title">in</span> (<span class="title">d:mp3</span>.<span class="title">txt</span>) <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span></span><br><span class="line">显示 <span class="title">d:mp3</span>.<span class="title">txt</span> 里的每个文件名，每行一个，不支持带空格的名称</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> "<span class="title">delims</span>=" %%<span class="title">i</span> <span class="title">in</span> (<span class="title">d:mp3</span>.<span class="title">txt</span>) <span class="title">do</span> <span class="title">echo</span> %%<span class="title">i</span></span><br><span class="line">显示 <span class="title">d:mp3</span>.<span class="title">txt</span> 里的每个文件名，每行一个，支持带空格的名称</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> "<span class="title">skip</span>=5 <span class="title">tokens</span>=4" %%<span class="title">a</span> <span class="title">in</span> ('<span class="title">dir</span>') <span class="title">do</span> <span class="title">echo</span> %%<span class="title">a</span></span><br><span class="line">对 <span class="title">dir</span> 命令的结果，跳过前面5行，余下的每行取第4列</span><br><span class="line">每列之间的分隔符为默认的"空格"</span><br><span class="line">可以注意到 <span class="title">dir</span> 命令输出的前5行是没有文件名的</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> "<span class="title">tokens</span>=1,2,3 <span class="title">delims</span>=- " %%<span class="title">a</span> <span class="title">in</span> ('<span class="title">date</span> /<span class="title">t</span>') <span class="title">do</span> (</span><br><span class="line">     <span class="title">echo</span> %%<span class="title">a</span></span><br><span class="line">     <span class="title">echo</span> %%<span class="title">b</span></span><br><span class="line">     <span class="title">echo</span> %%<span class="title">c</span></span><br><span class="line">     )</span><br><span class="line">对 <span class="title">date</span> /<span class="title">t</span> 的输出结果，每行取1、2、3列</span><br><span class="line">第一列对应指定的 %%<span class="title">a</span> ，后面的 %%<span class="title">b</span> 和 %%<span class="title">c</span> 是派生出来的，对应其它列</span><br><span class="line">分隔符指定为 - 和"空格"，注意 <span class="title">delims</span>=- 后面有个"空格"</span><br><span class="line">其中 <span class="title">tokens</span>=1,2,3 若用 <span class="title">tokens</span>=1-3 替换，效果是一样的</span><br><span class="line"><span class="title">for</span> /<span class="title">f</span> "<span class="title">tokens</span>=2* <span class="title">delims</span>=- " %%<span class="title">a</span> <span class="title">in</span> ('<span class="title">date</span> /<span class="title">t</span>') <span class="title">do</span> <span class="title">echo</span> %%<span class="title">b</span></span><br><span class="line">取第2列给 %%<span class="title">a</span> ，其后的列都给 %%<span class="title">b</span></span><br><span class="line"></span><br><span class="line">38 <span class="title">subst</span> (外部命令)</span><br><span class="line">映射磁盘。</span><br><span class="line"><span class="title">subst</span> <span class="title">z</span>: <span class="title">serverd</span>      #这样输入<span class="title">z</span>:就可以访问<span class="title">serverd</span>了</span><br><span class="line"><span class="title">subst</span> <span class="title">z</span>: /<span class="title">d</span>              #取消该映射</span><br><span class="line"><span class="title">subst</span>                    #显示目前所有的映时</span><br><span class="line"></span><br><span class="line">39 <span class="title">xcopy</span> (外部命令)</span><br><span class="line">文件拷贝</span><br><span class="line"><span class="title">xcopy</span> <span class="title">d:mp3</span> <span class="title">e:mp3</span> /<span class="title">s</span>/<span class="title">e</span>/<span class="title">i</span>/<span class="title">y</span></span><br><span class="line">复制 <span class="title">d:mp3</span> 文件夹、所有子文件夹和文件到 <span class="title">e</span>: ，覆盖已有文件</span><br><span class="line">加 /<span class="title">i</span> 表示如果 <span class="title">e</span>: 没有 <span class="title">mp3</span> 文件夹就自动新建一个，否则会有询问</span></span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[在Windows中善用批处理可以简化很多重复工作]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[DevOps实用资源分享]]></title>
    <link href="http://wsgzao.github.io/post/devops/"/>
    <id>http://wsgzao.github.io/post/devops/</id>
    <published>2016-03-25T08:31:24.000Z</published>
    <updated>2016-03-25T08:23:52.278Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/o2t5S8at.png" alt=""></p>
<h2 id="前言">前言</h2><p>其实一直很想整理一篇DevOps学习资源导航类文章，主要原因除了自己的懒惰外，技术的不断创新也让未来更加值得期待。虽然在大多数情况下我们既无法面面俱到也突破不了点的极限，但是这也不会阻碍我们对于学习的热爱。梳理这篇文章也是希望自己能够始终保持学习的态度，完善自己的知识体系，坚持技术沉淀的过程，享受点滴进步的快乐。</p>
<blockquote>
<p>DevOps是一个持续改进的过程</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2016年03月25日 - 增加InfoQ，神秘的程序员<br>2016年02月14日 - 增加Forvo，Coursera，自强学堂<br>2016年01月04日 - 增加利器<br>2015年12月22日 - 增加极客学院，网易公开课，曹政微信订阅号<br>2015年10月29日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/devops/" target="_blank" rel="external">http://wsgzao.github.io/post/devops/</a></p>
<hr>
<h2 id="图书">图书</h2><blockquote>
<p>我推荐大家尝试使用Kindle改变自己阅读的习惯</p>
</blockquote>
<p>Kindle Paperwhite - <a href="http://www.amazon.cn/" target="_blank" rel="external">http://www.amazon.cn/</a></p>
<h2 id="搜索引擎">搜索引擎</h2><blockquote>
<p>善用搜索引擎，穿过一堵墙你的知识面可能会更加立体</p>
</blockquote>
<p>FQ - <a href="https://wsgzao.github.io/post/fq/" target="_blank" rel="external">https://wsgzao.github.io/post/fq/</a></p>
<ul>
<li>翻墙是一种学习态度</li>
</ul>
<p>Google - <a href="https://www.google.com/" target="_blank" rel="external">https://www.google.com/</a><br>Google Images - <a href="https://images.google.com/" target="_blank" rel="external">https://images.google.com/</a><br>Google Scholar - <a href="https://scholar.google.com/" target="_blank" rel="external">https://scholar.google.com/</a></p>
<ul>
<li>事实证明大多数情况下还是Google最懂我们的心</li>
</ul>
<p>WikipediA - <a href="https://www.wikipedia.org/" target="_blank" rel="external">https://www.wikipedia.org/</a></p>
<ul>
<li>试着把维基百科作为你的首选，弱化自己对于百度的依赖</li>
</ul>
<p>Forvo - <a href="http://zh.forvo.com/" target="_blank" rel="external">http://zh.forvo.com/</a></p>
<ul>
<li>妈妈再也不用担心我不会发音了，让Forvo来做你的发音指南</li>
</ul>
<h2 id="安全">安全</h2><blockquote>
<p>黑客的思路往往让人眼前一亮，多向大牛们学习</p>
</blockquote>
<p>知道创宇研发技能表 - <a href="http://blog.knownsec.com/Knownsec_RD_Checklist/" target="_blank" rel="external">http://blog.knownsec.com/Knownsec_RD_Checklist/</a></p>
<ul>
<li>感谢<a href="http://evilcos.me/" target="_blank" rel="external">@余弦</a></li>
</ul>
<p>纳威安全导航 - <a href="http://navisec.it/" target="_blank" rel="external">http://navisec.it/</a></p>
<ul>
<li>乌云，FreeBuf，i春秋等都值得你多逛逛</li>
</ul>
<h2 id="阅读订阅">阅读订阅</h2><blockquote>
<p>信息爆炸的时代如何过滤噪音很重要</p>
</blockquote>
<p>知乎日报 - <a href="http://daily.zhihu.com/" target="_blank" rel="external">http://daily.zhihu.com/</a></p>
<ul>
<li>每天 3 次，每次 7 分钟</li>
<li>我习惯下班后离线阅读生活中的美</li>
<li>读读日报和好奇心日报也推荐大家试试</li>
</ul>
<p>开发者头条 - <a href="http://toutiao.io/" target="_blank" rel="external">http://toutiao.io/</a></p>
<ul>
<li>码农周刊团队为程序员设计的阅读分享平台</li>
<li>极客头条，稀土掘金，伯乐在线等也是类似的</li>
</ul>
<p>湾区日报 - <a href="http://wanqu.co/" target="_blank" rel="external">http://wanqu.co/</a></p>
<ul>
<li>关注创业与技术,每天推送5篇优质英文文章</li>
<li>坚持向来不易，锻炼下英文阅读能力也不错哦</li>
</ul>
<p>深蓝阅读 - <a href="http://bluereader.org/" target="_blank" rel="external">http://bluereader.org/</a></p>
<ul>
<li>简单好用的内容订阅平台</li>
</ul>
<p>利器 - <a href="http://liqi.io/" target="_blank" rel="external">http://liqi.io/</a></p>
<ul>
<li>创造者和他们的工具</li>
</ul>
<h2 id="社区">社区</h2><blockquote>
<p>Way to Explore &amp; Way too Extreme</p>
</blockquote>
<p>V2EX - <a href="http://www.v2ex.com/" target="_blank" rel="external">http://www.v2ex.com/</a></p>
<ul>
<li>一个与众不同的社区</li>
</ul>
<p>Stack Overflow - <a href="http://stackoverflow.com/" target="_blank" rel="external">http://stackoverflow.com/</a></p>
<ul>
<li>如果你使用Google相信会在这里看到不少高质量的答案</li>
</ul>
<h2 id="微信订阅号">微信订阅号</h2><p>小道消息 - WebNotes</p>
<ul>
<li>冯大辉的小道消息已经成为微信订阅号的标杆之一</li>
</ul>
<p>曹政 - caozsay</p>
<ul>
<li>曹大做为一个有故事的人，愿意分享更愿意交流，已经很难得了</li>
</ul>
<p>高效运维 - greatops</p>
<ul>
<li>萧田国组织维护的”高效运维”公众号每周多篇干货满满的原创好文</li>
</ul>
<p>神秘的程序员 - coderstory</p>
<ul>
<li>西乔和霍炬共同创作的程序员主题漫画，为生活添加一抹色彩</li>
</ul>
<p>InfoQ - infoqchina</p>
<ul>
<li>InfoQ在微信端的推广和推送质量都是满满的诚意</li>
</ul>
<h2 id="OJ">OJ</h2><blockquote>
<p>ACM和奥数类似属于有天赋的你们，但实际工作中更要注重学习方法和问题总结</p>
</blockquote>
<p>LeetCode - <a href="http://leetcode.com/" target="_blank" rel="external">http://leetcode.com/</a></p>
<ul>
<li>leetcode 是一个针对程序员的面试准备平台</li>
</ul>
<p>ACM之家 - <a href="http://www.acmerblog.com/" target="_blank" rel="external">http://www.acmerblog.com/</a></p>
<ul>
<li>POJ、HDU、ZOJ等在线OJ解题报告，相关经典算法收集整理</li>
</ul>
<p>牛客网 - <a href="http://www.nowcoder.com/" target="_blank" rel="external">http://www.nowcoder.com/</a></p>
<ul>
<li>一个新的专业IT笔试面试备考平台</li>
</ul>
<h2 id="信息聚合">信息聚合</h2><blockquote>
<p>分享一些实用的技术学习路线</p>
</blockquote>
<p>InfoQ - <a href="http://www.infoq.com/" target="_blank" rel="external">http://www.infoq.com/</a></p>
<ul>
<li>促进软件开发领域知识与创新的传播</li>
</ul>
<p>鸟哥的Linux私房菜 - <a href="http://vbird.dic.ksu.edu.tw/" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/</a></p>
<ul>
<li>我也是跟着鸟哥的文章进入Linux</li>
</ul>
<p>存储基础知识 - <a href="https://community.emc.com/thread/176852" target="_blank" rel="external">https://community.emc.com/thread/176852</a></p>
<ul>
<li>EMC官方整理的教程，由浅入深知识面也很广</li>
</ul>
<p>菜鸟教程 - <a href="http://www.runoob.com/" target="_blank" rel="external">http://www.runoob.com/</a></p>
<ul>
<li>学的不仅是技术，更是梦想</li>
<li>同类型还有w3school等</li>
</ul>
<p>自强学堂 - <a href="http://www.ziqiangxuetang.com/" target="_blank" rel="external">http://www.ziqiangxuetang.com/</a></p>
<ul>
<li>感谢@涂伟忠，Django可是自强学堂的招牌教程</li>
</ul>
<p>优设 - <a href="http://hao.uisdc.com/" target="_blank" rel="external">http://hao.uisdc.com/</a></p>
<ul>
<li>以前很喜欢腾讯CDC的设计理念，现在老了只能偶尔瞅瞅</li>
</ul>
<p>VMware - <a href="http://www.vmware.com/cn/support/support-resources/pubs/" target="_blank" rel="external">http://www.vmware.com/cn/support/support-resources/pubs/</a></p>
<ul>
<li>没有贴图还能把虚拟化手册写得灰常清晰具有可操作性，VMware必须得算一个</li>
<li>当然也推荐大家阅读RedHat，SuSE，Oracle等官方帮助文档</li>
</ul>
<h2 id="Blog">Blog</h2><blockquote>
<p>推荐的Blog不多，希望大家找到适合自己的博客</p>
</blockquote>
<p>编程随想 - <a href="https://program-think.blogspot.com/" target="_blank" rel="external">https://program-think.blogspot.com/</a></p>
<ul>
<li>你应该了解一些真实的信息</li>
</ul>
<p>阮一峰 - <a href="http://www.ruanyifeng.com/" target="_blank" rel="external">http://www.ruanyifeng.com/</a></p>
<ul>
<li>坚持分享技术和生活的典范</li>
</ul>
<p>酷壳 - <a href="http://coolshell.cn/" target="_blank" rel="external">http://coolshell.cn/</a></p>
<ul>
<li>坚持更新技术类Blog的人或团队越来越少，这也是认真做事的态度</li>
</ul>
<h2 id="在线教育">在线教育</h2><p>极客学院 - <a href="http://wiki.jikexueyuan.com/" target="_blank" rel="external">http://wiki.jikexueyuan.com/</a></p>
<ul>
<li>在线教育类网站很多，我不做太多推荐，极客学院Wiki是一个好产品</li>
</ul>
<p>网易公开课 - <a href="http://open.163.com/" target="_blank" rel="external">http://open.163.com/</a></p>
<ul>
<li>国内外优质的MOOC资源很丰富，一起系统的完善自己的知识体系吧</li>
</ul>
<p>Coursera - <a href="https://www.coursera.org/" target="_blank" rel="external">https://www.coursera.org/</a></p>
<ul>
<li>在网上学习全世界最好的课程</li>
<li>在国外生活的同学几乎都会推荐的网络学习平台</li>
</ul>
<h2 id="其它">其它</h2><blockquote>
<p>还有很多需要耐心等待时间的验证</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[DevOps是一个持续改进的过程]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Puppet安装配置小结]]></title>
    <link href="http://wsgzao.github.io/post/puppet/"/>
    <id>http://wsgzao.github.io/post/puppet/</id>
    <published>2016-03-25T08:22:32.000Z</published>
    <updated>2016-03-25T08:29:11.504Z</updated>
    <content type="html"><![CDATA[<p><img src="https://upload.wikimedia.org/wikipedia/en/c/c5/Puppet_Labs_Logo.png" alt=""></p>
<h2 id="前言">前言</h2><p>Puppet这个词实际上包括了两层含义：它既代表编写这种代码的语言，也代表对基础设施进行管理的平台。做运维总是靠流程驱动和事故驱动，无论是生产还是测试环境配置上的不统一使得团队的整体效率大打折扣。能够在开发者的笔记本或是在QA环境下正常工作的代码，往往在部署到生产环境后就会出现问题，最糟糕的是没人知道问题的根源在哪里。而Puppet是一个优秀的基础设施管理平台，可以让每个系统管理员更高效地完成工作，Puppet能够为共享的代码库提供一种强力的粘合剂，以统一不同团队的工作。Puppet可以帮助处于各种不同状况的团队增强协作能力，以进行软件开发和发布的——这种工作方式的演变通常被称做DevOps。</p>
<blockquote>
<p>Puppet是最佳的集中配置管理系统之一</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年03月25日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/puppet/" target="_blank" rel="external">http://wsgzao.github.io/post/puppet/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Puppet Labs Documentation - <a href="https://docs.puppetlabs.com/" target="_blank" rel="external">https://docs.puppetlabs.com/</a><br>Puppet Forge - <a href="https://forge.puppetlabs.com/" target="_blank" rel="external">https://forge.puppetlabs.com/</a></p>
<h2 id="工作原理">工作原理</h2><blockquote>
<p>Puppet采用了非常简单的C/S架构，所有数据的交互都通过SSL进行，以保证安全</p>
</blockquote>
<p><img src="http://ipad-cms.csdn.net/cms/attachment/201209/5048569d92738.jpg" alt=""></p>
<ol>
<li>客户端Puppetd向Master发起认证请求，或使用带签名的证书。</li>
<li>Master告诉Client你是合法的。</li>
<li>客户端Puppetd调用Facter，Facter探测出主机的一些变量，例如主机名、内存大小、IP地址等。Puppetd将这些信息通过SSL连接发送到服务器端。</li>
<li>服务器端的Puppet Master检测客户端的主机名，然后找到manifest对应的node配置，并对该部分内容进行解析。Facter送过来的信息可以作为变量处 理，node牵涉到的代码才解析，其他没牵涉的代码不解析。解析分为几个阶段，首先是语法检查，如果语法错误就报错；如果语法没错，就继续解析，解析的结 果生成一个中间的“伪代码”（catelog），然后把伪代码发给客户端。</li>
<li>客户端接收到“伪代码”，并且执行。</li>
<li>客户端在执行时判断有没有File文件，如果有，则向fileserver发起请求。</li>
<li>客户端判断有没有配置Report，如果已配置，则把执行结果发送给服务器。</li>
<li>服务器端把客户端的执行结果写入日志，并发送给报告系统。</li>
</ol>
<p>这就是puppet的工作流程，最重要的莫过于puppet-master来管理node的配置文件。</p>
<h2 id="准备工作">准备工作</h2><blockquote>
<p>以rhel6.3为例，前期核心在于配置yum，更多技巧可以参考以下文章</p>
</blockquote>
<p>RHEL(Red Hat Enterprise Linux)配置yum源 - <a href="http://wsgzao.github.io/post/yum/" target="_blank" rel="external">http://wsgzao.github.io/post/yum/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#关闭iptables</span></span><br><span class="line">/etc/init.d/iptables stop</span><br><span class="line">chkconfig iptables off</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭selinux</span></span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">sed -i <span class="string">'s/SELINUX=enforcing/SELINUX=disabled/'</span> /etc/selinux/config  </span><br><span class="line"></span><br><span class="line"><span class="comment">#NTP同步</span></span><br><span class="line">ntpdate <span class="number">0</span>.rhel.pool.ntp.org</span><br><span class="line">crontab <span class="operator">-e</span></span><br><span class="line"><span class="number">0</span> <span class="number">0</span> * * * /usr/sbin/ntpdate <span class="number">0</span>.rhel.pool.ntp.org;/usr/sbin/hwclock -w</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加hosts</span></span><br><span class="line">vi /etc/hosts</span><br><span class="line"><span class="number">192.168</span>.<span class="number">1.10</span> master</span><br><span class="line"><span class="number">192.168</span>.<span class="number">1.11</span> client</span><br><span class="line"></span><br><span class="line"><span class="comment">#puppet</span></span><br><span class="line">http://downloads.puppetlabs.com/puppet/</span><br><span class="line"><span class="comment">#facter</span></span><br><span class="line">http://downloads.puppetlabs.com/facter/</span><br><span class="line"><span class="comment">#ruby</span></span><br><span class="line">https://www.ruby-lang.org/zh_cn/downloads/</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置CentOS YUM源</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line">cp rhel-source.repo rhel-source.repo.bak</span><br><span class="line">vi rhel-source.repo</span><br><span class="line"></span><br><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Base</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Updates</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Extras</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">6</span></span><br><span class="line"></span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span>-Plus</span><br><span class="line">baseurl=http://centos.ustc.edu.cn/centos/<span class="number">6</span>/os/x86_64/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line">yum repolist</span><br></pre></td></tr></table></figure>
<h2 id="Puppet_Server">Puppet Server</h2><blockquote>
<p>如果可以访问外网并配置repos，直接yum install puppetserver简单粗暴</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Enable the Puppet Labs Package Repository</span></span><br><span class="line">rpm -ivh https://yum.puppetlabs.com/puppetlabs-release-el-<span class="number">6</span>.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装yum-plugin-downloadonly插件</span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line"></span><br><span class="line"><span class="comment">#yum install puppetserver</span></span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/puppetserver puppetserver</span><br><span class="line"></span><br><span class="line">Total download size: <span class="number">73</span> M</span><br><span class="line">Is this ok [y/N]: y</span><br><span class="line">Downloading Packages:</span><br><span class="line">(<span class="number">1</span>/<span class="number">22</span>): augeas-libs-<span class="number">1.0</span>.<span class="number">0</span>-<span class="number">10</span>.el6.x86_64.rpm          </span><br><span class="line">(<span class="number">2</span>/<span class="number">22</span>): compat-readline5-<span class="number">5.2</span>-<span class="number">17.1</span>.el6.x86_64.rpm     </span><br><span class="line">(<span class="number">3</span>/<span class="number">22</span>): facter-<span class="number">2.4</span>.<span class="number">6</span>-<span class="number">1</span>.el6.x86_64.rpm                </span><br><span class="line">(<span class="number">4</span>/<span class="number">22</span>): hiera-<span class="number">1.3</span>.<span class="number">4</span>-<span class="number">1</span>.el6.noarch.rpm                 </span><br><span class="line">(<span class="number">5</span>/<span class="number">22</span>): java-<span class="number">1.7</span>.<span class="number">0</span>-openjdk-<span class="number">1.7</span>.<span class="number">0.79</span>-<span class="number">2.5</span>.<span class="number">5.4</span>.el6.x86_6</span><br><span class="line">(<span class="number">6</span>/<span class="number">22</span>): libjpeg-turbo-<span class="number">1.2</span>.<span class="number">1</span>-<span class="number">3</span>.el6_5.x86_64.rpm       </span><br><span class="line">(<span class="number">7</span>/<span class="number">22</span>): libselinux-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.i686.rpm           </span><br><span class="line">(<span class="number">8</span>/<span class="number">22</span>): libselinux-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm         </span><br><span class="line">(<span class="number">9</span>/<span class="number">22</span>): libselinux-devel-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm   </span><br><span class="line">(<span class="number">10</span>/<span class="number">22</span>): libselinux-python-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm </span><br><span class="line">(<span class="number">11</span>/<span class="number">22</span>): libselinux-ruby-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm   </span><br><span class="line">(<span class="number">12</span>/<span class="number">22</span>): libselinux-utils-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm  </span><br><span class="line">(<span class="number">13</span>/<span class="number">22</span>): puppet-<span class="number">3.8</span>.<span class="number">6</span>-<span class="number">1</span>.el6.noarch.rpm               </span><br><span class="line">(<span class="number">14</span>/<span class="number">22</span>): puppetserver-<span class="number">1.1</span>.<span class="number">3</span>-<span class="number">1</span>.el6.noarch.rpm         </span><br><span class="line">(<span class="number">15</span>/<span class="number">22</span>): ruby-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm           </span><br><span class="line">(<span class="number">16</span>/<span class="number">22</span>): ruby-augeas-<span class="number">0.4</span>.<span class="number">1</span>-<span class="number">3</span>.el6.x86_64.rpm          </span><br><span class="line">(<span class="number">17</span>/<span class="number">22</span>): ruby-irb-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm       </span><br><span class="line">(<span class="number">18</span>/<span class="number">22</span>): ruby-libs-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm      </span><br><span class="line">(<span class="number">19</span>/<span class="number">22</span>): ruby-rdoc-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm      </span><br><span class="line">(<span class="number">20</span>/<span class="number">22</span>): ruby-shadow-<span class="number">2.2</span>.<span class="number">0</span>-<span class="number">2</span>.el6.x86_64.rpm          </span><br><span class="line">(<span class="number">21</span>/<span class="number">22</span>): rubygem-json-<span class="number">1.5</span>.<span class="number">5</span>-<span class="number">3</span>.el6.x86_64.rpm         </span><br><span class="line">(<span class="number">22</span>/<span class="number">22</span>): rubygems-<span class="number">1.3</span>.<span class="number">7</span>-<span class="number">5</span>.el6.noarch.rpm             </span><br><span class="line"></span><br><span class="line">master@/tmp/puppetserver<span class="comment">#rpm -Uvh *</span></span><br><span class="line">warning: augeas-libs-<span class="number">1.0</span>.<span class="number">0</span>-<span class="number">10</span>.el6.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY</span><br><span class="line">warning: facter-<span class="number">2.4</span>.<span class="number">6</span>-<span class="number">1</span>.el6.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID <span class="number">4</span>bd6ec30: NOKEY</span><br><span class="line">Preparing...                <span class="comment">########################################### [100%]</span></span><br><span class="line">   <span class="number">1</span>:libselinux             <span class="comment">########################################### [  5%]</span></span><br><span class="line">   <span class="number">2</span>:augeas-libs            <span class="comment">########################################### [  9%]</span></span><br><span class="line">   <span class="number">3</span>:libselinux-ruby        <span class="comment">########################################### [ 14%]</span></span><br><span class="line">   <span class="number">4</span>:libselinux-utils       <span class="comment">########################################### [ 18%]</span></span><br><span class="line">   <span class="number">5</span>:libjpeg-turbo          <span class="comment">########################################### [ 23%]</span></span><br><span class="line">   <span class="number">6</span>:java-<span class="number">1.7</span>.<span class="number">0</span>-openjdk     <span class="comment">########################################### [ 27%]</span></span><br><span class="line">   <span class="number">7</span>:compat-readline5       <span class="comment">########################################### [ 32%]</span></span><br><span class="line">   <span class="number">8</span>:ruby-libs              <span class="comment">########################################### [ 36%]</span></span><br><span class="line">   <span class="number">9</span>:ruby                   <span class="comment">########################################### [ 41%]</span></span><br><span class="line">  <span class="number">10</span>:facter                 <span class="comment">########################################### [ 45%]</span></span><br><span class="line">  <span class="number">11</span>:ruby-irb               <span class="comment">########################################### [ 50%]</span></span><br><span class="line">  <span class="number">12</span>:ruby-rdoc              <span class="comment">########################################### [ 55%]</span></span><br><span class="line">  <span class="number">13</span>:rubygems               <span class="comment">########################################### [ 59%]</span></span><br><span class="line">  <span class="number">14</span>:rubygem-json           <span class="comment">########################################### [ 64%]</span></span><br><span class="line">  <span class="number">15</span>:hiera                  <span class="comment">########################################### [ 68%]</span></span><br><span class="line">  <span class="number">16</span>:ruby-shadow            <span class="comment">########################################### [ 73%]</span></span><br><span class="line">  <span class="number">17</span>:ruby-augeas            <span class="comment">########################################### [ 77%]</span></span><br><span class="line">  <span class="number">18</span>:puppet                 <span class="comment">########################################### [ 82%]</span></span><br><span class="line">  <span class="number">19</span>:puppetserver           <span class="comment">########################################### [ 86%]</span></span><br><span class="line">  <span class="number">20</span>:libselinux-devel       <span class="comment">########################################### [ 91%]</span></span><br><span class="line">  <span class="number">21</span>:libselinux-python      <span class="comment">########################################### [ 95%]</span></span><br><span class="line">  <span class="number">22</span>:libselinux             <span class="comment">########################################### [100%]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#验证puppetserver</span></span><br><span class="line">master@/tmp/puppetserver<span class="comment">#yum install puppetserver</span></span><br><span class="line">Loaded plugins: downloadonly, product-id, refresh-packagekit, security, subscription-manager</span><br><span class="line">Updating certificate-based repositories.</span><br><span class="line">Unable to <span class="built_in">read</span> consumer identity</span><br><span class="line">Setting up Install Process</span><br><span class="line">Package puppetserver-<span class="number">1.1</span>.<span class="number">3</span>-<span class="number">1</span>.el6.noarch already installed and latest version</span><br><span class="line">Nothing to <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#增加puppet master配置信息</span></span><br><span class="line">vi /etc/puppet/puppet.conf</span><br><span class="line"></span><br><span class="line">[main]</span><br><span class="line">    <span class="comment"># master的主机名</span></span><br><span class="line">    server = master</span><br><span class="line">    <span class="comment"># master的主机名</span></span><br><span class="line">    certname = master</span><br><span class="line">    <span class="comment">#禁用插件同步</span></span><br><span class="line">    pluginsync = <span class="literal">false</span></span><br><span class="line">    <span class="comment"># The Puppet log directory.</span></span><br><span class="line">    <span class="comment"># The default value is '$vardir/log'.</span></span><br><span class="line">    logdir = /var/<span class="built_in">log</span>/puppet</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where Puppet PID files are kept.</span></span><br><span class="line">    <span class="comment"># The default value is '$vardir/run'.</span></span><br><span class="line">    rundir = /var/run/puppet</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where SSL certificates are kept.</span></span><br><span class="line">    <span class="comment"># The default value is '$confdir/ssl'.</span></span><br><span class="line">    ssldir = <span class="variable">$vardir</span>/ssl</span><br><span class="line"></span><br><span class="line">[agent]</span><br><span class="line">    <span class="comment"># The file in which puppetd stores a list of the classes</span></span><br><span class="line">    <span class="comment"># associated with the retrieved configuratiion.  Can be loaded in</span></span><br><span class="line">    <span class="comment"># the separate ``puppet`` executable using the ``--loadclasses``</span></span><br><span class="line">    <span class="comment"># option.</span></span><br><span class="line">    <span class="comment"># The default value is '$confdir/classes.txt'.</span></span><br><span class="line">    classfile = <span class="variable">$vardir</span>/classes.txt</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where puppetd caches the local configuration.  An</span></span><br><span class="line">    <span class="comment"># extension indicating the cache format is added automatically.</span></span><br><span class="line">    <span class="comment"># The default value is '$confdir/localconfig'.</span></span><br><span class="line">    localconfig = <span class="variable">$vardir</span>/localconfig</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动puppet</span></span><br><span class="line">puppet master</span><br><span class="line">ps -ef |grep master</span><br><span class="line"></span><br><span class="line">puppet    <span class="number">3077</span>     <span class="number">1</span>  <span class="number">0</span> <span class="number">10</span>:<span class="number">09</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/bin/ruby /usr/bin/puppet master</span><br><span class="line">root      <span class="number">3081</span>  <span class="number">3015</span>  <span class="number">0</span> <span class="number">10</span>:<span class="number">09</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep master</span><br></pre></td></tr></table></figure>
<h2 id="Puppet_Client">Puppet Client</h2><blockquote>
<p>如果可以访问外网并配置repos，直接yum install puppet简单粗暴</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Enable the Puppet Labs Package Repository</span></span><br><span class="line">rpm -ivh https://yum.puppetlabs.com/puppetlabs-release-el-<span class="number">6</span>.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装yum-plugin-downloadonly插件</span></span><br><span class="line">yum install -y yum-plugin-downloadonly</span><br><span class="line"></span><br><span class="line"><span class="comment">#yum install puppet</span></span><br><span class="line">yum install --downloadonly --downloaddir=/tmp/puppet puppet</span><br><span class="line"></span><br><span class="line">Downloading Packages:</span><br><span class="line">(<span class="number">1</span>/<span class="number">19</span>): augeas-libs-<span class="number">1.0</span>.<span class="number">0</span>-<span class="number">10</span>.el6.x86_64.rpm          </span><br><span class="line">(<span class="number">2</span>/<span class="number">19</span>): compat-readline5-<span class="number">5.2</span>-<span class="number">17.1</span>.el6.x86_64.rpm     </span><br><span class="line">(<span class="number">3</span>/<span class="number">19</span>): facter-<span class="number">2.4</span>.<span class="number">6</span>-<span class="number">1</span>.el6.x86_64.rpm                </span><br><span class="line">(<span class="number">4</span>/<span class="number">19</span>): hiera-<span class="number">1.3</span>.<span class="number">4</span>-<span class="number">1</span>.el6.noarch.rpm                 </span><br><span class="line">(<span class="number">5</span>/<span class="number">19</span>): libselinux-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.i686.rpm           </span><br><span class="line">(<span class="number">6</span>/<span class="number">19</span>): libselinux-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm         </span><br><span class="line">(<span class="number">7</span>/<span class="number">19</span>): libselinux-devel-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm   </span><br><span class="line">(<span class="number">8</span>/<span class="number">19</span>): libselinux-python-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm  </span><br><span class="line">(<span class="number">9</span>/<span class="number">19</span>): libselinux-ruby-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm    </span><br><span class="line">(<span class="number">10</span>/<span class="number">19</span>): libselinux-utils-<span class="number">2.0</span>.<span class="number">94</span>-<span class="number">5.8</span>.el6.x86_64.rpm  </span><br><span class="line">(<span class="number">11</span>/<span class="number">19</span>): puppet-<span class="number">3.8</span>.<span class="number">6</span>-<span class="number">1</span>.el6.noarch.rpm               </span><br><span class="line">(<span class="number">12</span>/<span class="number">19</span>): ruby-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm           </span><br><span class="line">(<span class="number">13</span>/<span class="number">19</span>): ruby-augeas-<span class="number">0.4</span>.<span class="number">1</span>-<span class="number">3</span>.el6.x86_64.rpm          </span><br><span class="line">(<span class="number">14</span>/<span class="number">19</span>): ruby-irb-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm       </span><br><span class="line">(<span class="number">15</span>/<span class="number">19</span>): ruby-libs-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm      </span><br><span class="line">(<span class="number">16</span>/<span class="number">19</span>): ruby-rdoc-<span class="number">1.8</span>.<span class="number">7.374</span>-<span class="number">4</span>.el6_6.x86_64.rpm      </span><br><span class="line">(<span class="number">17</span>/<span class="number">19</span>): ruby-shadow-<span class="number">2.2</span>.<span class="number">0</span>-<span class="number">2</span>.el6.x86_64.rpm          </span><br><span class="line">(<span class="number">18</span>/<span class="number">19</span>): rubygem-json-<span class="number">1.5</span>.<span class="number">5</span>-<span class="number">3</span>.el6.x86_64.rpm         </span><br><span class="line">(<span class="number">19</span>/<span class="number">19</span>): rubygems-<span class="number">1.3</span>.<span class="number">7</span>-<span class="number">5</span>.el6.noarch.rpm             </span><br><span class="line"></span><br><span class="line"><span class="comment">#离线安装</span></span><br><span class="line">client@/tmp/puppet<span class="comment">#rpm -Uvh *</span></span><br><span class="line">warning: facter-<span class="number">2.4</span>.<span class="number">6</span>-<span class="number">1</span>.el6.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID <span class="number">4</span>bd6ec30: NOKEY</span><br><span class="line">Preparing...                <span class="comment">########################################### [100%]</span></span><br><span class="line">   <span class="number">1</span>:libselinux             <span class="comment">########################################### [  5%]</span></span><br><span class="line">   <span class="number">2</span>:augeas-libs            <span class="comment">########################################### [ 11%]</span></span><br><span class="line">   <span class="number">3</span>:libselinux-ruby        <span class="comment">########################################### [ 16%]</span></span><br><span class="line">   <span class="number">4</span>:libselinux-utils       <span class="comment">########################################### [ 21%]</span></span><br><span class="line">   <span class="number">5</span>:compat-readline5       <span class="comment">########################################### [ 26%]</span></span><br><span class="line">   <span class="number">6</span>:ruby-libs              <span class="comment">########################################### [ 32%]</span></span><br><span class="line">   <span class="number">7</span>:ruby                   <span class="comment">########################################### [ 37%]</span></span><br><span class="line">   <span class="number">8</span>:facter                 <span class="comment">########################################### [ 42%]</span></span><br><span class="line">   <span class="number">9</span>:ruby-irb               <span class="comment">########################################### [ 47%]</span></span><br><span class="line">  <span class="number">10</span>:ruby-rdoc              <span class="comment">########################################### [ 53%]</span></span><br><span class="line">  <span class="number">11</span>:rubygems               <span class="comment">########################################### [ 58%]</span></span><br><span class="line">  <span class="number">12</span>:rubygem-json           <span class="comment">########################################### [ 63%]</span></span><br><span class="line">  <span class="number">13</span>:hiera                  <span class="comment">########################################### [ 68%]</span></span><br><span class="line">  <span class="number">14</span>:ruby-shadow            <span class="comment">########################################### [ 74%]</span></span><br><span class="line">  <span class="number">15</span>:ruby-augeas            <span class="comment">########################################### [ 79%]</span></span><br><span class="line">  <span class="number">16</span>:puppet                 <span class="comment">########################################### [ 84%]</span></span><br><span class="line">  <span class="number">17</span>:libselinux-devel       <span class="comment">########################################### [ 89%]</span></span><br><span class="line">  <span class="number">18</span>:libselinux-python      <span class="comment">########################################### [ 95%]</span></span><br><span class="line">  <span class="number">19</span>:libselinux             <span class="comment">########################################### [100%]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#验证puppet</span></span><br><span class="line">client@/tmp/puppet<span class="comment">#yum install puppet</span></span><br><span class="line">Loaded plugins: fastestmirror, product-id, refresh-packagekit, security, subscription-manager</span><br><span class="line">Updating certificate-based repositories.</span><br><span class="line">Unable to <span class="built_in">read</span> consumer identity</span><br><span class="line">Setting up Install Process</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">Package puppet-<span class="number">3.8</span>.<span class="number">6</span>-<span class="number">1</span>.el6.noarch already installed and latest version</span><br><span class="line">Nothing to <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#增加puppet client配置信息</span></span><br><span class="line">vi /etc/puppet/puppet.conf</span><br><span class="line"></span><br><span class="line">[main]</span><br><span class="line">    <span class="comment"># master的主机名</span></span><br><span class="line">    server = master</span><br><span class="line">    <span class="comment"># 禁用插件同步</span></span><br><span class="line">    pluginsync = <span class="literal">false</span></span><br><span class="line">    <span class="comment"># The Puppet log directory.</span></span><br><span class="line">    <span class="comment"># The default value is '$vardir/log'.</span></span><br><span class="line">    logdir = /var/<span class="built_in">log</span>/puppet</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where Puppet PID files are kept.</span></span><br><span class="line">    <span class="comment"># The default value is '$vardir/run'.</span></span><br><span class="line">    rundir = /var/run/puppet</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where SSL certificates are kept.</span></span><br><span class="line">    <span class="comment"># The default value is '$confdir/ssl'.</span></span><br><span class="line">    ssldir = <span class="variable">$vardir</span>/ssl</span><br><span class="line"></span><br><span class="line">[agent]</span><br><span class="line">    <span class="comment"># The file in which puppetd stores a list of the classes</span></span><br><span class="line">    <span class="comment"># associated with the retrieved configuratiion.  Can be loaded in</span></span><br><span class="line">    <span class="comment"># the separate ``puppet`` executable using the ``--loadclasses``</span></span><br><span class="line">    <span class="comment"># option.</span></span><br><span class="line">    <span class="comment"># The default value is '$confdir/classes.txt'.</span></span><br><span class="line">    classfile = <span class="variable">$vardir</span>/classes.txt</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Where puppetd caches the local configuration.  An</span></span><br><span class="line">    <span class="comment"># extension indicating the cache format is added automatically.</span></span><br><span class="line">    <span class="comment"># The default value is '$confdir/localconfig'.</span></span><br><span class="line">    localconfig = <span class="variable">$vardir</span>/localconfig</span><br></pre></td></tr></table></figure>
<h2 id="Puppet证书认证">Puppet证书认证</h2><blockquote>
<p>Puppet为了安全，采用ssl隧道通信，因此需要申请证书来验证的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#client agent连接server</span></span><br><span class="line">puppet agent --server=master</span><br><span class="line"></span><br><span class="line"><span class="comment">#在master上查看申请证书请求</span></span><br><span class="line">puppet cert --list</span><br><span class="line"></span><br><span class="line"><span class="string">"client"</span> (SHA256) BC:<span class="number">1</span>B:<span class="number">42</span>:<span class="number">88</span>:B0:A4:F0:F2:<span class="number">81</span>:<span class="number">56</span>:<span class="number">5</span>D:<span class="number">0</span>E:<span class="number">7</span>A:<span class="number">49</span>:<span class="number">90</span>:<span class="number">83</span>:<span class="number">79</span>:F2:<span class="number">41</span>:A5:E3:<span class="number">12</span>:FC:E2:F2:DB:DE:<span class="number">30</span>:<span class="number">8</span>E:DB:<span class="number">0</span>D:D0</span><br><span class="line"></span><br><span class="line"><span class="comment">#在master上签发证书</span></span><br><span class="line"><span class="comment">#puppet cert sign --all</span></span><br><span class="line">puppet cert --sign client</span><br><span class="line"></span><br><span class="line">Notice: Signed certificate request <span class="keyword">for</span> client</span><br><span class="line">Notice: Removing file Puppet::SSL::CertificateRequest client at <span class="string">'/var/lib/puppet/ssl/ca/requests/client.pem'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看证书，"+"表示已经签名成功</span></span><br><span class="line">puppet cert -all</span><br><span class="line"></span><br><span class="line">+ <span class="string">"client"</span> (SHA256) BC:<span class="number">1</span>B:<span class="number">42</span>:<span class="number">88</span>:B0:A4:F0:F2:<span class="number">81</span>:<span class="number">56</span>:<span class="number">5</span>D:<span class="number">0</span>E:<span class="number">7</span>A:<span class="number">49</span>:<span class="number">90</span>:<span class="number">83</span>:<span class="number">79</span>:F2:<span class="number">41</span>:A5:E3:<span class="number">12</span>:FC:E2:F2:DB:DE:<span class="number">30</span>:<span class="number">8</span>E:DB:<span class="number">0</span>D:D0</span><br><span class="line">+ <span class="string">"master"</span> (SHA256) <span class="number">04</span>:<span class="number">45</span>:<span class="number">21</span>:<span class="number">0</span>B:B5:<span class="number">5</span>E:<span class="number">41</span>:AE:<span class="number">9</span>C:F4:B4:<span class="number">6</span>B:EC:<span class="number">2</span>F:AA:D2:BE:<span class="number">46</span>:<span class="number">33</span>:<span class="number">3</span>E:B1:<span class="number">0</span>E:<span class="number">85</span>:<span class="number">2</span>E:<span class="number">3</span>C:B7:<span class="number">6</span>B:<span class="number">98</span>:<span class="number">95</span>:A8:CE:<span class="number">4</span>D</span><br></pre></td></tr></table></figure>
<h2 id="Puppet同步验证">Puppet同步验证</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在master上创建一个site.pp文件</span></span><br><span class="line">vi /etc/puppet/manifests/site.pp</span><br><span class="line"></span><br><span class="line">node default &#123; file &#123; <span class="string">"/tmp/test.txt"</span>: content =&gt; <span class="string">"Hello, First puppet test!"</span>&#125; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#在client机进行验证，如果/tmp/test.txt文件生成并有内容，则说明功能正常。</span></span><br><span class="line">puppet agent --test</span><br><span class="line"></span><br><span class="line">Info: Caching catalog <span class="keyword">for</span> client</span><br><span class="line">Info: Applying configuration version <span class="string">'1458888162'</span></span><br><span class="line">Notice: /Stage[main]/Main/Node[default]/File[/tmp/test.txt]/ensure: defined content as <span class="string">'&#123;md5&#125;390b4c389233b9ae38a84ff8c731a8a1'</span></span><br><span class="line">Info: Creating state file /var/lib/puppet/state/state.yaml</span><br><span class="line">Notice: Finished catalog run <span class="keyword">in</span> <span class="number">0.03</span> seconds</span><br></pre></td></tr></table></figure>
<h2 id="Troubleshooting">Troubleshooting</h2><blockquote>
<p>硬件配置/操作系统记得按照Puppet的官方建议来做，遇到错误仔细分析日志</p>
</blockquote>
<p><a href="https://docs.puppetlabs.com/pe/latest/install_system_requirements.html" target="_blank" rel="external">https://docs.puppetlabs.com/pe/latest/install_system_requirements.html</a><br><a href="https://docs.puppetlabs.com/guides/troubleshooting.html" target="_blank" rel="external">https://docs.puppetlabs.com/guides/troubleshooting.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Error: Could not find certificate request for client</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#execute on your puppet master.</span></span><br><span class="line">puppet cert clean <span class="string">"yourhostnamehere"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#execute on your puppet agent.</span></span><br><span class="line">rm <span class="operator">-f</span> /etc/puppetlabs/puppet/ssl/certs/yourhostnamehere</span><br><span class="line">find /var/lib/puppet -name *yourhostnamehere* -delete</span><br><span class="line">puppet agent -t</span><br><span class="line"></span><br><span class="line"><span class="comment">#back for your puppet master</span></span><br><span class="line">puppet cert --list</span><br><span class="line"></span><br><span class="line"><span class="comment">#check your name certificate and sign.</span></span><br><span class="line">puppet cert --sign <span class="string">"yourhostnamehere"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#come back to your puppet agent and be happy :D</span></span><br><span class="line">puppet agent -t</span><br><span class="line"></span><br><span class="line"><span class="comment">#客户端报错提示的方法也是类似</span></span><br><span class="line">Error: Could not request certificate: The certificate retrieved from the master does not match the agent<span class="string">'s private key.</span><br><span class="line">To fix this, remove the certificate from both the master and the agent and then start a puppet run, which will automatically regenerate a certficate.</span><br><span class="line">On the master:</span><br><span class="line">  puppet cert clean "client"</span><br><span class="line">On the agent:</span><br><span class="line">  1a. On most platforms: find /var/lib/puppet/ssl -name client.pem -delete</span><br><span class="line">  1b. On Windows: del "/var/lib/puppet/ssl/client.pem" /f</span><br><span class="line">  2. puppet agent -t</span><br><span class="line"></span><br><span class="line">#Error: Could not run: Could not create PID file: /var/run/puppet/master.pid</span><br><span class="line">killall puppet</span><br><span class="line">puppet master --verbose --no-daemonize</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#puppet agent --test</span><br><span class="line">Error: Could not retrieve catalog from remote server: Error 400 on SERVER: Could not parse for environment production: Permission denied - /etc/puppet/manifests/site.pp on node client.cffex.com.cn</span><br><span class="line">Warning: Not using cache on failed catalog</span><br><span class="line">Error: Could not retrieve catalog; skipping run</span><br><span class="line"></span><br><span class="line">#注意/etc/puppet/manifests的权限</span></span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[Puppet是最佳的集中配置管理系统之一]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Splunk官方培训笔记]]></title>
    <link href="http://wsgzao.github.io/post/splunk/"/>
    <id>http://wsgzao.github.io/post/splunk/</id>
    <published>2016-03-22T08:22:32.000Z</published>
    <updated>2016-03-22T06:45:02.401Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/0kvIE02gl.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>Splunk作为一款成熟的商业化日志处理分析产品无论在功能上还是用户体验上都是令人满意的，而开源方案ELK(Elasticsearch+Logstash+Kibana)相信也有很多朋友考虑或者正在使用，我在这里不想讨论孰优孰劣因为不同的业务场景出发点不同，共存也是不错的选择。文章通过1天的Splunk官方培训记录相关基础概念和动手实验，Splunk上手速度灰常快不过也需要掌握正则表达式，欢迎大家一起学习哈。</p>
<blockquote>
<p>Splunk智能运维，挖掘数据的价值</p>
</blockquote>
<h2 id="更新记录">更新记录</h2><p>2016年03月22日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/splunk/" target="_blank" rel="external">http://wsgzao.github.io/post/splunk/</a></p>
<p><strong>扩展阅读</strong></p>
<p>Splunk - <a href="http://www.splunk.com/" target="_blank" rel="external">http://www.splunk.com/</a><br>正则表达式30分钟入门教程 - <a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="external">http://deerchao.net/tutorials/regex/regex.htm</a></p>
<h2 id="机器数据">机器数据</h2><p>机器数据中包含客户、用户、交易、应用程序、服务器、网络和手机设备所有活动和行为的明确记录。不仅仅包含日志。还包括配置、API 中的数据、消息队列、更改事件、诊断命令输出、工业系统呼叫详细信息记录和传感器数据等。</p>
<p>计算机数以未知格式的阵列存储，监测和分析工具的传统集并未为多样性、速率、数据量、可变性设计。一个专为此独特类型数据设计的全新方法，必须可以快速诊断服务问题、检测复杂信息安全威胁、远程设备的健康状况和性能，以及说明合规性。</p>
<h3 id="机器数据源">机器数据源</h3><blockquote>
<p>每个环境都有独特的机器数据空间，以下是一些示例。</p>
</blockquote>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>位置</th>
<th>它可以告诉您什么</th>
</tr>
</thead>
<tbody>
<tr>
<td>应用日志</td>
<td>本地日志文件、log4j、log4net、Weblogic、WebSphere、JBoss、.NET、PHP</td>
<td>用户活动、欺诈检测、应用性能</td>
</tr>
<tr>
<td>业务流程日志</td>
<td>业务流程管理日志</td>
<td>跨渠道客户活动、购买、帐户变更以及问题报表</td>
</tr>
<tr>
<td>呼叫详细信息记录</td>
<td>呼叫详细信息记录 (CDR)、计费数据记录、事件数据记录均由电信和网络交换机所记录。</td>
<td>计费、收入保证、客户保证、合作伙伴结算，营销智能</td>
</tr>
<tr>
<td>点击流数据</td>
<td>Web 服务器、路由器、代理服务器和广告服务器</td>
<td>可用性分析、数字市场营销和一般调查</td>
</tr>
<tr>
<td>配置文件</td>
<td>系统配置文件</td>
<td>如何设置基础设施、调试故障、后门攻击、”定时炸弹”病毒</td>
</tr>
<tr>
<td>数据库审计日志</td>
<td>数据库日志文件、审计表</td>
<td>如何根据时间修改数据库数据以及如何确定修改人</td>
</tr>
<tr>
<td>文件系统审计日志</td>
<td>敏感数据存储在共享文件系统中</td>
<td>监测并审计敏感数据读取权限</td>
</tr>
<tr>
<td>管理并记录 API</td>
<td>通过 OPSEC Log Export API (OPSEC LEA) 和其他 VMware 和 Citrix 供应商特定 API 的 Checkpoint 防火墙</td>
<td>管理数据和日志事件</td>
</tr>
<tr>
<td>消息队列</td>
<td>JMS、RabbitMQ 和 AquaLogic</td>
<td>调试复杂应用中的问题，并作为记录应用架构基础</td>
</tr>
<tr>
<td>操作系统度量、状态和诊断命令</td>
<td>通过命令行实用程序（例如 Unix 和 Linux 上的 ps 与 iostat 以及 Windows 上的性能监视器）显示的 CPU、内存利用率和状态信息</td>
<td>故障排除、分析趋势以发现潜在问题并调查安全事件</td>
</tr>
<tr>
<td>数据包/流量数据</td>
<td>tcpdump 和 tcpflow 可生成 pcap 或流量数据以及其他有用的数据包级和会话级信息</td>
<td>性能降级、超时、瓶颈或可疑活动可表明网络被入侵或者受到远程攻击</td>
</tr>
<tr>
<td>SCADA 数据</td>
<td>监视控制与数据采集 (SCADA)</td>
<td>识别 SCADA 基础结构中的趋势、模式和异常情况，并用于实现客户价值</td>
</tr>
<tr>
<td>传感器数据</td>
<td>传感器设备可以根据监测环境条件生成数据，例如气温、声音、压力、功率以及水位</td>
<td>水位监测、机器健康状态监测和智能家居监测</td>
</tr>
<tr>
<td>Syslog</td>
<td>路由器、交换机和网络设备上的 Syslog</td>
<td>故障排除、分析、安全审计</td>
</tr>
<tr>
<td>Web 访问日志</td>
<td>Web 访问日志会报告 Web 服务器处理的每个请求</td>
<td>Web 市场营销分析报表</td>
</tr>
<tr>
<td>Web 代理日志</td>
<td>Web 代理记录用户通过代理发出的每个 Web 请求</td>
<td>监测并调查服务条款以及数据泄露事件</td>
</tr>
<tr>
<td>Windows 事件</td>
<td>Windows 应用、安全和系统事件日志</td>
<td>使用业务关键应用、安全信息和使用模式检测问题。</td>
</tr>
<tr>
<td>线上数据</td>
<td>DNS 查找和记录，协议级信息，包括标头、内容以及流记录</td>
<td>主动监测应用性能和可用性、最终客户体验、事件调查、网络、威胁检测、监控和合规性</td>
</tr>
</tbody>
</table>
<h2 id="实验准备">实验准备</h2><blockquote>
<p>免费版每天最多可对 500 MB 数据建立索引</p>
</blockquote>
<p>Splunk Enterprise - <a href="http://www.splunk.com/zh-hans_cn/download/splunk-enterprise.html" target="_blank" rel="external">http://www.splunk.com/zh-hans_cn/download/splunk-enterprise.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">file://C:\Users\wsgzao\Desktop\splunk_workshop  (<span class="number">2</span> folders, <span class="number">3</span> files, <span class="number">26.20</span> MB, <span class="number">48.25</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│  sampledata-selected.zip   <span class="number">323.36</span> KB</span><br><span class="line">│  splunk.pdf    <span class="number">24.02</span> MB</span><br><span class="line">│  tutorialdata.zip  <span class="number">1.86</span> MB</span><br><span class="line">├─sampledata-selected   (<span class="number">0</span> folders, <span class="number">3</span> files, <span class="number">4.07</span> MB, <span class="number">4.07</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│      access.log  <span class="number">4.06</span> MB</span><br><span class="line">│      http_status.csv <span class="number">1.34</span> KB</span><br><span class="line">│      prices.csv  <span class="number">630</span> bytes</span><br><span class="line">└─tutorialdata  (<span class="number">5</span> folders, <span class="number">0</span> files, <span class="number">0</span> bytes, <span class="number">17.99</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    ├─mailsv  (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">1.06</span> MB, <span class="number">1.06</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    │      secure.log    <span class="number">1.06</span> MB</span><br><span class="line">    ├─vendor_sales    (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">1.96</span> MB, <span class="number">1.96</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    │      vendor_sales.log  <span class="number">1.96</span> MB</span><br><span class="line">    ├─www1    (<span class="number">0</span> folders, <span class="number">2</span> files, <span class="number">5.18</span> MB, <span class="number">5.18</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    │      access.log    <span class="number">4.06</span> MB</span><br><span class="line">    │      secure.log    <span class="number">1.12</span> MB</span><br><span class="line">    ├─www2    (<span class="number">0</span> folders, <span class="number">2</span> files, <span class="number">4.87</span> MB, <span class="number">4.87</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    │      access.log    <span class="number">3.85</span> MB</span><br><span class="line">    │      secure.log    <span class="number">1.02</span> MB</span><br><span class="line">    └─www3    (<span class="number">0</span> folders, <span class="number">2</span> files, <span class="number">4.91</span> MB, <span class="number">4.91</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">            access.log    <span class="number">3.86</span> MB</span><br><span class="line">            secure.log    <span class="number">1.05</span> MB</span><br></pre></td></tr></table></figure>
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/dQlrUNPu3JNYjp" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> 

<blockquote>
<p>浏览slideshare可能要翻墙，如需帮助可参考<a href="http://wsgzao.github.io/post/fq/" target="_blank" rel="external">《GFW翻墙小结》</a></p>
</blockquote>
<h2 id="动手实验">动手实验</h2><blockquote>
<p>安装Splunk极其简单，这里以Windows为例</p>
</blockquote>
<p><a href="http://localhost:8000/zh-CN/" target="_blank" rel="external">http://localhost:8000/zh-CN/</a><br><a href="http://localhost:8000/en-US/" target="_blank" rel="external">http://localhost:8000/en-US/</a></p>
<p>Search App：数据导入，了解splunk搜索界面，执行基本搜索<br>Field：了解Splunk字段含义；字段提取；字段对照<br>SPL：使用SPL（SplunkSearchProcessingLanguage）指令实现目标场景<br>Businessused cases：场景实现，自定义仪表盘制作</p>
<blockquote>
<p>Objectives of workshop</p>
</blockquote>
<ul>
<li>Learn how to start indexing machine data in Splunk.</li>
<li>Leverage these machine data for reporting and learn some of the common reporting commands.</li>
<li>Learn to use searches to pull out data of importance.</li>
<li>Get an idea on an unique Splunk feature called “schema-on-the-fly”, and understand how to apply such “Fields” to machine data to make IT and business sense.</li>
<li>Learn how to build and share dashboards during the class.</li>
<li>Get an idea how to create data model and create pivot reports*</li>
<li>You can re-run the whole workshop after this session anywhere</li>
<li>Q&amp;A</li>
</ul>
<blockquote>
<p>实验过程</p>
</blockquote>
<p>我觉得操作都很简单，大家可以多参考官方的Splunk Documentation</p>
<p><a href="http://docs.splunk.com/Documentation" target="_blank" rel="external">http://docs.splunk.com/Documentation</a><br><a href="http://docs.splunk.com/Documentation/Splunk/latest/Translated/SimplifiedChinesemanuals" target="_blank" rel="external">http://docs.splunk.com/Documentation/Splunk/latest/Translated/SimplifiedChinesemanuals</a></p>
<p>正则表达式30分钟入门教程 - <a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="external">http://deerchao.net/tutorials/regex/regex.htm</a></p>
]]></content>
    <summary type="html">
    <![CDATA[Splunk智能运维，挖掘数据的价值]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[LVM逻辑卷管理配置小结]]></title>
    <link href="http://wsgzao.github.io/post/lvm/"/>
    <id>http://wsgzao.github.io/post/lvm/</id>
    <published>2016-03-18T06:59:49.000Z</published>
    <updated>2016-03-18T05:55:32.560Z</updated>
    <content type="html"><![CDATA[<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Lvm.svg/620px-Lvm.svg.png" alt=""></p>
<h2 id="前言">前言</h2><p>Logical Volume Manager (LVM)，逻辑卷管理LVM是一个多才多艺的硬盘系统工具，无论在Linux或者其他类似的系统，都是非常的好用。传统分区使用固定大小分区，重新调整大小十分麻烦，但是LVM可以创建和管理“逻辑”卷，而不是直接使用物理硬盘，可以让管理员弹性的管理逻辑卷的扩大缩小，操作简单，而不损坏已存储的数据。可以随意将新的硬盘添加到LVM，以直接扩展已经存在的逻辑卷，LVM并不需要重启就可以让内核知道分区的存在。文章详细记录在PV/VG/LV中3个阶段的创建/添加/扩展/减小/删除等实战操作步骤，方便自己回顾一些基础用法，也希望能够帮助大家更好的理解LVM的原理。</p>
<blockquote>
<p>LVM是一个非常给力的工具，用来创建和管理可变大小的分区</p>
</blockquote>
<h2 id="更新历史">更新历史</h2><p>2016年03月18日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/lvm/" target="_blank" rel="external">http://wsgzao.github.io/post/lvm/</a></p>
<p><strong>扩展阅读</strong></p>
<p>逻辑卷轴管理员 (Logical Volume Manager) - <a href="http://vbird.dic.ksu.edu.tw/linux_basic/0420quota_3.php" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/linux_basic/0420quota_3.php</a><br>LVM - <a href="https://wiki.archlinux.org/index.php/LVM_(简体中文" target="_blank" rel="external">https://wiki.archlinux.org/index.php/LVM_(简体中文</a>)<br>Linux LVM简明教程 - <a href="https://linux.cn/article-3218-1.html" target="_blank" rel="external">https://linux.cn/article-3218-1.html</a></p>
<hr>
<h2 id="LVM基本组成">LVM基本组成</h2><p>LVM利用Linux内核的device-mapper来实现存储系统的虚拟化（系统分区独立于底层硬件）。 通过LVM，你可以实现存储空间的抽象化并在上面建立虚拟分区（virtual partitions），可以更简便地扩大和缩小分区，可以增删分区时无需担心某个硬盘上没有足够的连续空间， without getting caught up in the problems of fdisking a disk that is in use (and wondering whether the kernel is using the old or new partition table) and without having to move other partition out of the way. LVM是用来方便管理的，不会提供额外的安全保证。 However, it sits nicely with the other two technologies we are using.</p>
<p>LVM的基本组成块（building blocks）如下：</p>
<p><strong>物理卷Physical volume (PV)</strong> ：可以在上面建立卷组的媒介，可以是硬盘分区，也可以是硬盘本身或者回环文件（loopback file）。物理卷包括一个特殊的header，其余部分被切割为一块块物理区域（physical extents）。 Think of physical volumes as big building blocks which can be used to build your hard drive.</p>
<p><strong> 卷组Volume group (VG)</strong> ：将一组物理卷收集为一个管理单元。Group of physical volumes that are used as storage volume (as one disk). They contain logical volumes. Think of volume groups as hard drives.</p>
<p><strong> 逻辑卷Logical volume (LV)</strong> ：虚拟分区，由物理区域（physical extents）组成。A “virtual/logical partition” that resides in a volume group and is composed of physical extents. Think of logical volumes as normal partitions.</p>
<p><strong> 物理区域Physical extent (PE)</strong> ：硬盘可供指派给逻辑卷的最小单位（通常为4MB）。A small part of a disk (usually 4MB) that can be assigned to a logical Volume. Think of physical extents as parts of disks that can be allocated to any partition.</p>
<blockquote>
<p>优点</p>
</blockquote>
<p>比起正常的硬盘分区管理，LVM更富于弹性：</p>
<ol>
<li>使用卷组(VG)，使众多硬盘空间看起来像一个大硬盘。</li>
<li>使用逻辑卷（LV），可以创建跨越众多硬盘空间的分区。</li>
<li>可以创建小的逻辑卷（LV），在空间不足时再动态调整它的大小。</li>
<li>在调整逻辑卷（LV）大小时可以不用考虑逻辑卷在硬盘上的位置，不用担心没有可用的连续空间。It does not depend on the position of the LV within VG, there is no need to ensure surrounding available space.</li>
<li>可以在线（online）对逻辑卷（LV）和卷组（VG）进行创建、删除、调整大小等操作。LVM上的文件系统也需要重新调整大小，某些文件系统也支持这样的在线操作。</li>
<li>无需重新启动服务，就可以将服务中用到的逻辑卷（LV）在线（online）/动态（live）迁移至别的硬盘上。</li>
<li>允许创建快照，可以保存文件系统的备份，同时使服务的下线时间（downtime）降低到最小。</li>
</ol>
<p>这些优点使得LVM对服务器的管理非常有用，对于桌面系统管理的帮助则没有那么显著，你需要根据实际情况进行取舍。</p>
<h2 id="LVM">LVM</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#新建</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (<span class="number">1</span>-<span class="number">4</span>)</span><br><span class="line"><span class="comment">#主分区</span></span><br><span class="line">p</span><br><span class="line"><span class="comment">#分区号</span></span><br><span class="line">Partition number (<span class="number">1</span>-<span class="number">4</span>): <span class="number">1</span></span><br><span class="line"><span class="comment">#回车用默认的1</span></span><br><span class="line">First cylinder (<span class="number">1</span>-<span class="number">1044</span>, default <span class="number">1</span>): </span><br><span class="line"><span class="comment">#大小</span></span><br><span class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (<span class="number">1</span>-<span class="number">1044</span>, default <span class="number">1044</span>):</span><br><span class="line"><span class="comment">#改变类型</span></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): t</span><br><span class="line">Selected partition <span class="number">1</span></span><br><span class="line"><span class="comment">#LVM 的分区代码</span></span><br><span class="line">Hex code (<span class="built_in">type</span> L to list codes): <span class="number">8</span>e</span><br><span class="line">Changed system <span class="built_in">type</span> of partition <span class="number">1</span> to <span class="number">8</span>e (Linux LVM)</span><br><span class="line"><span class="comment">#保存</span></span><br><span class="line">w</span><br><span class="line"><span class="comment">#退出</span></span><br><span class="line">q</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看创建完后的分区</span></span><br><span class="line">fdisk <span class="operator">-l</span></span><br><span class="line"></span><br><span class="line">Disk /dev/sda: <span class="number">96.6</span> GB, <span class="number">96636764160</span> bytes</span><br><span class="line"><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">11748</span> cylinders</span><br><span class="line">Units = cylinders of <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> bytes</span><br><span class="line">Sector size (logical/physical): <span class="number">512</span> bytes / <span class="number">512</span> bytes</span><br><span class="line">I/O size (minimum/optimal): <span class="number">512</span> bytes / <span class="number">512</span> bytes</span><br><span class="line">Disk identifier: <span class="number">0</span>x0008cbaf</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *           <span class="number">1</span>          <span class="number">64</span>      <span class="number">512000</span>   <span class="number">83</span>  Linux</span><br><span class="line">Partition <span class="number">1</span> does not end on cylinder boundary.</span><br><span class="line">/dev/sda2              <span class="number">64</span>       <span class="number">11749</span>    <span class="number">93858816</span>   <span class="number">8</span>e  Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: <span class="number">214.7</span> GB, <span class="number">214748364800</span> bytes</span><br><span class="line"><span class="number">255</span> heads, <span class="number">63</span> sectors/track, <span class="number">26108</span> cylinders</span><br><span class="line">Units = cylinders of <span class="number">16065</span> * <span class="number">512</span> = <span class="number">8225280</span> bytes</span><br><span class="line">Sector size (logical/physical): <span class="number">512</span> bytes / <span class="number">512</span> bytes</span><br><span class="line">I/O size (minimum/optimal): <span class="number">512</span> bytes / <span class="number">512</span> bytes</span><br><span class="line">Disk identifier: <span class="number">0</span>x16396101</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1               <span class="number">1</span>       <span class="number">26108</span>   <span class="number">209712478</span>+  <span class="number">8</span>e  Linux LVM</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建物理卷(PV)</span></span><br><span class="line">pvcreate /dev/sdb1</span><br><span class="line">pvscan</span><br><span class="line"></span><br><span class="line">  PV /dev/sdb1   VG vg_data   lvm2 [<span class="number">200.00</span> GiB / <span class="number">30.00</span> GiB free]</span><br><span class="line">  PV /dev/sda2   VG VolGroup   lvm2 [<span class="number">89.51</span> GiB / <span class="number">1.51</span> GiB free]</span><br><span class="line">  Total: <span class="number">2</span> [<span class="number">289.50</span> GiB] / <span class="keyword">in</span> use: <span class="number">2</span> [<span class="number">289.50</span> GiB] / <span class="keyword">in</span> no VG: <span class="number">0</span> [<span class="number">0</span>   ]</span><br><span class="line"></span><br><span class="line">pvdisplay</span><br><span class="line"></span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sdb1</span><br><span class="line">  VG Name               vg_data</span><br><span class="line">  PV Size               <span class="number">200.00</span> GiB / not usable <span class="number">1.34</span> MiB</span><br><span class="line">  Allocatable           yes</span><br><span class="line">  PE Size               <span class="number">4.00</span> MiB</span><br><span class="line">  Total PE              <span class="number">51199</span></span><br><span class="line">  Free PE               <span class="number">7679</span></span><br><span class="line">  Allocated PE          <span class="number">43520</span></span><br><span class="line">  PV UUID               c9js6G-WP93-ug9b-<span class="number">9</span>aXe-unnZ-doWQ-AkzOKf</span><br><span class="line"></span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda2</span><br><span class="line">  VG Name               VolGroup</span><br><span class="line">  PV Size               <span class="number">89.51</span> GiB / not usable <span class="number">3.00</span> MiB</span><br><span class="line">  Allocatable           yes</span><br><span class="line">  PE Size               <span class="number">4.00</span> MiB</span><br><span class="line">  Total PE              <span class="number">22914</span></span><br><span class="line">  Free PE               <span class="number">386</span></span><br><span class="line">  Allocated PE          <span class="number">22528</span></span><br><span class="line">  PV UUID               bFne0f-RnL8-vut2-AcKr-fr9k-VfeG-C8OHSR</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除物理卷</span></span><br><span class="line">pvremove /dev/sdb1</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建卷组(VG)</span></span><br><span class="line">vgcreate vg_data /dev/sdb1</span><br><span class="line">vgcreate vg_data /dev/hda&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;</span><br><span class="line"><span class="comment">#扩展VG</span></span><br><span class="line">vgextend vg_data /dev/hda9</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看VG信息</span></span><br><span class="line">vgscan</span><br><span class="line"></span><br><span class="line">  Reading all physical volumes.  This may take a while...</span><br><span class="line">  Found volume group <span class="string">"vg_data"</span> using metadata <span class="built_in">type</span> lvm2</span><br><span class="line">  Found volume group <span class="string">"VolGroup"</span> using metadata <span class="built_in">type</span> lvm2</span><br><span class="line"></span><br><span class="line">vgdisplay</span><br><span class="line"></span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               vg_data</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        <span class="number">1</span></span><br><span class="line">  Metadata Sequence No  <span class="number">4</span></span><br><span class="line">  VG Access             <span class="built_in">read</span>/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                <span class="number">0</span></span><br><span class="line">  Cur LV                <span class="number">3</span></span><br><span class="line">  Open LV               <span class="number">3</span></span><br><span class="line">  Max PV                <span class="number">0</span></span><br><span class="line">  Cur PV                <span class="number">1</span></span><br><span class="line">  Act PV                <span class="number">1</span></span><br><span class="line">  VG Size               <span class="number">200.00</span> GiB</span><br><span class="line">  PE Size               <span class="number">4.00</span> MiB</span><br><span class="line">  Total PE              <span class="number">51199</span></span><br><span class="line">  Alloc PE / Size       <span class="number">43520</span> / <span class="number">170.00</span> GiB</span><br><span class="line">  Free  PE / Size       <span class="number">7679</span> / <span class="number">30.00</span> GiB</span><br><span class="line">  VG UUID               EQhiUt-Waj1-F3V2-cwej-<span class="number">2</span>joz-oC3P-JMSFui</span><br><span class="line"></span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               VolGroup</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        <span class="number">1</span></span><br><span class="line">  Metadata Sequence No  <span class="number">6</span></span><br><span class="line">  VG Access             <span class="built_in">read</span>/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                <span class="number">0</span></span><br><span class="line">  Cur LV                <span class="number">5</span></span><br><span class="line">  Open LV               <span class="number">5</span></span><br><span class="line">  Max PV                <span class="number">0</span></span><br><span class="line">  Cur PV                <span class="number">1</span></span><br><span class="line">  Act PV                <span class="number">1</span></span><br><span class="line">  VG Size               <span class="number">89.51</span> GiB</span><br><span class="line">  PE Size               <span class="number">4.00</span> MiB</span><br><span class="line">  Total PE              <span class="number">22914</span></span><br><span class="line">  Alloc PE / Size       <span class="number">22528</span> / <span class="number">88.00</span> GiB</span><br><span class="line">  Free  PE / Size       <span class="number">386</span> / <span class="number">1.51</span> GiB</span><br><span class="line">  VG UUID               i0qDld-uOz4-P1BS-<span class="number">2</span>gN8-<span class="number">2</span>vhj-<span class="number">5</span>gdc-DnHfa4</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除VG</span></span><br><span class="line">vgremove vg_data</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建逻辑卷(LV)</span></span><br><span class="line">lvcreate -L <span class="number">20</span>g -n lv_oracle vg_data</span><br><span class="line">lvcreate <span class="operator">-l</span> <span class="number">100</span>%FREE -n lv_oracle vg_data</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看LV</span></span><br><span class="line">lvscan</span><br><span class="line"></span><br><span class="line">  ACTIVE            <span class="string">'/dev/vg_data/lv_oracle'</span> [<span class="number">20.00</span> GiB] inherit</span><br><span class="line">  ACTIVE            <span class="string">'/dev/VolGroup/lv_root'</span> [<span class="number">50.00</span> GiB] inherit</span><br><span class="line">  ACTIVE            <span class="string">'/dev/VolGroup/lv_home'</span> [<span class="number">10.00</span> GiB] inherit</span><br><span class="line"></span><br><span class="line">lvdisplay</span><br><span class="line"></span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg_data/lv_oracle</span><br><span class="line">  LV Name                lv_oracle</span><br><span class="line">  VG Name                vg_data</span><br><span class="line">  LV UUID                P3jVXt-<span class="number">92</span>Lp-QElD-ddl8<span class="operator">-l</span>W4r-okz7-n8fdXD</span><br><span class="line">  LV Write Access        <span class="built_in">read</span>/write</span><br><span class="line">  LV Creation host, time capdb, <span class="number">2016</span>-<span class="number">03</span>-<span class="number">17</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">43</span> +<span class="number">0800</span></span><br><span class="line">  LV Status              available</span><br><span class="line">  <span class="comment"># open                 1</span></span><br><span class="line">  LV Size                <span class="number">20.00</span> GiB</span><br><span class="line">  Current LE             <span class="number">5120</span></span><br><span class="line">  Segments               <span class="number">1</span></span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently <span class="built_in">set</span> to     <span class="number">256</span></span><br><span class="line">  Block device           <span class="number">253</span>:<span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#格式化逻辑卷</span></span><br><span class="line">mkfs -t ext4 /dev/vg_data/lv_oracle</span><br><span class="line">mkfs.ext4 /dev/vg_data/lv_oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#挂载逻辑卷</span></span><br><span class="line">mkdir /oracle</span><br><span class="line"><span class="comment">#修改fstab</span></span><br><span class="line">vi /etc/fstab</span><br><span class="line">/dev/vg_data/lv_oracle /oracle ext4 dafualts <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="comment">#测试lv是否可以挂载</span></span><br><span class="line">mount <span class="operator">-a</span></span><br><span class="line">mount /dev/vg_data/lv_oracle /oracle</span><br><span class="line">df -h</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除逻辑卷</span></span><br><span class="line">fuser -m /oracle</span><br><span class="line">umount /oracle</span><br><span class="line">lvremove /dev/vg_data/lv_oracle</span><br></pre></td></tr></table></figure>
<h3 id="LVM扩展">LVM扩展</h3><blockquote>
<p>LVM特点就是支持在线动态扩容，如果为了稳妥也可以先umount</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看Free  PE / Size可用空间</span></span><br><span class="line">vgdisplay</span><br><span class="line"></span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               vg_data</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        <span class="number">1</span></span><br><span class="line">  Metadata Sequence No  <span class="number">4</span></span><br><span class="line">  VG Access             <span class="built_in">read</span>/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                <span class="number">0</span></span><br><span class="line">  Cur LV                <span class="number">3</span></span><br><span class="line">  Open LV               <span class="number">3</span></span><br><span class="line">  Max PV                <span class="number">0</span></span><br><span class="line">  Cur PV                <span class="number">1</span></span><br><span class="line">  Act PV                <span class="number">1</span></span><br><span class="line">  VG Size               <span class="number">200.00</span> GiB</span><br><span class="line">  PE Size               <span class="number">4.00</span> MiB</span><br><span class="line">  Total PE              <span class="number">51199</span></span><br><span class="line">  Alloc PE / Size       <span class="number">43520</span> / <span class="number">170.00</span> GiB</span><br><span class="line">  Free  PE / Size       <span class="number">7679</span> / <span class="number">30.00</span> GiB</span><br><span class="line">  VG UUID               EQhiUt-Waj1-F3V2-cwej-<span class="number">2</span>joz-oC3P-JMSFui</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置逻辑卷的大小</span></span><br><span class="line">lvresize -L <span class="number">40</span>g /dev/vg_data/lv_oracle</span><br><span class="line">lvresize -L +<span class="number">20</span>g /dev/vg_data/lv_oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查磁盘错误，等待时间较长可以考虑跳过</span></span><br><span class="line">e2fsck <span class="operator">-f</span> /dev/vg_data/lv_oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#更新文件系统信息</span></span><br><span class="line">resize2fs /dev/vg_data/lv_oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查逻辑卷状态</span></span><br><span class="line">lvdisplay vg_data</span><br></pre></td></tr></table></figure>
<h3 id="LVM缩减">LVM缩减</h3><blockquote>
<p>注意减少的大小，实施前umount逻辑卷</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#卸载LV</span></span><br><span class="line">umout /oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查磁盘错误</span></span><br><span class="line">e2fsck <span class="operator">-f</span> /dev/vg_data/lv_oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#缩小文件系统，更新文件系统信息</span></span><br><span class="line">resize2fs /dev/vg_data/lv_oracle <span class="number">10</span>g</span><br><span class="line"></span><br><span class="line"><span class="comment">#减少LV大小</span></span><br><span class="line">lvresize -L <span class="number">10</span>g /dev/vg_data/lv_oracle</span><br><span class="line">lvresize -L -<span class="number">30</span>g /dev/vg_data/lv_oracle</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查逻辑卷大小</span></span><br><span class="line">lvdisplay</span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>
<h3 id="扩展卷组">扩展卷组</h3><blockquote>
<p>步骤和创建VG类似</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建一个2GB分区sdc1，类型为LVM（8e）</span></span><br><span class="line">fdisk /dev/sdc</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Command action</span><br><span class="line">   e   extended</span><br><span class="line">   p   primary partition (<span class="number">1</span>-<span class="number">4</span>)</span><br><span class="line">p</span><br><span class="line">Partition number (<span class="number">1</span>-<span class="number">4</span>): <span class="number">1</span></span><br><span class="line">First cylinder (<span class="number">1</span>-<span class="number">1044</span>, default <span class="number">1</span>):</span><br><span class="line">Using default value <span class="number">1</span></span><br><span class="line">Last cylinder, +cylinders or +size&#123;K,M,G&#125; (<span class="number">1</span>-<span class="number">1044</span>, default <span class="number">1044</span>): +<span class="number">2</span>G</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): t</span><br><span class="line">Selected partition <span class="number">1</span></span><br><span class="line">Hex code (<span class="built_in">type</span> L to list codes): <span class="number">8</span>e</span><br><span class="line">Changed system <span class="built_in">type</span> of partition <span class="number">1</span> to <span class="number">8</span>e (Linux LVM)</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个物理卷 /dev/sdc1</span></span><br><span class="line">pvcreate /dev/sdc1</span><br><span class="line"></span><br><span class="line"><span class="comment">#增加到已存在的卷组</span></span><br><span class="line">vgextend vg_data /dev/sdc1</span><br><span class="line"></span><br><span class="line"><span class="comment">#验证卷组大小</span></span><br><span class="line">vgdisplay</span><br></pre></td></tr></table></figure>
<h4 id="删除卷组">删除卷组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#卸载逻辑卷</span></span><br><span class="line">umount /oracle</span><br><span class="line"><span class="comment">#删除逻辑卷</span></span><br><span class="line">lvremove /dev/vg_data/lv_oracle</span><br><span class="line"><span class="comment">#取消激活卷组</span></span><br><span class="line">vgchange <span class="operator">-a</span> n vg_data</span><br><span class="line"><span class="comment">#删除卷组</span></span><br><span class="line">vgremove vg_data</span><br><span class="line"><span class="comment">#删除物理卷</span></span><br><span class="line">pvremove /dev/sdb1</span><br><span class="line">pvremove /dev/hda&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;</span><br><span class="line"><span class="comment">#普通磁盘类型是83</span></span><br><span class="line">fdisk /dev/sdb</span><br><span class="line">t <span class="number">83</span></span><br></pre></td></tr></table></figure>
<h3 id="lvchange">lvchange</h3><blockquote>
<p>在做HA共享存储时需要配合lvchange激活lv</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lvscan</span><br><span class="line">lvchange <span class="operator">-a</span> y /dev/vg_data/lv_oradata</span><br></pre></td></tr></table></figure>
<h2 id="命令总结">命令总结</h2><table>
<thead>
<tr>
<th>任务</th>
<th>PV 阶段</th>
<th>VG 阶段</th>
<th>LV 阶段</th>
</tr>
</thead>
<tbody>
<tr>
<td>搜寻 (scan)</td>
<td>pvscan</td>
<td>vgscan</td>
<td>lvscan</td>
</tr>
<tr>
<td>创建 (create)</td>
<td>pvcreate</td>
<td>vgcreate</td>
<td>lvcreate</td>
</tr>
<tr>
<td>列出 (display)</td>
<td>pvdisplay</td>
<td>vgdisplay</td>
<td>lvdisplay</td>
</tr>
<tr>
<td>扩展 (extend)</td>
<td></td>
<td>vgextend</td>
<td>lvextend (lvresize)</td>
</tr>
<tr>
<td>减少 (reduce)</td>
<td></td>
<td>vgreduce</td>
<td>lvreduce (lvresize)</td>
</tr>
<tr>
<td>删除 (remove)</td>
<td>pvremove</td>
<td>vgremove</td>
<td>lvremove</td>
</tr>
<tr>
<td>改变容量 (resize)</td>
<td></td>
<td></td>
<td>lvresize</td>
</tr>
<tr>
<td>改变属性 (attribute)</td>
<td>pvchange</td>
<td>vgchange</td>
<td>lvchange</td>
</tr>
</tbody>
</table>
]]></content>
    <summary type="html">
    <![CDATA[LVM是一个非常给力的工具，用来创建和管理可变大小的分区]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[静态路由和策略路由的配置实践]]></title>
    <link href="http://wsgzao.github.io/post/static-routes/"/>
    <id>http://wsgzao.github.io/post/static-routes/</id>
    <published>2016-03-17T08:22:32.000Z</published>
    <updated>2016-03-18T03:28:04.351Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>一般在多网卡的网络访问关系中我们通常根据目标IP地址段来添加静态路由(static-routes)，在主机系统配置层面这个需求一般都比较简单也不需要使用非常复杂的命令，说实话如果不是因为开发测试中心同事<a href="https://cn.linkedin.com/in/恒-谢-aa5598106" target="_blank" rel="external">@谢恒</a>的乱入启发，我也不会发现还有策略路由这样一种灵活通用的配置方法来实现Linux多网卡多路由的设定，灰常感谢。</p>
<blockquote>
<p>策略路由的出现在某些业务场景下可能更优于静态路由</p>
</blockquote>
<hr>
<h2 id="更新记录">更新记录</h2><p>2016年03月18日 - 更新静态路由配置和建议<br>2015年12月23日 - 增加Linux添加静态路由最佳实践<br>2015年12月18日 - 修正动态路由为策略路由描述，完善内容，感谢<a href="http://www.v2ex.com/member/extreme" target="_blank" rel="external">@extreme</a><br>2015年12月17日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/static-routes/" target="_blank" rel="external">http://wsgzao.github.io/post/static-routes/</a></p>
<p>扩展阅读</p>
<ul>
<li>Routing Tables - <a href="http://linux-ip.net/html/routing-tables.html" target="_blank" rel="external">http://linux-ip.net/html/routing-tables.html</a></li>
<li>linux配置静态路由 - <a href="http://www.361way.com/linux-define-static-route/4053.html" target="_blank" rel="external">http://www.361way.com/linux-define-static-route/4053.html</a></li>
<li>Linux策略性路由应用及分析(iproute2) - <a href="http://tilt.lib.tsinghua.edu.cn/node/408" target="_blank" rel="external">http://tilt.lib.tsinghua.edu.cn/node/408</a></li>
<li>Linux Advanced Routing &amp; Traffic Control - <a href="http://lartc.org/" target="_blank" rel="external">http://lartc.org/</a></li>
</ul>
<hr>
<h2 id="静态路由表和策略路由的区别">静态路由表和策略路由的区别</h2><p>通常我们维护静态路由表会手工填写所有IP地址段的路由规则，使用命令或者写入配置文件永久生效，先以Windows/Linux/AIX常用方法为例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Windows静态路由</span></span><br><span class="line">--键入 route -p add [目标] [mask &lt;网络掩码&gt;] [网关] [metric &lt;度量值&gt;] [<span class="keyword">if</span> &lt;接口&gt;]</span><br><span class="line">route <span class="built_in">print</span></span><br><span class="line">route delete</span><br><span class="line">route -p add <span class="number">172.16</span>.<span class="number">19.0</span> mask <span class="number">255.255</span>.<span class="number">255.0</span> <span class="number">198.15</span>.<span class="number">0.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#RHEL静态路由</span></span><br><span class="line">vi /etc/sysconfig/network</span><br><span class="line">default via <span class="number">192.168</span>.<span class="number">3.1</span> dev eth0</span><br><span class="line"><span class="number">10.211</span>.<span class="number">6.0</span>/<span class="number">24</span> via <span class="number">192.168</span>.<span class="number">3.1</span> dev eth0</span><br><span class="line"><span class="number">10.0</span>.<span class="number">0.0</span>/<span class="number">8</span> via <span class="number">10.212</span>.<span class="number">52.1</span> dev eth1</span><br><span class="line"></span><br><span class="line"><span class="comment">#SuSE静态路由</span></span><br><span class="line">vi /etc/sysconfig/network/routes</span><br><span class="line">default <span class="number">192.168</span>.<span class="number">3.1</span> - -</span><br><span class="line"><span class="number">10.211</span>.<span class="number">6.0</span> <span class="number">192.168</span>.<span class="number">3.1</span> <span class="number">255.255</span>.<span class="number">255.0</span> eth0</span><br><span class="line"><span class="number">10.0</span>.<span class="number">0.0</span> <span class="number">10.212</span>.<span class="number">52.1</span> <span class="number">255.0</span>.<span class="number">0.0</span> eth1</span><br><span class="line"></span><br><span class="line"><span class="comment">#AIX静态路由</span></span><br><span class="line">smitty mkroute</span><br><span class="line"><span class="number">172.20</span>.<span class="number">14.0</span>/<span class="number">24</span> gw <span class="number">172.23</span>.<span class="number">14.254</span></span><br></pre></td></tr></table></figure>
<p>这种办法针对少量的规则还可以轻松应对，但规则一旦增加麻烦也就接踵而至，网段地址不断变化就必须及时更新路由表，否则其他用户就无法访问。如果可以根据用户访问进来的路径设定策略路由就会方便很多，而rt_tables就是为此而生。</p>
<h2 id="Linux添加静态路由最佳实践">Linux添加静态路由最佳实践</h2><blockquote>
<p>按照RedHat官方介绍有三种方式添加永久静态路由，这里只列举最佳方式</p>
</blockquote>
<h3 id="临时路由">临时路由</h3><blockquote>
<p>以下两种方法可以立即生效，但重启后会消失，切记使用场景</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#route命令参数，使用route命令，查看本机路由直接输入route -n回车即可</span></span><br><span class="line">add     增加路由</span><br><span class="line">del     删除路由</span><br><span class="line">-net    设置到某个网段的路由</span><br><span class="line">-host   设置到某台主机的路由</span><br><span class="line">gw      出口网关 IP地址</span><br><span class="line">dev     出口网关 物理设备名</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加路由</span></span><br><span class="line">route add -net <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">24</span> gw <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line">route add -host <span class="number">192.168</span>.<span class="number">1.1</span> dev <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#删除路由</span></span><br><span class="line">route del -net <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">24</span> gw <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#添加默认路由</span></span><br><span class="line">route add default gw <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用ip route 命令和route命令类似</span></span><br><span class="line">add 增加路由</span><br><span class="line">del 删除路由</span><br><span class="line">via 网关出口 IP地址</span><br><span class="line">dev 网关出口 物理设备名</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加路由</span></span><br><span class="line">ip route add <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">24</span> via <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line">ip route add <span class="number">192.168</span>.<span class="number">1.1</span> dev <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#删除路由</span></span><br><span class="line">ip route del <span class="number">192.168</span>.<span class="number">0.0</span>/<span class="number">24</span> via <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">#增加默认路由</span></span><br><span class="line">ip route add default via <span class="number">192.168</span>.<span class="number">0.1</span> dev eth0</span><br></pre></td></tr></table></figure>
<h3 id="永久路由">永久路由</h3><blockquote>
<p>该方法需要重启网络会造成短暂的网络服务中断，但重启后优先级大于rc.local方式不会影响nfs</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以通过临时命令立即生效</span></span><br><span class="line">route add -net <span class="number">192.168</span>.<span class="number">3.0</span>/<span class="number">24</span> gw <span class="number">192.168</span>.<span class="number">3.254</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在/etc/sysconfig/static-routes文件里添加如下内容 (没有static-routes的话就手动建立一个这样的文件)</span></span><br><span class="line">any net <span class="number">192.168</span>.<span class="number">3.0</span>/<span class="number">24</span> gw <span class="number">192.168</span>.<span class="number">3.254</span></span><br><span class="line">any net <span class="number">10.250</span>.<span class="number">228.128</span> netmask <span class="number">255.255</span>.<span class="number">255.192</span> gw <span class="number">10.250</span>.<span class="number">228.129</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果是生产系统可以考虑暂时不重启服务避免网络中断</span></span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure>
<h2 id="rt_tables">rt_tables</h2><blockquote>
<p>rt_tables简单来说就是通过给表的命名使得管理简单化</p>
</blockquote>
<p>大部分人习惯直接将路由表优先级号码直接作为表的名称来使用，这样做的好处是非常直观和简明的表达了表所在优先级的位置，但是当表的优先级结构出现变动时，我们对巨大的路由表的修改就显得很烦琐和费事了。</p>
<p>在/etc/iproute2/目录下,有这么一个文件rt_tables,只要对它进行改动，我们将很容易的完成路由表优先级结构的变动。(数值越小优先级别越高)</p>
<p>当路由表的优先级发生变化的时候，我们只需要编辑/etc/iproute2/rt_tables这个文件就可以直接改变路由表的优先级次序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/iproute2/rt_tables</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># reserved values</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="number">255</span>    <span class="built_in">local</span></span><br><span class="line"><span class="number">254</span>    main</span><br><span class="line"><span class="number">253</span>    default</span><br><span class="line"><span class="number">0</span>    unspec</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># local</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#1    inr.ruhep</span></span><br></pre></td></tr></table></figure>
<p>Linux最多可以支持255张路由表，其中有3张表是内置的：</p>
<p>表255 本地路由表（Local table） 本地接口地址，广播地址，已及NAT地址都放在这个表。该路由表由系统自动维护，管理员不能直接修改。</p>
<p>表254 主路由表（Main table） 如果没有指明路由所属的表，所有的路由都默认都放在这个表里，一般来说，旧的路由工具（如route）所添加的路由都会加到这个表。一般是普通的路由。</p>
<p>表253 默认路由表 （Default table） 一般来说默认的路由都放在这张表，但是如果特别指明放的也可以是所有的网关路由。</p>
<p>表 0 保留</p>
<h2 id="策略性路由应用及分析(iproute2)">策略性路由应用及分析(iproute2)</h2><p>策略性路由</p>
<p>　　策略性是指对于IP包的路由是以网络管理员根据需要定下的一些策略为主要依据进行路由的。例如我们可以有这样的策略：“所有来直自网A的包，选择X路径；其他选择Y路径”，或者是“所有TOS为A的包选择路径F；其他选者路径K”。<br>　　Cisco 的网络操作系统 (Cisco IOS) 从11.0开始就采用新的策略性路由机制。而Linux是在内核2.1开始采用策略性路由机制的。策略性路由机制与传统的路由算法相比主要是引入了多路由表以及规则的概念。</p>
<p>多路由表（multiple Routing Tables）</p>
<p>　　传统的路由算法是仅使用一张路由表的。但是在有些情形底下，我们是需要使用多路由表的。例如一个子网通过一个路由器与外界相连，路由器与外界有两条线路相连，其中一条的速度比较快，一条的速度比较慢。对于子网内的大多数用户来说对速度并没有特殊的要求，所以可以让他们用比较慢的路由；但是子网内有一些特殊的用户却是对速度的要求比较苛刻，所以他们需要使用速度比较快的路由。如果使用一张路由表上述要求是无法实现的，而如果根据源地址或其它参数，对不同的用户使用不同的路由表，这样就可以大大提高路由器的性能。</p>
<p>规则（rule）</p>
<p>　　规则是策略性的关键性的新的概念。我们可以用自然语言这样描述规则，例如我门可以指定这样的规则：<br>　　规则一：“所有来自192.16.152.24的IP包，使用路由表10， 本规则的优先级别是1500”<br>　　规则二：“所有的包，使用路由表253，本规则的优先级别是32767”</p>
<p>　　我们可以看到，规则包含3个要素：<br>　　什么样的包，将应用本规则（所谓的SELECTOR，可能是filter更能反映其作用）；<br>　　符合本规则的包将对其采取什么动作（ACTION），例如用那个表；<br>　　本规则的优先级别。优先级别越高的规则越先匹配（数值越小优先级别越高）。</p>
<h2 id="环境配置">环境配置</h2><blockquote>
<p>服务器A和B为双网卡，操作系统为rhel_7.1_64</p>
</blockquote>
<table>
<thead>
<tr>
<th>网卡显示名称</th>
<th>IP地址</th>
<th>子网掩码</th>
<th>网关</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>ens4f0</td>
<td>172.31.192.201</td>
<td>255.255.255.0</td>
<td>172.31.192.254</td>
<td>服务器A</td>
</tr>
<tr>
<td>ens9f0</td>
<td>172.31.196.1</td>
<td>255.255.255.0</td>
<td>172.31.196.254</td>
<td>服务器A</td>
</tr>
<tr>
<td>ens4f0</td>
<td>172.31.192.202</td>
<td>255.255.255.0</td>
<td>172.31.192.254</td>
<td>服务器B</td>
</tr>
<tr>
<td>ens9f0</td>
<td>172.31.196.2</td>
<td>255.255.255.0</td>
<td>172.31.196.254</td>
<td>服务器B</td>
</tr>
<tr>
<td>/</td>
<td>172.25.168.44</td>
<td>255.255.255.0</td>
<td>172.25.168.254</td>
<td>接入测试</td>
</tr>
</tbody>
</table>
<blockquote>
<p>网络配置，以服务器A为例，注意注释默认网关</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-ens4f0</span><br><span class="line"></span><br><span class="line">DEVICE=ens4f0</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">IPADDR=<span class="number">172.31</span>.<span class="number">192.201</span></span><br><span class="line">NETMASK=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line"><span class="comment">#GATEWAY=172.31.192.254</span></span><br><span class="line"></span><br><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-ens9f0</span><br><span class="line"></span><br><span class="line">DEVICE=ens9f0</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">IPADDR=<span class="number">172.31</span>.<span class="number">196.1</span></span><br><span class="line">NETMASK=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line"><span class="comment">#GATEWAY=172.31.196.254</span></span><br></pre></td></tr></table></figure>
<h2 id="策略路由配置">策略路由配置</h2><blockquote>
<p>注意配置名称一定要吻合</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑rt_tables</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"192 net_192 "</span> &gt;&gt; /etc/iproute2/rt_tables</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"196 net_196 "</span> &gt;&gt; /etc/iproute2/rt_tables</span><br><span class="line"></span><br><span class="line"><span class="comment">#清空net_192路由表</span></span><br><span class="line">ip route flush table net_192</span><br><span class="line"><span class="comment"># 添加一个路由规则到 net_192 表，这条规则是 net_192 这个路由表中数据包默认使用源 IP 172.31.192.201 通过 ens4f0 走网关 172.31.192.254</span></span><br><span class="line">ip route add default via <span class="number">172.31</span>.<span class="number">192.254</span> dev ens4f0 src <span class="number">172.31</span>.<span class="number">192.201</span> table net_192</span><br><span class="line"><span class="comment">#来自 172.31.192.201 的数据包，使用 net_192 路由表的路由规则</span></span><br><span class="line">ip rule add from <span class="number">172.31</span>.<span class="number">192.201</span> table net_192</span><br><span class="line"></span><br><span class="line"><span class="comment">#清空net_196路由表</span></span><br><span class="line">ip route flush table net_196</span><br><span class="line"><span class="comment">#添加一个路由规则到 net_196 表，这条规则是 net_196 这个路由表中数据包默认使用源 IP 172.31.196.1 通过 ens9f0 走网关 172.31.196.254</span></span><br><span class="line">ip route add default via <span class="number">172.31</span>.<span class="number">196.254</span> dev ens9f0 src <span class="number">172.31</span>.<span class="number">196.1</span> table net_196</span><br><span class="line"><span class="comment">#来自 172.31.196.1 的数据包，使用 net_196 路由表的路由规则</span></span><br><span class="line">ip rule add from <span class="number">172.31</span>.<span class="number">196.1</span> table net_196</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加默认网关</span></span><br><span class="line">route add default gw <span class="number">172.31</span>.<span class="number">192.254</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果需要自启动生效可以写进配置文件也可以加入rc.local</span></span><br><span class="line">vi /etc/rc.local</span><br><span class="line"></span><br><span class="line">ip route flush table net_192</span><br><span class="line">ip route add default via <span class="number">172.31</span>.<span class="number">192.254</span> dev ens4f0 src <span class="number">172.31</span>.<span class="number">192.201</span> table net_192</span><br><span class="line">ip rule add from <span class="number">172.31</span>.<span class="number">192.201</span> table net_192</span><br><span class="line">ip route flush table net_196</span><br><span class="line">ip route add default via <span class="number">172.31</span>.<span class="number">196.254</span> dev ens9f0 src <span class="number">172.31</span>.<span class="number">196.1</span> table net_196</span><br><span class="line">ip rule add from <span class="number">172.31</span>.<span class="number">196.1</span> table net_196</span><br><span class="line">route add default gw <span class="number">172.31</span>.<span class="number">192.254</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看路由表</span></span><br><span class="line">route -n</span><br><span class="line"></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line"><span class="number">169.254</span>.<span class="number">0.0</span>     <span class="number">0.0</span>.<span class="number">0.0</span>         <span class="number">255.255</span>.<span class="number">0.0</span>     U     <span class="number">1006</span>   <span class="number">0</span>        <span class="number">0</span> ens9f0</span><br><span class="line"><span class="number">169.254</span>.<span class="number">0.0</span>     <span class="number">0.0</span>.<span class="number">0.0</span>         <span class="number">255.255</span>.<span class="number">0.0</span>     U     <span class="number">1008</span>   <span class="number">0</span>        <span class="number">0</span> ens4f0</span><br><span class="line"><span class="number">169.254</span>.<span class="number">0.0</span>     <span class="number">0.0</span>.<span class="number">0.0</span>         <span class="number">255.255</span>.<span class="number">0.0</span>     U     <span class="number">1014</span>   <span class="number">0</span>        <span class="number">0</span> br-ex</span><br><span class="line"><span class="number">169.254</span>.<span class="number">0.0</span>     <span class="number">0.0</span>.<span class="number">0.0</span>         <span class="number">255.255</span>.<span class="number">0.0</span>     U     <span class="number">1015</span>   <span class="number">0</span>        <span class="number">0</span> br-int</span><br><span class="line"><span class="number">172.31</span>.<span class="number">192.0</span>    <span class="number">0.0</span>.<span class="number">0.0</span>         <span class="number">255.255</span>.<span class="number">255.0</span>   U     <span class="number">0</span>      <span class="number">0</span>        <span class="number">0</span> ens4f0</span><br><span class="line"><span class="number">172.31</span>.<span class="number">196.0</span>    <span class="number">0.0</span>.<span class="number">0.0</span>         <span class="number">255.255</span>.<span class="number">255.0</span>   U     <span class="number">0</span>      <span class="number">0</span>        <span class="number">0</span> ens9f0</span><br><span class="line"></span><br><span class="line"><span class="comment">#在接入测试服务器上验证连通性</span></span><br><span class="line">ping <span class="number">172.31</span>.<span class="number">192.201</span></span><br><span class="line">ping <span class="number">172.31</span>.<span class="number">196.1</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[策略路由的出现在某些业务场景下可能更优于静态路由]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[NTP配置实践]]></title>
    <link href="http://wsgzao.github.io/post/ntp/"/>
    <id>http://wsgzao.github.io/post/ntp/</id>
    <published>2016-03-16T06:10:20.000Z</published>
    <updated>2016-03-18T03:19:18.522Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>NTP（Network Time Protocol，网络时间协议）是用来使网络中的各个计算机时间同步的一种协议。无论是平时使用的私人计算机还是在工作中搭建的服务器集群，时间的统一性和准确性是十分重要的。本文以自己公司的NTP配置实践过程为例，过程本身并不复杂，原理部分请参考扩展阅读。</p>
<blockquote>
<p>时间同步真的很重要 </p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2016年03月16日 - 更新rhel6.3的NTP配置<br>2015年06月26日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/ntp/" target="_blank" rel="external">http://wsgzao.github.io/post/ntp/</a></p>
<p>扩展阅读</p>
<ul>
<li>NTP - <a href="http://www.ntp.org/" target="_blank" rel="external">http://www.ntp.org/</a></li>
<li>NTP 服务器 - <a href="http://vbird.dic.ksu.edu.tw/linux_server/0440ntp.php" target="_blank" rel="external">http://vbird.dic.ksu.edu.tw/linux_server/0440ntp.php</a></li>
</ul>
<hr>
<h2 id="准备工作">准备工作</h2><h3 id="检查NTP是否安装">检查NTP是否安装</h3><blockquote>
<p>如果缺少NTP服务,请从官方下载适合自己系统的版本</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#检查rpm包 </span></span><br><span class="line">rpm -qa | grep ntp</span><br><span class="line"></span><br><span class="line">ntp-<span class="number">4.2</span>.<span class="number">4</span>p8-<span class="number">2</span>.el6.x86_64</span><br><span class="line">ntpdate-<span class="number">4.2</span>.<span class="number">4</span>p8-<span class="number">2</span>.el6.x86_64</span><br></pre></td></tr></table></figure>
<h3 id="手动修改时间">手动修改时间</h3><blockquote>
<p>选择正确的时区，控制误差在5分钟以内</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前时间</span></span><br><span class="line">date</span><br><span class="line"></span><br><span class="line"><span class="number">2008</span>年 <span class="number">12</span>月 <span class="number">12</span>日 星期五 <span class="number">14</span>:<span class="number">44</span>:<span class="number">12</span> CST</span><br><span class="line">Fri Jun <span class="number">26</span> <span class="number">14</span>:<span class="number">51</span>:<span class="number">37</span> CST <span class="number">2015</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#手动修改时间（月/日/年时:分:秒）</span></span><br><span class="line">date <span class="operator">-s</span> <span class="string">"1/1/09 00:01"</span></span><br><span class="line"></span><br><span class="line"><span class="number">2009</span>年 <span class="number">01</span>月 <span class="number">01</span>日 星期四 <span class="number">00</span>:<span class="number">01</span>:<span class="number">00</span> CST</span><br><span class="line"> </span><br><span class="line"><span class="comment">#手动修改分秒</span></span><br><span class="line">date <span class="operator">-s</span> <span class="number">21</span>:<span class="number">21</span></span><br></pre></td></tr></table></figure>
<h2 id="NTP配置">NTP配置</h2><h3 id="NTP服务端配置">NTP服务端配置</h3><blockquote>
<p>服务端时间来源和策略限制根据实际情况设置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#手动同步测试</span></span><br><span class="line">ntpdate <span class="number">0</span>.rhel.pool.ntp.org</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ntp配置文件</span></span><br><span class="line">vi /etc/ntp.conf</span><br><span class="line"><span class="comment"># For more information about this file, see the man pages</span></span><br><span class="line"><span class="comment"># ntp.conf(5), ntp_acc(5), ntp_auth(5), ntp_clock(5), ntp_misc(5), ntp_mon(5).</span></span><br><span class="line">driftfile /var/lib/ntp/drift</span><br><span class="line"><span class="comment"># Permit time synchronization with our time source, but do not</span></span><br><span class="line"><span class="comment"># permit the source to query or modify the service on this system.</span></span><br><span class="line"><span class="comment">#restrict default kod nomodify notrap nopeer noquery</span></span><br><span class="line"><span class="comment">#restrict -6 default kod nomodify notrap nopeer noquery</span></span><br><span class="line"><span class="comment"># Permit all access over the loopback interface.  This could</span></span><br><span class="line"><span class="comment"># be tightened as well, but to do so would effect some of</span></span><br><span class="line"><span class="comment"># the administrative functions.</span></span><br><span class="line"><span class="comment">#restrict 127.0.0.1</span></span><br><span class="line"><span class="comment">#restrict -6 ::1</span></span><br><span class="line"><span class="comment"># Hosts on local network are less restricted.</span></span><br><span class="line"><span class="comment">#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</span></span><br><span class="line"><span class="comment"># Use public servers from the pool.ntp.org project.</span></span><br><span class="line"><span class="comment"># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span></span><br><span class="line">server <span class="number">0</span>.rhel.pool.ntp.org</span><br><span class="line">server <span class="number">1</span>.rhel.pool.ntp.org</span><br><span class="line">server <span class="number">2</span>.rhel.pool.ntp.org</span><br><span class="line"><span class="comment">#broadcast 192.168.1.255 autokey    # broadcast server</span></span><br><span class="line"><span class="comment">#broadcastclient            # broadcast client</span></span><br><span class="line"><span class="comment">#broadcast 224.0.1.1 autokey        # multicast server</span></span><br><span class="line"><span class="comment">#multicastclient 224.0.1.1        # multicast client</span></span><br><span class="line"><span class="comment">#manycastserver 239.255.254.254        # manycast server</span></span><br><span class="line"><span class="comment">#manycastclient 239.255.254.254 autokey # manycast client</span></span><br><span class="line"><span class="comment"># Undisciplined Local Clock. This is a fake driver intended for backup</span></span><br><span class="line"><span class="comment"># and when no outside source of synchronized time is available.</span></span><br><span class="line"><span class="comment">#server    127.127.1.0    # local clock</span></span><br><span class="line"><span class="comment">#fudge    127.127.1.0 stratum 10   </span></span><br><span class="line"><span class="comment"># Enable public key cryptography.</span></span><br><span class="line"><span class="comment">#crypto</span></span><br><span class="line">includefile /etc/ntp/crypto/pw</span><br><span class="line"><span class="comment"># Key file containing the keys and key identifiers used when operating</span></span><br><span class="line"><span class="comment"># with symmetric key cryptography.</span></span><br><span class="line">keys /etc/ntp/keys</span><br><span class="line"><span class="comment"># Specify the key identifiers which are trusted.</span></span><br><span class="line"><span class="comment">#trustedkey 4 8 42</span></span><br><span class="line"><span class="comment"># Specify the key identifier to use with the ntpdc utility.</span></span><br><span class="line"><span class="comment">#requestkey 8</span></span><br><span class="line"><span class="comment"># Specify the key identifier to use with the ntpq utility.</span></span><br><span class="line"><span class="comment">#controlkey 8</span></span><br><span class="line"><span class="comment"># Enable writing of statistics records.</span></span><br><span class="line"><span class="comment">#statistics clockstats cryptostats loopstats peerstats</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#加入自动启动</span></span><br><span class="line">chkconfig ntpd on</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动ntp服务</span></span><br><span class="line">service ntpd start</span><br><span class="line">service ntpd status</span><br><span class="line">service ntpd stop</span><br></pre></td></tr></table></figure>
<h3 id="NTP客户端配置">NTP客户端配置</h3><blockquote>
<p>如无特殊要求，一般使用crontab计划任务同步时间</p>
</blockquote>
<p>1.crontab计划任务方式配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab <span class="operator">-e</span></span><br><span class="line"><span class="number">0</span> <span class="number">0</span> * * * /usr/sbin/sntp -P no -r  <span class="number">172.16</span>.<span class="number">0.3</span>;hwclock -w</span><br></pre></td></tr></table></figure>
<p>2.以服务进程方式实时同步</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑客户端配置文件</span></span><br><span class="line">vi /etc/ntp.conf</span><br><span class="line">server <span class="number">198.16</span>.<span class="number">2.135</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">chkconfig ntpd on</span><br><span class="line">service ntpd restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果相差时间较长,请先手动同步</span></span><br><span class="line">sntp -P no -r <span class="number">198.16</span>.<span class="number">2.135</span></span><br><span class="line">ntpdate –d <span class="number">198.16</span>.<span class="number">2.135</span></span><br></pre></td></tr></table></figure>
<h3 id="检查NTP同步状态">检查NTP同步状态</h3><blockquote>
<p>NTP协议为UDP端口是123，offset时间偏移量以毫秒为单位，注意防火墙的控制策略</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看服务连接和监听</span></span><br><span class="line">ntp:~ <span class="comment"># netstat -tlunp | grep ntp  </span></span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">198.17</span>.<span class="number">1.224</span>:<span class="number">123</span>        <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">198.16</span>.<span class="number">2.224</span>:<span class="number">123</span>        <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span>.<span class="number">0.2</span>:<span class="number">123</span>           <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">123</span>           <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">123</span>             <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> ::<span class="number">1</span>:<span class="number">123</span>                 :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> fe80::<span class="number">250</span>:<span class="number">56</span>ff:feb9:<span class="number">123</span> :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> fe80::<span class="number">250</span>:<span class="number">56</span>ff:feb9:<span class="number">123</span> :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> :::<span class="number">123</span>                  :::*                                <span class="number">28916</span>/ntpd          </span><br><span class="line"></span><br><span class="line"><span class="comment">#查看网络中的NTP服务器，同时显示客户端和每个服务器的关系</span></span><br><span class="line">ntp:~ <span class="comment"># ntpq -p  </span></span><br><span class="line"></span><br><span class="line">     remote           refid      st t when poll reach   delay   offset  jitter</span><br><span class="line">==============================================================================</span><br><span class="line">*<span class="number">202.120</span>.<span class="number">2.101</span>   <span class="number">202.118</span>.<span class="number">1.81</span>     <span class="number">3</span> u    <span class="number">5</span> <span class="number">1024</span>  <span class="number">377</span>  <span class="number">265.748</span>   -<span class="number">2.819</span>  <span class="number">16.138</span></span><br><span class="line"> LOCAL(<span class="number">0</span>)        .LOCL.          <span class="number">10</span> l   <span class="number">34</span>   <span class="number">64</span>  <span class="number">377</span>    <span class="number">0.000</span>    <span class="number">0.000</span>   <span class="number">0.001</span></span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[时间同步真的很重要]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[RAID磁盘阵列配置和调优小结]]></title>
    <link href="http://wsgzao.github.io/post/raid/"/>
    <id>http://wsgzao.github.io/post/raid/</id>
    <published>2016-03-10T07:52:17.000Z</published>
    <updated>2016-03-11T06:14:43.632Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/Ko2l48uT.png" alt=""></p>
<h2 id="前言">前言</h2><p>RAID解释我偷个小懒引用WikipediA，独立硬盘冗余阵列（RAID, Redundant Array of Independent Disks），旧称廉价磁盘冗余阵列（Redundant Array of Inexpensive Disks），简称磁盘阵列。其基本思想就是把多个相对便宜的硬盘组合起来，成为一个硬盘阵列组，使性能达到甚至超过一个价格昂贵、容量巨大的硬盘。根据选择的版本不同，RAID比单颗硬盘有以下一个或多个方面的好处：增强数据集成度，增强容错功能，增加处理量或容量。另外，磁盘阵列对于电脑来说，看起来就像一个单独的硬盘或逻辑存储单元。写这篇文章当然不是单纯的介绍概念和使用方法，更重要的是如何针对不同的业务场景做合理的RAID配置和参数优化，对于SSD固态硬盘的加入我引入小米运维团队的实验数据，同时我也相信分布式存储会逐步走向成熟，以OpenStack，VSAN，Nutanix为代表头顶软件定义和超融合概念的技术也已经开始了暗战。</p>
<blockquote>
<p>RAID的本质是平衡可用性与成本  </p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2016年03月11日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/raid/" target="_blank" rel="external">http://wsgzao.github.io/post/raid/</a></p>
<p><strong>扩展阅读</strong></p>
<p>RAID - <a href="https://zh.wikipedia.org/wiki/RAID" target="_blank" rel="external">https://zh.wikipedia.org/wiki/RAID</a><br>RAID技术发展综述 - <a href="http://blog.csdn.net/liuaigui/article/details/4581970" target="_blank" rel="external">http://blog.csdn.net/liuaigui/article/details/4581970</a><br>SSD阵列卡方案优化：考虑使用RAID 50替代RAID 10 - <a href="http://noops.me/?p=1805" target="_blank" rel="external">http://noops.me/?p=1805</a></p>
<hr>
<h2 id="RAID基础知识">RAID基础知识</h2><blockquote>
<p>感谢@刘爱贵，详细知识点可参考扩展阅读</p>
</blockquote>
<h3 id="基本原理">基本原理</h3><p>RAID （ Redundant Array of Independent Disks ）即独立磁盘冗余阵列，通常简称为磁盘阵列。简单地说， RAID 是由多个独立的高性能磁盘驱动器组成的磁盘子系统，从而提供比单个磁盘更高的存储性能和数据冗余的技术。 RAID 是一类多磁盘管理技术，其向主机环境提供了成本适中、数据可靠性高的高性能存储。 SNIA 对 RAID 的定义是 ：一种磁盘阵列，部分物理存储空间用来记录保存在剩余空间上的用户数据的冗余信息。当其中某一个磁盘或访问路径发生故障时，冗余信息可用来重建用户数据。磁盘条带化虽然与 RAID 定义不符，通常还是称为 RAID （即 RAID0 ）。</p>
<p>RAID 的初衷是为大型服务器提供高端的存储功能和冗余的数据安全。在整个系统中， RAID 被看作是由两个或更多磁盘组成的存储空间，通过并发地在多个磁盘上读写数据来提高存储系统的 I/O 性能。大多数 RAID 等级具有完备的数据校验、纠正措施，从而提高系统的容错性，甚至镜像方式，大大增强系统的可靠性， Redundant 也由此而来。</p>
<p>这里要提一下 JBOD （ Just a Bunch of Disks ）。最初 JBOD 用来表示一个没有控制软件提供协调控制的磁盘集合，这是 RAID 区别与 JBOD 的主要因素。目前 JBOD 常指磁盘柜，而不论其是否提供 RAID 功能。</p>
<p>RAID 的两个关键目标是提高数据可靠性和 I/O 性能。磁盘阵列中，数据分散在多个磁盘中，然而对于计算机系统来说，就像一个单独的磁盘。通过把相同数据同时写入到多块磁盘（典型地如镜像），或者将计算的校验数据写入阵列中来获得冗余能力，当单块磁盘出现故障时可以保证不会导致数据丢失。有些 RAID 等级允许更多地 磁盘同时发生故障，比如 RAID6 ，可以是两块磁盘同时损坏。在这样的冗余机制下，可以用新磁盘替换故障磁盘， RAID 会自动根据剩余磁盘中的数据和校验数据重建丢失的数据，保证数据一致性和完整性。数据分散保存在 RAID 中的多个不同磁盘上，并发数据读写要大大优于单个磁盘，因此可以获得更高的聚合 I/O 带宽。当然，磁盘阵列会减少全体磁盘的总可用存储空间，牺牲空间换取更高的可靠性和性能。比如， RAID1 存储空间利用率仅有 50% ， RAID5 会损失其中一个磁盘的存储容量，空间利用率为 (n-1)/n 。</p>
<p>磁盘阵列可以在部分磁盘（单块或多块，根据实现而论）损坏的情况下，仍能保证系统不中断地连续运行。在重建故障磁盘数据至新磁盘的过程中，系统可以继续正常运行，但是性能方面会有一定程度上的降低。一些磁盘阵列在添加或删除磁盘时必须停机，而有些则支持热交换 （ Hot Swapping ），允许不停机下替换磁盘驱动器。这种高端磁盘阵列主要用于要求高可能性的应用系统，系统不能停机或尽可能少的停机时间。一般来说， RAID 不可作为数据备份的替代方案，它对非磁盘故障等造成的数据丢失无能为力，比如病毒、人为破坏、意外删除等情形。此时的数据丢失是相对操作系统、文件系统、卷管理器或者应用系统来说的，对于 RAID 系统来身，数据都是完好的，没有发生丢失。所以，数据备份、灾 备等数据保护措施是非常必要的，与 RAID 相辅相成，保护数据在不同层次的安全性，防止发生数据丢失。</p>
<p>RAID 中主要有三个关键概念和技术：镜像（ Mirroring ）、数据条带（ Data Stripping ）和数据校验（ Data parity ）。镜像，将数据复制到多个磁盘，一方面可以提高可靠性，另一方面可并发从两个或多个副本读取数据来提高读性能。显而易见，镜像的写性能要稍低， 确保数据正确地写到多个磁盘需要更多的时间消耗。数据条带，将数据分片保存在多个不同的磁盘，多个数据分片共同组成一个完整数据副本，这与镜像的多个副本是不同的，它通常用于性能考虑。数据条带具有更高的并发粒度，当访问数据时，可以同时对位于不同磁盘上数据进行读写操作， 从而获得非常可观的 I/O 性能提升 。数据校验，利用冗余数据进行数据错误检测和修复，冗余数据通常采用海明码、异或操作等算法来计算获得。利用校验功能，可以很大程度上提高磁盘阵列的可靠性、鲁棒性和容错能力。不过，数据校验需要从多处读取数据并进行计算和对比，会影响系统性能。 不同等级的 RAID 采用一个或多个以上的三种技术，来获得不同的数据可靠性、可用性和 I/O 性能。至于设计何种 RAID （甚至新的等级或类型）或采用何种模式的 RAID ，需要在深入理解系统需求的前提下进行合理选择，综合评估可靠性、性能和成本来进行折中的选择。</p>
<p>RAID 思想从提出后就广泛被业界所接纳，存储工业界投入了大量的时间和财力来研究和开发相关产品。而且，随着处理器、内存、计算机接口等技术的不断发展， RAID 不断地发展和革新，在计算机存储领域得到了广泛的应用，从高端系统逐渐延伸到普通的中低端系统。 RAID 技术如此流行，源于其具有显著的特征和优势，基本可以满足大部分的数据存储需求。总体说来， RAID 主要优势有如下几点：<br>(1) 大容量<br>　　这是 RAID 的一个显然优势，它扩大了磁盘的容量，由多个磁盘组成的 RAID 系统具有海量的存储空间。现在单个磁盘的容量就可以到 1TB 以上，这样 RAID 的存储容量就可以达到 PB 级，大多数的存储需求都可以满足。一般来说， RAID 可用容量要小于所有成员磁盘的总容量。不同等级的 RAID 算法需要一定的冗余开销，具体容量开销与采用算法相关。如果已知 RAID 算法和容量，可以计算出 RAID 的可用容量。通常， RAID 容量利用率在 50% ~ 90% 之间。<br>(2) 高性能<br>　　 RAID 的高性能受益于数据条带化技术。单个磁盘的 I/O 性能受到接口、带宽等计算机技术的限制，性能往往很有 限，容易成为系统性能的瓶颈。通过数据条带化， RAID 将数据 I/O 分散到各个成员磁盘上，从而获得比单个磁盘成倍增长的聚合 I/O 性能。<br>(3) 可靠性<br>　　可用性和可靠性是 RAID 的另一个重要特征。从理论上讲，由多个磁盘组成的 RAID 系统在可靠性方面应该比单个磁盘要差。这里有个隐含假定：单个磁盘故障将导致整个 RAID 不可用。 RAID 采用镜像和数据校验等数据冗余技术，打破了这个假定。 镜像是最为原始的冗余技术，把某组磁盘驱动器上的数据完全复制到另一组磁盘驱动器上，保证总有数据副本可用。 比起镜像 50% 的冗余开销 ，数据校验要小很多，它利用校验冗余信息对数据进行校验和纠错。 RAID 冗余技术大幅提升数据可用性和可靠性，保证了若干磁盘出错时，不 会导致数据的丢失，不影响系统的连续运行。<br>(4) 可管理性<br>　　实际上， RAID 是一种虚拟化技术，它对多个物理磁盘驱动器虚拟成一个大容量的逻辑驱动器。对于外部主机系统来说， RAID 是一个单一的、快速可靠的大容量磁盘驱动器。这样，用户就可以在这个虚拟驱动器上来组织和存储应用系统数据。 从用户应用角度看，可使存储系统简单易用，管理也很便利。 由于 RAID 内部完成了大量的存储管理工作，管理员只需要管理单个虚拟驱动器，可以节省大量的管理工作。 RAID 可以动态增减磁盘驱动器，可自动进行数据校验和数据重建，这些都可以 大大简化管理工作。</p>
<h3 id="关键技术">关键技术</h3><blockquote>
<p>镜像</p>
</blockquote>
<p>镜像是一种冗余技术，为磁盘提供保护功能，防止磁盘发生故障而造成数据丢失。对于 RAID 而言，采用镜像技术 典型地 将会同时在阵列中产生两个完全相同的数据副本，分布在两个不同的磁盘驱动器组上。镜像提供了完全的数据冗余能力，当一个数据副本失效不可用时，外部系统仍可正常访问另一副本，不会对应用系统运行和性能产生影响。而且，镜像不需要额外的计算和校验，故障修复非常快，直接复制即可。镜像技术可以从多个副本进行并发读取数据，提供更高的读 I/O 性能，但不能并行写数据，写多个副本会会导致一定的 I/O 性能降低。</p>
<p>镜像技术提供了非常高的数据安全性，其代价也是非常昂贵的，需要　　　至少双倍的存储空间。高成本限制了镜像的广泛应用，主要应用于至关重要的数据保护，这种场合下数据丢失会造成巨大的损失。另外，镜像通过 “ 拆分 ” 能获得特定时间点的上数据快照，从而可以实现一种备份窗口几乎为零的数据备份技术。</p>
<blockquote>
<p>数据条带</p>
</blockquote>
<p>磁盘存储的性能瓶颈在于磁头寻道定位，它是一种慢速机械运动，无法与高速的 CPU 匹配。再者，单个磁盘驱动器性能存在物理极限， I/O 性能非常有限。 RAID 由多块磁盘组成，数据条带技术将数据以块的方式分布存储在多个磁盘中，从而可以对数据进行并发处理。这样写入和读取数据就可以在多个磁盘上同时进行，并发产生非常高的聚合 I/O ，有效提高了整体 I/O 性能，而且具有良好的线性扩展性。这对大容量数据尤其显著，如果不分块，数据只能按顺序存储在磁盘阵列的磁盘上，需要时再按顺序读取。而通过条带技术，可获得数倍与顺序访问的性能提升。</p>
<p>数据条带技术的分块大小选择非常关键。条带粒度可以是一个字节至几 KB 大小，分块越小，并行处理能力就越强，数据存取速度就越高，但同时就会增加块存取的随机性和块寻址时间。实际应用中，要根据数据特征和需求来选择合适的分块大小，在数据存取随机性和并发处理能力之间进行平衡，以争取尽可能高的整体性能。</p>
<p>数据条带是基于提高 I/O 性能而提出的，也就是说它只关注性能， 而对数据可靠性、可用性没有任何改善。实际上，其中任何一个数据条带损坏都会导致整个数据不可用，采用数据条带技术反而增加了数据发生丢失的概念率。</p>
<blockquote>
<p>数据校验</p>
</blockquote>
<p>镜像具有高安全性、高读性能，但冗余开销太昂贵。数据条带通过并发性来大幅提高性能，然而对数据安全性、可靠性未作考虑。数据校验是一种冗余技术，它用校验数据来提供数据的安全，可以检测数据错误，并在能力允许的前提下进行数据重构。相对镜像，数据校验大幅缩减了冗余开销，用较小的代价换取了极佳的数据完整性和可靠性。数据条带技术提供高性能，数据校验提供数据安全性， RAID 不同等级往往同时结合使用这两种技术。</p>
<p>采用数据校验时， RAID 要在写入数据同时进行校验计算，并将得到的校验数据存储在 RAID 成员磁盘中。校验数据可以集中保存在某个磁盘或分散存储在多个不同磁盘中，甚至校验数据也可以分块，不同 RAID 等级实现各不相同。当其中一部分数据出错时，就可以对剩余数据和校验数据进行反校验计算重建丢失的数据。校验技术相对于镜像技术的优势在于节省大量开销，但由于每次数据读写都要进行大量的校验运算，对计算机的运算速度要求很高，必须使用硬件 RAID 控制器。在数据重建恢复方面，检验技术比镜像技术复杂得多且慢得多。</p>
<p>海明校验码和 异或校验是两种最为常用的 数据校验算法。海明校验码是由理查德 · 海明提出的，不仅能检测错误，还能给出错误位置并自动纠正。海明校验的基本思想是：将有效信息按照某种规律分成若干组，对每一个组作奇偶测试并安排一个校验位，从而能提供多位检错信息，以定位错误点并纠正。可见海明校验实质上是一种多重奇偶校验。异或校验通过异或逻辑运算产生，将一个有效信息与一个给定的初始值进行异或运算，会得到校验信息。如果有效信息出现错误，通过校验信息与初始值的异或运算能还原正确的有效信息。</p>
<h2 id="常见RAID类型">常见RAID类型</h2><blockquote>
<p>常见5种RAID类型对比，n位磁盘数量，详细介绍可参考扩展阅读</p>
</blockquote>
<table>
<thead>
<tr>
<th>RAID 等级</th>
<th>RAID0</th>
<th>RAID1</th>
<th>RAID5</th>
<th>RAID6</th>
<th>RAID10</th>
</tr>
</thead>
<tbody>
<tr>
<td>别名</td>
<td>条带</td>
<td>镜像</td>
<td>分布奇偶校验条带</td>
<td>双重奇偶校验条带</td>
<td>镜像加条带</td>
</tr>
<tr>
<td>容错性</td>
<td>无</td>
<td>有</td>
<td>有</td>
<td>有</td>
<td>有</td>
</tr>
<tr>
<td>冗余类型</td>
<td>无</td>
<td>有</td>
<td>有</td>
<td>有</td>
<td>有</td>
</tr>
<tr>
<td>热备盘</td>
<td>无</td>
<td>有</td>
<td>有</td>
<td>有</td>
<td>有</td>
</tr>
<tr>
<td>读性能</td>
<td>高</td>
<td>低</td>
<td>高</td>
<td>高</td>
<td>高</td>
</tr>
<tr>
<td>随机写性能</td>
<td>高</td>
<td>低</td>
<td>一般</td>
<td>低</td>
<td>一般</td>
</tr>
<tr>
<td>连续写性能</td>
<td>高</td>
<td>低</td>
<td>低</td>
<td>低</td>
<td>一般</td>
</tr>
<tr>
<td>需要磁盘数</td>
<td>n≥1</td>
<td>2n (n≥1)</td>
<td>n≥3</td>
<td>n≥4</td>
<td>2n(n≥2)≥4</td>
</tr>
<tr>
<td>可用容量</td>
<td>全部</td>
<td>50%</td>
<td>(n-1)/n</td>
<td>(n-2)/n</td>
<td>50%</td>
</tr>
</tbody>
</table>
<h2 id="RAID_等级">RAID 等级</h2><h3 id="标准_RAID_等级">标准 RAID 等级</h3><p>SNIA 、 Berkeley 等组织机构把 RAID0 、 RAID1 、 RAID2 、 RAID3 、 RAID4 、 RAID5 、 RAID6 七个等级定为标准的 RAID 等级，这也被业界和学术界所公认。标准等级是最基本的 RAID 配置集合，单独或综合利用数据条带、镜像和数据校验技术。标准 RAID 可以组合，即 RAID 组合等级，满足 对性能、安全性、可靠性要求更高的存储应用需求。</p>
<h3 id="JBOD">JBOD</h3><p>JBOD （ Just a Bunch Of Disks ）不是标准的 RAID 等级，它通常用来表示一个没有控制软件提供协调控制的磁盘集合。 JBOD 将多个物理磁盘串联起来，提供一个巨大的逻辑磁盘。 JBOD 的数据存放机制是由第一块磁盘开始按顺序往后存储，当前磁盘存储空间用完后，再依次往后面的磁盘存储数据。 JBOD 存储性能完全等同于单块磁盘，而且也不提供数据安全保护。它只是简单提供一种扩展存储空间的机制， JBOD 可用存储容量等于所有成员磁盘的存储空间之和。目前 JBOD 常指磁盘柜，而不论其是否提供 RAID 功能。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/JBOD.svg/500px-JBOD.svg.png" alt=""></p>
<h3 id="RAID0">RAID0</h3><p>RAID0 是一种简单的、无数据校验的数据条带化技术。实际上不是一种真正的 RAID ，因为它并不提供任何形式的冗余策略。 RAID0 将所在磁盘条带化后组成大容量的存储空间，将数据分散存储在所有磁盘中，以独立访问方式实现多块磁盘的并读访问。由于可以并发执行 I/O 操作，总线带宽得到充分利用。再加上不需要进行数据校验， RAID0 的性能在所有 RAID 等级中是最高的。理论上讲，一个由 n 块磁盘组成的 RAID0 ，它的读写性能是单个磁盘性能的 n 倍，但由于总线带宽等多种因素的限制，实际的性能提升低于理论值。</p>
<p>RAID0 具有低成本、高读写性能、 100% 的高存储空间利用率等优点，但是它不提供数据冗余保护，一旦数据损坏，将无法恢复。 因此， RAID0 一般适用于对性能要求严格但对数据安全性和可靠性不高的应用，如视频、音频存储、临时数据缓存空间等。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/RAID_0.svg/325px-RAID_0.svg.png" alt=""></p>
<h3 id="RAID1">RAID1</h3><p>RAID1 称为镜像，它将数据完全一致地分别写到工作磁盘和镜像 磁盘，它的磁盘空间利用率为 50% 。 RAID1 在数据写入时，响应时间会有所影响，但是读数据的时候没有影响。 RAID1 提供了最佳的数据保护，一旦工作磁盘发生故障，系统自动从镜像磁盘读取数据，不会影响用户工作。</p>
<p>RAID1 与 RAID0 刚好相反，是为了增强数据安全性使两块 磁盘数据呈现完全镜像，从而达到安全性好、技术简单、管理方便。 RAID1 拥有完全容错的能力，但实现成本高。 RAID1 应用于对顺序读写性能要求高以及对数据保护极为重视的应用，如对邮件系统的数据保护。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/RAID_1.svg/325px-RAID_1.svg.png" alt=""></p>
<h3 id="RAID5">RAID5</h3><p>RAID5 应该是目前最常见的 RAID 等级，它的原理与 RAID4 相似，区别在于校验数据分布在阵列中的所有磁盘上，而没有采用专门的校验磁盘。对于数据和校验数据，它们的写操作可以同时发生在完全不同的磁盘上。因此， RAID5 不存在 RAID4 中的并发写操作时的校验盘性能瓶颈问题。另外， RAID5 还具备很好的扩展性。当阵列磁盘 数量增加时，并行操作量的能力也随之增长，可比 RAID4 支持更多的磁盘，从而拥有更高的容量以及更高的性能。</p>
<p>RAID5 的磁盘上同时存储数据和校验数据，数据块和对应的校验信息存保存在不同的磁盘上，当一个数据盘损坏时，系统可以根据同一条带的其他数据块和对应的校验数据来重建损坏的数据。与其他 RAID 等级一样，重建数据时， RAID5 的性能会受到较大的影响。</p>
<p>RAID5 兼顾存储性能、数据安全和存储成本等各方面因素，它可以理解为 RAID0 和 RAID1 的折中方案，是目前综合性能最佳的数据保护解决方案。 RAID5 基本上可以满足大部分的存储应用需求，数据中心大多采用它作为应用数据的保护方案。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/RAID_5.svg/675px-RAID_5.svg.png" alt=""></p>
<h3 id="RAID6">RAID6</h3><p>前面所 述的各个 RAID 等级都只能保护因单个磁盘失效而造成的数据丢失。如果两个磁盘同时发生故障，数据将无法恢复。 RAID6 引入双重校验的概念，它可以保护阵列中同时出现两个磁盘失效时，阵列仍能够继续工作，不会发生数据丢失。 RAID6 等级是在 RAID5 的基础上为了进一步增强数据保护而设计的一种 RAID 方式，它可以看作是一种扩展的 RAID5 等级。</p>
<p>RAID6 不仅要支持数据的恢复，还要支持校验数据的恢复，因此实现代价很高，控制器的设计也比其他等级更复杂、更昂贵。 RAID6 思想最常见的实现方式是采用两个独立的校验算法，假设称为 P 和 Q ，校验数据可以分别存储在两个不同的校验盘上，或者分散存储在所有成员磁盘中。当两个磁盘同时失效时，即可通过求解两元方程来重建两个磁盘上的数据。</p>
<p>RAID6 具有快速的读取性能、更高的容错能力。但是，它的成本要高于 RAID5 许多，写性能也较差，并有设计和实施非常复杂。因此， RAID6 很少得到实际应用，主要用于对数据安全等级要求非常高的场合。它一般是替代 RAID10 方案的经济性选择</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/RAID_6.svg/850px-RAID_6.svg.png" alt=""></p>
<h3 id="RAID_组合等级">RAID 组合等级</h3><p>标准 RAID 等级各有优势和不足。自然地，我们想到把多个 RAID 等级组合起来，实现优势互补，弥补相互的不足，从而达到在性能、数据安全性等指标上更高的 RAID 系统。目前在业界和学术研究中提到的 RAID 组合等级主要有 RAID00 、 RAID01 、 RAID10 、 RAID100 、 RAID30 、 RAID50 、 RAID53 、 RAID60 ，但实际得到较为广泛应用的只有 RAID01 和 RAID10 两个等级。当然，组合等级的实现成本一般都非常昂贵，只是在 少数特定场合应用。</p>
<h3 id="RAID10_和_RAID01">RAID10 和 RAID01</h3><p>一些文献把这两种 RAID 等级看作是等同的，本文认为是不同的。 RAID01 是先做条带化再作镜像，本质是对物理磁盘实现镜像；而 RAID10 是先做镜像再作条带化，是对虚拟磁盘实现镜像。相同的配置下，通常 RAID01 比 RAID10 具有更好的容错能力。</p>
<p>RAID01 兼备了 RAID0 和 RAID1 的优点，它先用两块磁盘建立镜像，然后再在镜像内部做条带化。 RAID01 的数据将同时写入到两个磁盘阵列中，如果其中一个阵列损坏，仍可继续工作，保证数据安全性的同时又提高了性能。 RAID01 和 RAID10 内部都含有 RAID1 模式，因此整体磁盘利用率均仅为 50% 。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/RAID_10.svg/800px-RAID_10.svg.png" alt=""><br><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/RAID_01.svg/800px-RAID_01.svg.png" alt=""></p>
<h3 id="RAID_50">RAID 50</h3><p>RAID 5与RAID 0的组合，先作RAID 5，再作RAID 0，也就是对多组RAID 5彼此构成Stripe访问。由于RAID 50是以RAID 5为基础，而RAID 5至少需要3颗硬盘，因此要以多组RAID 5构成RAID 50，至少需要6颗硬盘。以RAID 50最小的6颗硬盘配置为例，先把6颗硬盘分为2组，每组3颗构成RAID 5，如此就得到两组RAID 5，然后再把两组RAID 5构成RAID 0。</p>
<p>RAID 50在底层的任一组或多组RAID 5中出现1颗硬盘损坏时，仍能维持运作，不过如果任一组RAID 5中出现2颗或2颗以上硬盘损毁，整组RAID 50就会失效。</p>
<p>RAID 50由于在上层把多组RAID 5构成Stripe，性能比起单纯的RAID 5高，容量利用率比RAID5要低。比如同样使用9颗硬盘，由各3颗RAID 5再组成RAID 0的RAID 50，每组RAID 5浪费一颗硬盘，利用率为(1-3/9)，RAID 5则为(1-1/9)。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/9/9d/RAID_50.png" alt=""></p>
<h3 id="RAID_60">RAID 60</h3><p>RAID 6与RAID 0的组合：先作RAID 6，再作RAID 0。换句话说，就是对两组以上的RAID 6作Stripe访问。RAID 6至少需具备4颗硬盘，所以RAID 60的最小需求是8颗硬盘。</p>
<p>由于底层是以RAID 6组成，所以RAID 60可以容许任一组RAID 6中损毁最多2颗硬盘，而系统仍能维持运作；不过只要底层任一组RAID 6中损毁3颗硬盘，整组RAID 60就会失效，当然这种情况的概率相当低。</p>
<p>比起单纯的RAID 6，RAID 60的上层通过结合多组RAID 6构成Stripe访问，因此性能较高。不过使用门槛高，而且容量利用率低是较大的问题。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/9/9d/Raid_60.jpg" alt=""></p>
<h2 id="关于RAID参数调优">关于RAID参数调优</h2><blockquote>
<p>通常情况下建议系统(RAID1)与数据(RAID[5|10])分离，这里引用@叶金荣老师的一段话</p>
</blockquote>
<ol>
<li>使用SSD或者PCIe SSD设备，至少获得数百倍甚至万倍的IOPS提升</li>
<li>购置阵列卡同时配备CACHE及BBU模块，可明显提升IOPS（主要是指机械盘，SSD或PCIe SSD除外。同时需要定期检查CACHE及BBU模块的健康状况，确保意外时不至于丢失数据）</li>
<li>有阵列卡时，设置阵列写策略为WB，甚至FORCE WB（若有双电保护，或对数据安全性要求不是特别高的话），严禁使用WT策略。并且闭阵列预读策略</li>
<li>尽可能选用RAID-10，而非RAID-5(<code>这句话有待商榷</code>)</li>
<li>使用机械盘的话，尽可能选择高转速的，例如选用15KRPM，而不是7.2KRPM的盘，不差几个钱的；</li>
</ol>
<h2 id="SSD阵列卡方案优化">SSD阵列卡方案优化</h2><blockquote>
<p>感谢@小米noops运维团队，详细实验数据请参考扩展阅读</p>
</blockquote>
<p><img src="http://noops.me/wp-content/uploads/2015/03/ssd_r50_r10_04.png" alt=""><br><img src="http://noops.me/wp-content/uploads/2015/03/ssd_r50_r10_05.png" alt=""></p>
<p><strong>性能测试结论</strong></p>
<p>性能测试显示，相同容量的R50和R10性能接近：其中小块文件的随机读R50要全面好于R10，随机写4K虽然R50和R10差距在28%，但是块增大后R50要全面优于R10。顺序读写方面，R50和R10十分接近。</p>
<p>容错方面，R50接近R10：第二块盘容错率R50十分接近R10，两者相差30%。R10的优势主要是在有一定的概率提供第三、甚至第四块磁盘的容错率，但是考虑到并非100%容错，因此从容错角度来看R50虽然和R10有一些差距，但也已体现出较好的容错率，至少优于R5。而且R50搭配灵活，甚至可以指定3组R5以达到最大3块磁盘的容错；</p>
<p>成本方面，R50有很大优势：按这个配置计算R50只有R10的3/4。</p>
<p><strong>总结</strong></p>
<p>RAID 50提供了接近RAID 10性能、可用性以及接近RAID 5成本的特性，具有较好的整体性价比优势，所以考虑使用RAID 50替换RAID 10吧</p>
]]></content>
    <summary type="html">
    <![CDATA[RAID的本质是平衡可用性与成本]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Red Hat OpenStack官方培训笔记]]></title>
    <link href="http://wsgzao.github.io/post/openstack/"/>
    <id>http://wsgzao.github.io/post/openstack/</id>
    <published>2016-03-04T08:22:32.000Z</published>
    <updated>2016-03-05T10:07:39.783Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/Cn77HG14.png" alt=""></p>
<h2 id="前言">前言</h2><p>为期6天的Red Hat OpenStack培训受益良多，实验过程也非常丰满，有很多知识需要吸收和消化，文章中把详细的实验过程全部分享出来。实验环境是通过Vagrant部署rhel7.1快速生成，使用4G以上笔记本电脑就可以完成搭建。所有的配置参数都有备注说明，希望可以帮助大家快速学习和熟悉OpenStack。这或许也是我Blog中最长的一篇凑字数文章。</p>
<p>OpenStack是代替VMware私有云的最佳方案之一</p>
<h2 id="更新记录">更新记录</h2><p>2016年03月05日 - 增加slideshare ppt分享，补充OpenStack测试和开发<br>2016年03月04日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/openstack/" target="_blank" rel="external">http://wsgzao.github.io/post/openstack/</a></p>
<p><strong>扩展阅读</strong></p>
<ul>
<li>OpenStack | 红帽 - <a href="https://www.redhat.com/zh/insights/openstack" target="_blank" rel="external">https://www.redhat.com/zh/insights/openstack</a></li>
</ul>
<h2 id="参考资料">参考资料</h2><p><img src="http://ww1.sinaimg.cn/large/7207510dgw1f1kymzm0itj211y0k8gs9.jpg" alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">file://E:\all-in-one (<span class="number">2</span> folders, <span class="number">0</span> files, <span class="number">0</span> bytes, <span class="number">486.59</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">├─docs  (<span class="number">1</span> folders, <span class="number">6</span> files, <span class="number">18.04</span> MB, <span class="number">18.08</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">│  │  classroom.pptx  <span class="number">8.42</span> MB</span><br><span class="line">│  │  env_cfg.txt <span class="number">338</span> bytes</span><br><span class="line">│  │  note.sh <span class="number">48.57</span> KB</span><br><span class="line">│  │  OpenStack Installation Guide (EL7 ver.).pdf <span class="number">1.52</span> MB</span><br><span class="line">│  │  Red Hat Enterprise Linux OpenStack Platform <span class="number">7</span> Installation Reference en-US.pdf  <span class="number">8.05</span> MB</span><br><span class="line">│  │  ~<span class="variable">$classroom</span>.pptx    <span class="number">165</span> bytes</span><br><span class="line">│  └─packstack网络配置文件 (<span class="number">0</span> folders, <span class="number">1</span> files, <span class="number">41.42</span> KB, <span class="number">41.42</span> KB <span class="keyword">in</span> total.)</span><br><span class="line">│          packstack-answers.txt <span class="number">41.42</span> KB</span><br><span class="line">└─env_<span class="keyword">for</span>_windows   (<span class="number">1</span> folders, <span class="number">2</span> files, <span class="number">468.51</span> MB, <span class="number">468.51</span> MB <span class="keyword">in</span> total.)</span><br><span class="line">    │  rhel-<span class="number">7.1</span>-x86_64.box <span class="number">468.51</span> MB</span><br><span class="line">    │  Vagrantfile <span class="number">3.01</span> KB</span><br><span class="line">    └─.vagrant    (<span class="number">0</span> folders, <span class="number">0</span> files, <span class="number">0</span> bytes, <span class="number">0</span> bytes <span class="keyword">in</span> total.)</span><br></pre></td></tr></table></figure>
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/BNyD2WObWHUVc0" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> 

<blockquote>
<p>浏览slideshare可能要翻墙，如需帮助可参考<a href="http://wsgzao.github.io/post/fq/" target="_blank" rel="external">《GFW翻墙小结》</a></p>
</blockquote>
<ol>
<li>Red Hat OpenStack Platform 7 Training.pptx</li>
<li>OpenStack实战指南.pdf</li>
</ol>
<h2 id="实验环境">实验环境</h2><p><strong>版本</strong><br>OS：Windows 10 x86_64<br>VirtualBox：VirtualBox-5.0.14-105127-Win<br>Vagrant：vagrant_1.8.1<br>Terminal：NetSarang.Xmanager.Enterprise.5</p>
<p><strong>备注</strong></p>
<ol>
<li>BIOS开启VT</li>
<li>使用管理员权限执行下面的步骤</li>
</ol>
<p><strong>搭建步骤</strong></p>
<ol>
<li>安装 Oracle VirtualBox</li>
<li>安装 Vagrant</li>
<li>在工作目录下<code>E:\vagrantbox</code>，命令行：<code>vagrant init</code> (生成 Vagrantfile，需复制并修改模板)</li>
<li>配置 Oracle VirtualBox， 使网络与 Vagrantfile 中指定的一致</li>
<li>在工作目录下，命令行：vagrant up(启动)，vagrant halt(优雅关机)</li>
<li>每日实验完成建议关机做一次snapshot快照备份，不希望关机可以选择保存状态类似VMware suspend挂起</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> E:\vagrantbox</span><br><span class="line">vagrant init</span><br><span class="line">vagrant box add rhle-<span class="number">7.1</span> rhel-<span class="number">7.1</span>-x86_64.box</span><br><span class="line">vagrant box list</span><br><span class="line">vagrant up &#123;node1|node2|node3&#125;</span><br><span class="line">vagrant destroy &#123;node1|node2|node3&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改Vagrantfile</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># All Vagrant configuration is done below. The "2" in Vagrant.configure</span></span><br><span class="line"><span class="comment"># configures the configuration version (we support older styles for</span></span><br><span class="line"><span class="comment"># backwards compatibility). Please don't change it unless you know what</span></span><br><span class="line"><span class="comment"># you're doing.</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$script</span> = &lt;&lt;<span class="constant">SCRIPT</span></span><br><span class="line">echo doing provision...</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="variable">$LANG</span> = <span class="string">"en_US.UTF-8"</span> ]; <span class="keyword">then</span></span><br><span class="line">    echo <span class="string">"export LC_ALL=en_US.UTF-8"</span> <span class="prompt">&gt;&gt; </span>/root/.bashrc</span><br><span class="line">fi</span><br><span class="line">echo -e <span class="string">"10.30.0.10\tnode-1.example.com\tnode-1\n10.30.0.11\tnode-2.example.com\tnode-2\n10.30.0.12\tnode-3.example.com\tnode-3"</span> <span class="prompt">&gt;&gt; </span>/etc/hosts</span><br><span class="line">echo -e <span class="string">"192.168.0.10\tnode-1.example.com\tnode-1\n192.168.0.11\tnode-2.example.com\tnode-2\n192.168.0.12\tnode-3.example.com\tnode-3"</span> <span class="prompt">&gt;&gt; </span>/etc/hosts</span><br><span class="line">rm -f /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yum install -y wget &amp;&amp; wget -<span class="constant">O</span> /etc/yum.repos.d/rh-openstack-<span class="number">7</span>-el7.repo <span class="symbol">http:</span>/<span class="regexp">/192.168.1.100/content</span><span class="regexp">/cfgfile/rh</span>-openstack-<span class="number">7</span>-el7.repo</span><br><span class="line">yum install -y wget &amp;&amp; wget -<span class="constant">O</span> /etc/yum.repos.d/rh-rhel-<span class="number">7</span>-el7.repo <span class="symbol">http:</span>/<span class="regexp">/192.168.1.100/content</span><span class="regexp">/cfgfile/rh</span>-rhel-<span class="number">7</span>-el7.repo</span><br><span class="line"></span><br><span class="line">echo done...</span><br><span class="line"><span class="constant">SCRIPT</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant</span>.configure(<span class="number">2</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.define <span class="symbol">:node1</span> <span class="keyword">do</span> |node1|</span><br><span class="line">    node1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node1.vm.hostname = <span class="string">"node-1.example.com"</span>    </span><br><span class="line">    node1.vm.network <span class="string">"forwarded_port"</span>, <span class="symbol">guest:</span> <span class="number">80</span>, <span class="symbol">host:</span> <span class="number">18080</span></span><br><span class="line">    node1.vm.network <span class="string">"forwarded_port"</span>, <span class="symbol">guest:</span> <span class="number">22</span>, <span class="symbol">host:</span> <span class="number">12222</span></span><br><span class="line">    node1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">2048</span></span><br><span class="line">      v.cpus = <span class="number">2</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:node2</span> <span class="keyword">do</span> |node2|</span><br><span class="line">    node2.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node2.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node2.vm.hostname = <span class="string">"node-2.example.com"</span>    </span><br><span class="line">    node2.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node2.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node2.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node2.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:node3</span> <span class="keyword">do</span> |node3|</span><br><span class="line">    node3.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node3.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node3.vm.hostname = <span class="string">"node-3.example.com"</span></span><br><span class="line">    node3.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node3.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node3.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.12"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node3.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.12"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="OpenStack_组件">OpenStack 组件</h2><table>
<thead>
<tr>
<th>Code Name</th>
<th>OpenStack Service</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Keystone</td>
<td>Indentity</td>
<td>提供其它 OpenStack 服务的身份验证和授权服务。提供其它OpenStack 服务的 endpoint 列表。</td>
</tr>
<tr>
<td>Glance</td>
<td>Image</td>
<td>存取虚拟机磁盘镜像。OpenStack Compute 在实例资源调配时利用此特性。</td>
</tr>
<tr>
<td>Nova</td>
<td>Compute</td>
<td>管理 OpenStack 环境中的计算实例的生命周期。职责包括依据需求生成、调度、和终止实例。</td>
</tr>
<tr>
<td>Neutron</td>
<td>Networking</td>
<td>将网络连接作为服务提供给其它 OpenStack 服务，例如 OpenStack Compute。提供用户定义网络的 API 和连接它们的附加组件，其可插拔的架构设计支持很多主流网络供应商及技术。</td>
</tr>
<tr>
<td>Cinder</td>
<td>Block Storage</td>
<td>对正在运行的实例提供持久性的数据块存储。其可插拔驱动架构设计有助于创建和管理块存储设备。</td>
</tr>
<tr>
<td>Swift</td>
<td>Object Storage</td>
<td>通过基于 REST、HTTP 的 API 存取任何非结构化的数据对象。数据复写和扩展架构使其具备高度的容错性。这种机制与可挂载目录的文件服务器并不一致。</td>
</tr>
<tr>
<td>Heat</td>
<td>Orchestration</td>
<td>利用 OpenStack 本机 REST API 及 CloudFormation 兼容的查询 API，通过本机 HOT 模板格式或 AWS CloudFormation 模板格式编排多个复合云应用程序。</td>
</tr>
<tr>
<td>Horizon</td>
<td>Dashboard</td>
<td>提供与底层 OpenStack 服务进行交互的基于 Web 的自助门户，包括启动实例、分配 IP 地址、设置访问控制。</td>
</tr>
<tr>
<td>Ceilometer</td>
<td>Telemetry</td>
<td>出于计费、基准审查、可扩展性、及统计方面的目的，用于监测和计量 OpenStack 云。</td>
</tr>
</tbody>
</table>
<blockquote>
<p>实验环境</p>
</blockquote>
<table>
<thead>
<tr>
<th>节点</th>
<th>IP</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>node-1</td>
<td>192.168.0.10</td>
<td>Controller Node, Network Node</td>
</tr>
<tr>
<td>node-2</td>
<td>192.168.0.11</td>
<td>Compute Node 1</td>
</tr>
<tr>
<td>node-3</td>
<td>192.168.0.12</td>
<td>Compute Node 2</td>
</tr>
</tbody>
</table>
<h2 id="OpenStack">OpenStack</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment"># Preinstallation </span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Environment</span></span><br><span class="line"></span><br><span class="line">node-<span class="number">1</span> | <span class="number">192.168</span>.<span class="number">0.10</span> | Controller Node, Network Node</span><br><span class="line">node-<span class="number">2</span> | <span class="number">192.168</span>.<span class="number">0.11</span> | Compute Node <span class="number">1</span></span><br><span class="line">node-<span class="number">3</span> | <span class="number">192.168</span>.<span class="number">0.12</span> | Compute Node <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Repository</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line"></span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/repofiles/rh-ceph-<span class="number">1</span>-el7.repo   </span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/repofiles/rh-rhel-<span class="number">7</span>-el7.repo   </span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/repofiles/rh-rhelosp-<span class="number">7</span>-el7.repo</span><br><span class="line"></span><br><span class="line">yum clean all</span><br><span class="line">yum repolist</span><br><span class="line"></span><br><span class="line">yum install -y net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment">#hosts</span></span><br><span class="line">cat /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>       node-<span class="number">1</span>.example.com node-<span class="number">1</span> localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::<span class="number">1</span>             localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"><span class="number">10.30</span>.<span class="number">0.10</span>      node-<span class="number">1</span>.example.com  node-<span class="number">1</span></span><br><span class="line"><span class="number">10.30</span>.<span class="number">0.11</span>      node-<span class="number">2</span>.example.com  node-<span class="number">2</span></span><br><span class="line"><span class="number">10.30</span>.<span class="number">0.12</span>      node-<span class="number">3</span>.example.com  node-<span class="number">3</span></span><br><span class="line"><span class="number">192.168</span>.<span class="number">0.10</span>    node-<span class="number">1</span>.example.com  node-<span class="number">1</span></span><br><span class="line"><span class="number">192.168</span>.<span class="number">0.11</span>    node-<span class="number">2</span>.example.com  node-<span class="number">2</span></span><br><span class="line"><span class="number">192.168</span>.<span class="number">0.12</span>    node-<span class="number">3</span>.example.com  node-<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ping测试节点</span></span><br><span class="line">ping  node-<span class="number">1</span></span><br><span class="line">ping  node-<span class="number">2</span></span><br><span class="line">ping  node-<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用selinux</span></span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line">sed -i <span class="string">'s/^SELINUX=.*/SELINUX=permissive/'</span> /etc/selinux/config</span><br><span class="line">yum install -y ntp</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ntp</span></span><br><span class="line">vi /etc/ntp.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#主控节点</span></span><br><span class="line">server <span class="number">127.127</span>.<span class="number">1.0</span> iburst</span><br><span class="line"><span class="comment">#其他节点指向10.30.0.10</span></span><br><span class="line">server <span class="number">10.30</span>.<span class="number">0.10</span> iburst</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> ntpd.service</span><br><span class="line">systemctl start ntpd.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用firewall</span></span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用NetworkManager</span></span><br><span class="line">systemctl <span class="built_in">disable</span> NetworkManager</span><br><span class="line">systemctl stop NetworkManager</span><br><span class="line"></span><br><span class="line"><span class="comment">#ntp客户端同步</span></span><br><span class="line">ntpdate -u <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#主控节点安装数据库</span></span><br><span class="line">yum install -y mariadb mariadb-server MySQL-python</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置mariadb</span></span><br><span class="line">vi /etc/my.cnf.d/mariadb_openstack.cnf</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"><span class="built_in">bind</span>-address = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line">default-storage-engine = innodb</span><br><span class="line">innodb_file_per_table</span><br><span class="line">collation-server = utf8_general_ci</span><br><span class="line">init-connect = <span class="string">'SET NAMES utf8'</span></span><br><span class="line">character-set-server = utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动mariadb</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb.service</span><br><span class="line">systemctl start mariadb.service</span><br><span class="line">mysql_secure_installation</span><br><span class="line">[enter <span class="keyword">for</span> none]</span><br><span class="line">[y]</span><br><span class="line">redhat</span><br><span class="line">[y]</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装rabbitmq</span></span><br><span class="line">yum install -y rabbitmq-server</span><br><span class="line">systemctl <span class="built_in">enable</span> rabbitmq-server.service</span><br><span class="line">systemctl start rabbitmq-server.service</span><br><span class="line">setenforce <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#建立keystone数据库</span></span><br><span class="line">mysql -u root -predhat</span><br><span class="line"></span><br><span class="line">CREATE DATABASE keystone;</span><br><span class="line">GRANT ALL PRIVILEGES ON keystone.* TO <span class="string">'keystone'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">GRANT ALL PRIVILEGES ON keystone.* TO <span class="string">'keystone'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">EXIT</span><br><span class="line"></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment"># OpenStack Installation </span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Keystone Installation</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#安装Keystone</span></span><br><span class="line">yum install -y openstack-keystone httpd mod_wsgi python-openstackclient memcached python-memcached</span><br><span class="line">systemctl <span class="built_in">enable</span> memcached.service</span><br><span class="line">systemctl start memcached.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置keystone参数</span></span><br><span class="line">vi /etc/keystone/keystone.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">admin_token = redhat</span><br><span class="line">verbose = True</span><br><span class="line">[database]</span><br><span class="line">...</span><br><span class="line">connection = mysql://keystone:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/keystone</span><br><span class="line">[memcache]</span><br><span class="line">...</span><br><span class="line">servers = localhost:<span class="number">11211</span></span><br><span class="line">[token]</span><br><span class="line">...</span><br><span class="line">provider = keystone.token.providers.uuid.Provider</span><br><span class="line">driver = keystone.token.persistence.backends.memcache.Token</span><br><span class="line">[revoke]</span><br><span class="line">...</span><br><span class="line">driver = keystone.contrib.revoke.backends.sql.Revoke</span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化keystone数据库</span></span><br><span class="line">su <span class="operator">-s</span> /bin/sh -c <span class="string">"keystone-manage db_sync"</span> keystone</span><br><span class="line">tail <span class="operator">-f</span> /var/<span class="built_in">log</span>/keystone/keystone.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置servername</span></span><br><span class="line">vi /etc/httpd/conf/httpd.conf</span><br><span class="line"></span><br><span class="line">ServerName node-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置keystone虚拟机</span></span><br><span class="line">vi /etc/httpd/conf.d/wsgi-keystone.conf</span><br><span class="line"></span><br><span class="line">Listen <span class="number">5000</span></span><br><span class="line">Listen <span class="number">35357</span></span><br><span class="line">&lt;VirtualHost *:<span class="number">5000</span>&gt;</span><br><span class="line">    WSGIDaemonProcess keystone-public processes=<span class="number">5</span> threads=<span class="number">1</span> user=keystone group=keystone display-name=%&#123;GROUP&#125;</span><br><span class="line">    WSGIProcessGroup keystone-public</span><br><span class="line">    WSGIScriptAlias / /var/www/cgi-bin/keystone/main</span><br><span class="line">    WSGIApplicationGroup %&#123;GLOBAL&#125;</span><br><span class="line">    WSGIPassAuthorization On</span><br><span class="line">    LogLevel info</span><br><span class="line">    ErrorLogFormat <span class="string">"%&#123;cu&#125;t %M"</span></span><br><span class="line">    ErrorLog /var/<span class="built_in">log</span>/httpd/keystone-error.log</span><br><span class="line">    CustomLog /var/<span class="built_in">log</span>/httpd/keystone-access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost *:<span class="number">35357</span>&gt;</span><br><span class="line">    WSGIDaemonProcess keystone-admin processes=<span class="number">5</span> threads=<span class="number">1</span> user=keystone group=keystone display-name=%&#123;GROUP&#125;</span><br><span class="line">    WSGIProcessGroup keystone-admin</span><br><span class="line">    WSGIScriptAlias / /var/www/cgi-bin/keystone/admin</span><br><span class="line">    WSGIApplicationGroup %&#123;GLOBAL&#125;</span><br><span class="line">    WSGIPassAuthorization On</span><br><span class="line">    LogLevel info</span><br><span class="line">    ErrorLogFormat <span class="string">"%&#123;cu&#125;t %M"</span></span><br><span class="line">    ErrorLog /var/<span class="built_in">log</span>/httpd/keystone-error.log</span><br><span class="line">    CustomLog /var/<span class="built_in">log</span>/httpd/keystone-access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建keystone启动文件</span></span><br><span class="line">mkdir -p /var/www/cgi-bin/keystone</span><br><span class="line">touch /var/www/cgi-bin/keystone/&#123;main,admin&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#两个文件输入相同内容配置wsgi</span></span><br><span class="line">vi /var/www/cgi-bin/keystone/main</span><br><span class="line">vi /var/www/cgi-bin/keystone/admin</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">from keystone.server import wsgi as wsgi_server</span><br><span class="line">name = os.path.basename(__file__)</span><br><span class="line">application = wsgi_server.initialize_application(name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#调整权限</span></span><br><span class="line">chown -R keystone:keystone /var/www/cgi-bin/keystone</span><br><span class="line">chmod <span class="number">755</span> /var/www/cgi-bin/keystone/*</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动httpd服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> httpd.service</span><br><span class="line">systemctl start httpd.service</span><br><span class="line">tail <span class="operator">-f</span> /var/<span class="built_in">log</span>/httpd/keystone-error.log </span><br><span class="line">ps -ef|grep http</span><br><span class="line">ps -ef|grep keystone</span><br><span class="line">netstat -ntlp|grep <span class="number">5000</span></span><br><span class="line">netstat -ntlp|grep <span class="number">35357</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置临时token</span></span><br><span class="line"><span class="built_in">export</span> OS_TOKEN=redhat</span><br><span class="line"><span class="built_in">export</span> OS_URL=http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span>/v2.<span class="number">0</span></span><br><span class="line"><span class="built_in">export</span> | grep OS</span><br><span class="line"></span><br><span class="line">openstack service create --name keystone --description <span class="string">"OpenStack Identity"</span> identity</span><br><span class="line">openstack endpoint create --publicurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span>/v2.<span class="number">0</span> --internalurl  http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span>/v2.<span class="number">0</span> --adminurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span>/v2.<span class="number">0</span> --region RegionOne identity</span><br><span class="line">openstack project create --description <span class="string">"Admin Project"</span> admin</span><br><span class="line">openstack user create --password-prompt admin</span><br><span class="line">User Password:[redhat]</span><br><span class="line">Repeat User Password:[redhat]</span><br><span class="line"></span><br><span class="line">openstack role create admin</span><br><span class="line">openstack role add --project admin --user admin admin</span><br><span class="line">openstack project create --description <span class="string">"Service Project"</span> service</span><br><span class="line"></span><br><span class="line">openstack project create --description <span class="string">"Demo Project"</span> demo</span><br><span class="line">openstack user create --password-prompt demo</span><br><span class="line">User Password:[redhat]</span><br><span class="line">Repeat User Password:[redhat]</span><br><span class="line"></span><br><span class="line">openstack role create user</span><br><span class="line">openstack role add --project demo --user demo user</span><br><span class="line"><span class="built_in">unset</span> OS_TOKEN OS_URL</span><br><span class="line"><span class="built_in">export</span> | grep OS</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Verification &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack --os-auth-url http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span> --os-project-name admin --os-username admin --os-auth-type password token issue</span><br><span class="line">ps -ef|grep memcached</span><br><span class="line">systemctl start memcached.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑admin-openrc</span></span><br><span class="line">vi /root/admin-openrc.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> OS_PROJECT_DOMAIN_ID=default</span><br><span class="line"><span class="built_in">export</span> OS_USER_DOMAIN_ID=default</span><br><span class="line"><span class="built_in">export</span> OS_PROJECT_NAME=admin</span><br><span class="line"><span class="built_in">export</span> OS_TENANT_NAME=admin</span><br><span class="line"><span class="built_in">export</span> OS_USERNAME=admin</span><br><span class="line"><span class="built_in">export</span> OS_PASSWORD=redhat</span><br><span class="line"><span class="built_in">export</span> OS_AUTH_URL=http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span>/v3</span><br><span class="line"><span class="built_in">export</span> PS1=<span class="string">'[\u@\h \W(admin)]\$ '</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /root/admin-openrc.sh</span><br><span class="line">openstack user list</span><br><span class="line"></span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">| ID                               | Name    |</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">| <span class="number">3</span>a90eefdd4af4f64b2b55e5787c8b480 | nova    |</span><br><span class="line">| <span class="number">81</span>fda8223f424eacb358b9ecf30d8514 | demo    |</span><br><span class="line">| afc0c39b498044a6b012ca85e1a82e3e | cinder  |</span><br><span class="line">| c66ab63dac7142438383f880ceae77e3 | neutron |</span><br><span class="line">| de0c3f0303394b3e8d127119721e7f6b | admin   |</span><br><span class="line">| e6a433779b8749d689e4f8d47026028c | glance  |</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑demo-openrc</span></span><br><span class="line">vi /root/demo-openrc.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> OS_PROJECT_DOMAIN_ID=default</span><br><span class="line"><span class="built_in">export</span> OS_USER_DOMAIN_ID=default</span><br><span class="line"><span class="built_in">export</span> OS_PROJECT_NAME=demo</span><br><span class="line"><span class="built_in">export</span> OS_TENANT_NAME=demo</span><br><span class="line"><span class="built_in">export</span> OS_USERNAME=demo</span><br><span class="line"><span class="built_in">export</span> OS_PASSWORD=redhat</span><br><span class="line"><span class="built_in">export</span> OS_AUTH_URL=http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span>/v3</span><br><span class="line"><span class="built_in">export</span> PS1=<span class="string">'[\u@\h \W(demo)]\$ '</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /root/demo-openrc.sh</span><br><span class="line">openstack token issue</span><br><span class="line"></span><br><span class="line">+------------+----------------------------------+</span><br><span class="line">| Field      | Value                            |</span><br><span class="line">+------------+----------------------------------+</span><br><span class="line">| expires    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T02:<span class="number">25</span>:<span class="number">24.285395</span>Z      |</span><br><span class="line">| id         | <span class="number">06</span>c106e9ffb747a1812e9b4de73b6977 |</span><br><span class="line">| project_id | f9ae9069651e40d0baaa7ad4e7d1a160 |</span><br><span class="line">| user_id    | de0c3f0303394b3e8d127119721e7f6b |</span><br><span class="line">+------------+----------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Glance Installation</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建glance数据库和用户</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line">CREATE DATABASE glance;</span><br><span class="line">GRANT ALL PRIVILEGES ON glance.* TO <span class="string">'glance'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">GRANT ALL PRIVILEGES ON glance.* TO <span class="string">'glance'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">EXIT</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /root/admin-openrc.sh</span><br><span class="line"><span class="comment">#set the password to 'redhat'</span></span><br><span class="line">openstack user create --password-prompt glance</span><br><span class="line">openstack role add --project service --user glance admin</span><br><span class="line">openstack service create --name glance --description <span class="string">"OpenStack Image service"</span> image</span><br><span class="line">openstack endpoint create --publicurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9292</span> --internalurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9292</span> --adminurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9292</span> --region RegionOne image</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装glance</span></span><br><span class="line">yum install -y openstack-glance python-glance python-glanceclient</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置glance-api</span></span><br><span class="line">vi /etc/glance/glance-api.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">verbose = True</span><br><span class="line">notification_driver = noop </span><br><span class="line">[database]</span><br><span class="line">...</span><br><span class="line">connection = mysql://glance:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/glance</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">...</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = glance</span><br><span class="line">password = redhat</span><br><span class="line">[paste_deploy]</span><br><span class="line">...</span><br><span class="line">flavor = keystone</span><br><span class="line">[glance_store]</span><br><span class="line">...</span><br><span class="line">default_store = file</span><br><span class="line">filesystem_store_datadir = /var/lib/glance/images/</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置glance-registry</span></span><br><span class="line">vi /etc/glance/glance-registry.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">verbose = True</span><br><span class="line">notification_driver = noop</span><br><span class="line">[database]</span><br><span class="line">...</span><br><span class="line">connection = mysql://glance:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/glance</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">...</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = glance</span><br><span class="line">password = redhat</span><br><span class="line">[paste_deploy]</span><br><span class="line">...</span><br><span class="line">flavor = keystone</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成glance数据</span></span><br><span class="line">su <span class="operator">-s</span> /bin/sh -c <span class="string">"glance-manage db_sync"</span> glance</span><br><span class="line">systemctl <span class="built_in">enable</span> openstack-glance-api.service openstack-glance-registry.service</span><br><span class="line">systemctl start openstack-glance-api.service openstack-glance-registry.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Verification &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"export OS_IMAGE_API_VERSION=2"</span> | tee <span class="operator">-a</span> admin-openrc.sh demo-openrc.sh</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line">glance image-list</span><br><span class="line">mkdir /tmp/image-list</span><br><span class="line">wget -P /tmp/images http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/images/vdisk/cirros-<span class="number">0.3</span>.<span class="number">4</span>-x86_64-disk.img</span><br><span class="line">glance image-create --name <span class="string">"cirros-in-fs"</span> --file /tmp/images/cirros-<span class="number">0.3</span>.<span class="number">4</span>-x86_64-disk.img --disk-format qcow2 --container-format bare --visibility public --progress</span><br><span class="line">glance image-list</span><br><span class="line">rm -r /tmp/images</span><br><span class="line"></span><br><span class="line">+--------------------------------------+--------------+</span><br><span class="line">| ID                                   | Name         |</span><br><span class="line">+--------------------------------------+--------------+</span><br><span class="line">| <span class="number">6</span>bbafd22-<span class="number">6791</span>-<span class="number">4</span>a9d-<span class="number">8240</span>-<span class="number">355</span>a64f8a5c1 | cirros-in-fs |</span><br><span class="line">+--------------------------------------+--------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Nova Installation</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建nova数据库</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line">CREATE DATABASE nova;</span><br><span class="line">GRANT ALL PRIVILEGES ON nova.* TO <span class="string">'nova'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">GRANT ALL PRIVILEGES ON nova.* TO <span class="string">'nova'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">EXIT</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line"><span class="comment">#Set the password to 'redhat'</span></span><br><span class="line">openstack user create --password-prompt nova</span><br><span class="line">openstack role add --project service --user nova admin</span><br><span class="line">openstack service create --name nova --description <span class="string">"OpenStack Compute"</span> compute</span><br><span class="line">openstack endpoint create --publicurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8774</span>/v2/%\(tenant_id\)s --internalurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8774</span>/v2/%\(tenant_id\)s --adminurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8774</span>/v2/%\(tenant_id\)s --region RegionOne compute</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装nova</span></span><br><span class="line">yum install -y openstack-nova-api openstack-nova-cert openstack-nova-conductor openstack-nova-console openstack-nova-novncproxy openstack-nova-scheduler python-novaclient</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置nova</span></span><br><span class="line">vi /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">verbose = True</span><br><span class="line">rpc_backend = rabbit</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">my_ip = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">vncserver_listen = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">vncserver_proxyclient_address = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">[database]</span><br><span class="line">...</span><br><span class="line">connection = mysql://nova:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/nova</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">...connection/connection/</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">...</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = redhat</span><br><span class="line">[glance]</span><br><span class="line">...</span><br><span class="line">host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">[oslo_concurrency]</span><br><span class="line">...</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成nova数据</span></span><br><span class="line">su <span class="operator">-s</span> /bin/sh -c <span class="string">"nova-manage db sync"</span> nova</span><br><span class="line">systemctl <span class="built_in">enable</span> openstack-nova-api.service openstack-nova-cert.service openstack-nova-consoleauth.service \</span><br><span class="line">openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service</span><br><span class="line">systemctl start openstack-nova-api.service openstack-nova-cert.service openstack-nova-consoleauth.service \</span><br><span class="line">openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Compute Nodes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在其他计算节点安装nova-compute</span></span><br><span class="line">yum install -y openstack-nova-compute sysfsutils</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置nova</span></span><br><span class="line">vi /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">verbose = True</span><br><span class="line">rpc_backend = rabbit</span><br><span class="line">auth_strategy = keystone</span><br><span class="line"><span class="comment"># set to your local ip on management network</span></span><br><span class="line">my_ip = <span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line">vnc_enabled = True</span><br><span class="line">vncserver_listen = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="comment"># set to your local ip on management network </span></span><br><span class="line">vncserver_proxyclient_address = <span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line">novncproxy_base_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">6080</span>/vnc_auto.html</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">...</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">...</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = redhat</span><br><span class="line">[glance]</span><br><span class="line">...</span><br><span class="line">host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">[oslo_concurrency]</span><br><span class="line">...</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动nova-compute服务</span></span><br><span class="line">RETR=$(egrep -c <span class="string">'(vmx|svm)'</span> /proc/cpuinfo); <span class="keyword">if</span> [ <span class="variable">$RETR</span> <span class="operator">-eq</span> <span class="number">0</span> ]; <span class="keyword">then</span> sed -i <span class="string">'s/^#virt_type=.*/virt_type=qemu/'</span> /etc/nova/nova.conf; <span class="keyword">fi</span></span><br><span class="line">firewall-cmd --set-default-zone=trusted</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">systemctl <span class="built_in">enable</span> libvirtd.service openstack-nova-compute.service</span><br><span class="line">systemctl start libvirtd.service openstack-nova-compute.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Verification &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Go back to your Controller Node</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line">nova service-list</span><br><span class="line">nova endpoints</span><br><span class="line">nova image-list</span><br><span class="line"></span><br><span class="line">+----+------------------+--------------------+----------+---------+-------+----------------------------+-----------------+</span><br><span class="line">| Id | Binary           | Host               | Zone     | Status  | State | Updated_at                 | Disabled Reason |</span><br><span class="line">+----+------------------+--------------------+----------+---------+-------+----------------------------+-----------------+</span><br><span class="line">| <span class="number">1</span>  | nova-consoleauth | node-<span class="number">1</span>.example.com | internal | enabled | up    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T01:<span class="number">31</span>:<span class="number">52.000000</span> | -               |</span><br><span class="line">| <span class="number">2</span>  | nova-conductor   | node-<span class="number">1</span>.example.com | internal | enabled | up    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T01:<span class="number">31</span>:<span class="number">52.000000</span> | -               |</span><br><span class="line">| <span class="number">3</span>  | nova-cert        | node-<span class="number">1</span>.example.com | internal | enabled | up    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T01:<span class="number">31</span>:<span class="number">52.000000</span> | -               |</span><br><span class="line">| <span class="number">4</span>  | nova-scheduler   | node-<span class="number">1</span>.example.com | internal | enabled | up    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T01:<span class="number">31</span>:<span class="number">51.000000</span> | -               |</span><br><span class="line">| <span class="number">5</span>  | nova-compute     | node-<span class="number">2</span>.example.com | nova     | enabled | up    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T01:<span class="number">31</span>:<span class="number">52.000000</span> | -               |</span><br><span class="line">| <span class="number">6</span>  | nova-compute     | node-<span class="number">3</span>.example.com | nova     | enabled | up    | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T01:<span class="number">31</span>:<span class="number">53.000000</span> | -               |</span><br><span class="line">+----+------------------+--------------------+----------+---------+-------+----------------------------+-----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Neutron Installation</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#On All of Your OpenStack Nodes</span></span><br><span class="line"><span class="comment">#重启网络</span></span><br><span class="line">systemctl stop NetworkManager.service; systemctl <span class="built_in">disable</span> NetworkManager.service</span><br><span class="line">systemctl restart network.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#On Controller (Network) Node</span></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">net.ipv4.ip_forward=<span class="number">1</span></span><br><span class="line">net.ipv4.conf.all.rp_filter=<span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.rp_filter=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建neutron数据库</span></span><br><span class="line">mysql -u root -p</span><br><span class="line">CREATE DATABASE neutron;</span><br><span class="line">GRANT ALL PRIVILEGES ON neutron.* TO <span class="string">'neutron'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">GRANT ALL PRIVILEGES ON neutron.* TO <span class="string">'neutron'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">EXIT</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line"><span class="comment"># Set the password to 'redhat'</span></span><br><span class="line">openstack user create --password-prompt neutron</span><br><span class="line">openstack role add --project service --user neutron admin</span><br><span class="line">openstack service create --name neutron --description <span class="string">"OpenStack Networking"</span> network</span><br><span class="line">openstack endpoint create --publicurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9696</span> --adminurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9696</span> --internalurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9696</span> --region RegionOne network</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装neutron</span></span><br><span class="line">yum install -y openstack-neutron openstack-neutron-ml2 python-neutronclient openstack-neutron-openvswitch</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置neutron</span></span><br><span class="line">vi /etc/neutron/neutron.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">core_plugin = ml2</span><br><span class="line">service_plugins = router</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">allow_overlapping_ips = True</span><br><span class="line">notify_nova_on_port_status_changes = True</span><br><span class="line">notify_nova_on_port_data_changes = True</span><br><span class="line">nova_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8774</span>/v2</span><br><span class="line">rpc_backend=rabbit</span><br><span class="line">[matchmaker_redis]</span><br><span class="line">[matchmaker_ring]</span><br><span class="line">[quotas]</span><br><span class="line">[agent]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">admin_tenant_name = %SERVICE_TENANT_NAME%</span><br><span class="line">admin_user = %SERVICE_USER%</span><br><span class="line">admin_password = %SERVICE_PASSWORD%</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = neutron</span><br><span class="line">password = redhat</span><br><span class="line">[database]</span><br><span class="line">connection = mysql://neutron:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/neutron</span><br><span class="line">[nova]</span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">region_name = RegionOne</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = redhat</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_qpid]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置ml2_conf</span></span><br><span class="line">vi /etc/neutron/plugins/ml2/ml2_conf.ini</span><br><span class="line"></span><br><span class="line">[ml2]</span><br><span class="line"><span class="built_in">type</span>_drivers = flat,gre,vxlan</span><br><span class="line">tenant_network_types = vxlan</span><br><span class="line">mechanism_drivers = openvswitch</span><br><span class="line">[ml2_<span class="built_in">type</span>_flat]</span><br><span class="line">flat_networks = public</span><br><span class="line">[ml2_<span class="built_in">type</span>_vlan]</span><br><span class="line">[ml2_<span class="built_in">type</span>_gre]</span><br><span class="line">[ml2_<span class="built_in">type</span>_vxlan]</span><br><span class="line">vni_ranges = <span class="number">1</span>:<span class="number">10000</span></span><br><span class="line">[securitygroup]</span><br><span class="line"><span class="built_in">enable</span>_security_group = True</span><br><span class="line"><span class="built_in">enable</span>_ipset = True</span><br><span class="line">firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver</span><br><span class="line">[ovs]</span><br><span class="line"><span class="built_in">local</span>_ip = <span class="number">192.168</span>.<span class="number">0.10</span></span><br><span class="line">bridge_mappings = public:br-ex</span><br><span class="line">[agent]</span><br><span class="line">tunnel_types = vxlan</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置ovs_neutron_plugin</span></span><br><span class="line">vi /etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini</span><br><span class="line"></span><br><span class="line">[ovs]</span><br><span class="line">integration_bridge = br-int</span><br><span class="line">tunnel_bridge = br-tun</span><br><span class="line"><span class="built_in">local</span>_ip = <span class="number">192.168</span>.<span class="number">0.10</span></span><br><span class="line">bridge_mappings = public:br-ex</span><br><span class="line">[agent]</span><br><span class="line">tunnel_types = vxlan</span><br><span class="line">[securitygroup]</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置nova</span></span><br><span class="line">vi /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">rpc_backend=rabbit</span><br><span class="line">my_ip=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">auth_strategy=keystone</span><br><span class="line">vncserver_listen=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">vncserver_proxyclient_address=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">network_api_class = nova.network.neutronv2.api.API</span><br><span class="line">security_group_api = neutron</span><br><span class="line">linuxnet_interface_driver = nova.network.linux_net.LinuxOVSInterfaceDriver</span><br><span class="line">firewall_driver = nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">[api_database]</span><br><span class="line">[barbican]</span><br><span class="line">[cells]</span><br><span class="line">[cinder]</span><br><span class="line">[conductor]</span><br><span class="line">[database]</span><br><span class="line">connection = mysql://nova:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/nova</span><br><span class="line">[ephemeral_storage_encryption]</span><br><span class="line">[glance]</span><br><span class="line">host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">[guestfs]</span><br><span class="line">[hyperv]</span><br><span class="line">[image_file_url]</span><br><span class="line">[ironic]</span><br><span class="line">[keymgr]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = redhat</span><br><span class="line">[libvirt]</span><br><span class="line">[metrics]</span><br><span class="line">[neutron]</span><br><span class="line">url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9696</span></span><br><span class="line">auth_strategy = keystone</span><br><span class="line">admin_auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span>/v2.<span class="number">0</span></span><br><span class="line">admin_tenant_name = service</span><br><span class="line">admin_username = neutron</span><br><span class="line">admin_password = redhat</span><br><span class="line">service_metadata_proxy = True</span><br><span class="line">metadata_proxy_shared_secret = redhat</span><br><span class="line">[osapi_v3]</span><br><span class="line">[rdp]</span><br><span class="line">[serial_console]</span><br><span class="line">[spice]</span><br><span class="line">[ssl]</span><br><span class="line">[trusted_computing]</span><br><span class="line">[upgrade_levels]</span><br><span class="line">[vmware]</span><br><span class="line">[workarounds]</span><br><span class="line">[xenserver]</span><br><span class="line">[zookeeper]</span><br><span class="line">[matchmaker_redis]</span><br><span class="line">[matchmaker_ring]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_qpid]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启nova服务</span></span><br><span class="line">ln <span class="operator">-s</span> /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini</span><br><span class="line">su <span class="operator">-s</span> /bin/sh -c <span class="string">"neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head"</span> neutron</span><br><span class="line">systemctl restart openstack-nova-api.service openstack-nova-scheduler.service openstack-nova-conductor.service</span><br><span class="line">systemctl <span class="built_in">enable</span> neutron-server.service; systemctl start neutron-server.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置l3_agent</span></span><br><span class="line">vi /etc/neutron/l3_agent.ini</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">verbose = True</span><br><span class="line">interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver</span><br><span class="line">external_network_bridge =</span><br><span class="line">router_delete_namespaces = True</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置dhcp_agent</span></span><br><span class="line">vi /etc/neutron/dhcp_agent.ini</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver</span><br><span class="line">dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq</span><br><span class="line">dhcp_delete_namespaces = True</span><br><span class="line">dnsmasq_config_file = /etc/neutron/dnsmasq-neutron.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置dnsmasq-neutron</span></span><br><span class="line">vi /etc/neutron/dnsmasq-neutron.conf</span><br><span class="line"></span><br><span class="line">dhcp-option-force=<span class="number">26</span>,<span class="number">1454</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#杀掉dnsmasq进程</span></span><br><span class="line">pkill dnsmasq</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置metadata_agent</span></span><br><span class="line">vi /etc/neutron/metadata_agent.ini</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_region = RegionOne</span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = neutron</span><br><span class="line">password = redhat</span><br><span class="line">nova_metadata_ip = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">metadata_proxy_shared_secret = redhat</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启openvswitch</span></span><br><span class="line">openstack-service restart</span><br><span class="line">systemctl <span class="built_in">enable</span> openvswitch.service</span><br><span class="line">systemctl start openvswitch.service</span><br><span class="line">ovs-vsctl add-br br-ex</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置enp0s8</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s8</span><br><span class="line"></span><br><span class="line">DEVICE=enp0s8</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NAME=enp0s8</span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">OVS_BRIDGE=br-ex</span><br><span class="line">TYPE=OVSPort</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置br-ex</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-br-ex</span><br><span class="line"></span><br><span class="line">DEVICE=br-ex</span><br><span class="line">STP=no</span><br><span class="line">BRIDGING_OPTS=priority=<span class="number">32768</span></span><br><span class="line">TYPE=OVSBridge</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">PEERDNS=yes</span><br><span class="line">PEERROUTES=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_PEERDNS=yes</span><br><span class="line">IPV6_PEERROUTES=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">NAME=br-ex</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">PREFIX=<span class="number">24</span></span><br><span class="line">GATEWAY=<span class="number">10.30</span>.<span class="number">0.1</span></span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">USERCTL=yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启openvswitch</span></span><br><span class="line">systemctl restart network.service</span><br><span class="line">ovs-vsctl list-ports br-ex</span><br><span class="line">ethtool -K enp0s8 gro off</span><br><span class="line">systemctl restart network.service</span><br><span class="line">cp /usr/lib/systemd/system/neutron-openvswitch-agent.service /usr/lib/systemd/system/neutron-openvswitch-agent.service.orig</span><br><span class="line">sed -i <span class="string">'s,plugins/openvswitch/ovs_neutron_plugin.ini,plugin.ini,g'</span> /usr/lib/systemd/system/neutron-openvswitch-agent.service</span><br><span class="line">systemctl <span class="built_in">enable</span> neutron-openvswitch-agent.service neutron<span class="operator">-l</span>3-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service neutron-ovs-cleanup.service</span><br><span class="line">systemctl start neutron-openvswitch-agent.service neutron<span class="operator">-l</span>3-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#On your Controller Node</span></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">net.ipv4.conf.all.rp_filter=<span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.rp_filter=<span class="number">0</span></span><br><span class="line">net.bridge.bridge-nf-call-iptables=<span class="number">1</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装neutron</span></span><br><span class="line">yum install -y openstack-neutron openstack-neutron-ml2 openstack-neutron-openvswitch</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置neutron</span></span><br><span class="line">vi /etc/neutron/neutron.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">core_plugin = ml2</span><br><span class="line">service_plugins = router</span><br><span class="line">allow_overlapping_ips = True</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">rpc_backend=rabbit</span><br><span class="line">[matchmaker_redis]</span><br><span class="line">[matchmaker_ring]</span><br><span class="line">[quotas]</span><br><span class="line">[agent]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">admin_tenant_name = %SERVICE_TENANT_NAME%</span><br><span class="line">admin_user = %SERVICE_USER%</span><br><span class="line">admin_password = %SERVICE_PASSWORD%</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = neutron</span><br><span class="line">password = redhat</span><br><span class="line">[database]</span><br><span class="line">[nova]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_qpid]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置ml2_conf</span></span><br><span class="line">vi /etc/neutron/plugins/ml2/ml2_conf.ini</span><br><span class="line"></span><br><span class="line">[ml2]</span><br><span class="line"><span class="built_in">type</span>_drivers = flat,gre,vxlan</span><br><span class="line">tenant_network_types = vxlan</span><br><span class="line">mechanism_drivers = openvswitch</span><br><span class="line">[ml2_<span class="built_in">type</span>_flat]</span><br><span class="line">[ml2_<span class="built_in">type</span>_vlan]</span><br><span class="line">[ml2_<span class="built_in">type</span>_gre]</span><br><span class="line">[ml2_<span class="built_in">type</span>_vxlan]</span><br><span class="line">vni_ranges = <span class="number">1</span>:<span class="number">10000</span></span><br><span class="line">[securitygroup]</span><br><span class="line"><span class="built_in">enable</span>_security_group = True</span><br><span class="line"><span class="built_in">enable</span>_ipset = True</span><br><span class="line">firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver</span><br><span class="line">[ovs]</span><br><span class="line"><span class="comment"># set the value to your local ip in tunnel network </span></span><br><span class="line"><span class="built_in">local</span>_ip = <span class="number">192.168</span>.<span class="number">0.11</span></span><br><span class="line">[agent]</span><br><span class="line">tunnel_types = vxlan</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置ovs_neutron_plugin</span></span><br><span class="line">vi /etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini</span><br><span class="line"></span><br><span class="line">[ovs]</span><br><span class="line">integration_bridge = br-int</span><br><span class="line">tunnel_bridge = br-tun</span><br><span class="line"><span class="comment"># set the value to your local ip in tunnel network</span></span><br><span class="line"><span class="built_in">local</span>_ip = <span class="number">192.168</span>.<span class="number">0.11</span></span><br><span class="line">[agent]</span><br><span class="line">tunnel_types = vxlan</span><br><span class="line">[securitygroup]</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启openvswitch</span></span><br><span class="line">systemctl <span class="built_in">enable</span> openvswitch.service</span><br><span class="line">systemctl start openvswitch.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置nova</span></span><br><span class="line">vi /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">rpc_backend=rabbit</span><br><span class="line"><span class="comment"># set to your local ip in management network</span></span><br><span class="line">my_ip=<span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line">auth_strategy=keystone</span><br><span class="line">network_api_class=nova.network.neutronv2.api.API</span><br><span class="line">linuxnet_interface_driver=nova.network.linux_net.LinuxOVSInterfaceDriver</span><br><span class="line">firewall_driver=nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">novncproxy_base_url=http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">6080</span>/vnc_auto.html</span><br><span class="line">vncserver_listen=<span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="comment"># set to your local ip in management network</span></span><br><span class="line">vncserver_proxyclient_address=<span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line">vnc_enabled=<span class="literal">true</span></span><br><span class="line">[api_database]</span><br><span class="line">[barbican]</span><br><span class="line">[cells]</span><br><span class="line">[cinder]</span><br><span class="line">[conductor]</span><br><span class="line">[database]</span><br><span class="line">[ephemeral_storage_encryption]</span><br><span class="line">[glance]</span><br><span class="line">host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">[guestfs]</span><br><span class="line">[hyperv]</span><br><span class="line">[image_file_url]</span><br><span class="line">[ironic]</span><br><span class="line">[keymgr]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">auth_uri = http://<span class="number">10.0</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = redhat</span><br><span class="line">[libvirt]</span><br><span class="line">virt_<span class="built_in">type</span>=qemu</span><br><span class="line">[metrics]</span><br><span class="line">[neutron]</span><br><span class="line">url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">9696</span></span><br><span class="line">auth_strategy = keystone</span><br><span class="line">admin_auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span>/v2.<span class="number">0</span></span><br><span class="line">admin_tenant_name = service</span><br><span class="line">admin_username = neutron</span><br><span class="line">admin_password = redhat</span><br><span class="line">[osapi_v3]</span><br><span class="line">[rdp]</span><br><span class="line">[serial_console]</span><br><span class="line">[spice]</span><br><span class="line">[ssl]</span><br><span class="line">[trusted_computing]</span><br><span class="line">[upgrade_levels]</span><br><span class="line">[vmware]</span><br><span class="line">[workarounds]</span><br><span class="line">[xenserver]</span><br><span class="line">[zookeeper]</span><br><span class="line">[matchmaker_redis]</span><br><span class="line">[matchmaker_ring]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_qpid]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启neutron-openvswitch-agent</span></span><br><span class="line">ln <span class="operator">-s</span> /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini</span><br><span class="line">cp /usr/lib/systemd/system/neutron-openvswitch-agent.service /usr/lib/systemd/system/neutron-openvswitch-agent.service.orig</span><br><span class="line">sed -i <span class="string">'s,plugins/openvswitch/ovs_neutron_plugin.ini,plugin.ini,g'</span> /usr/lib/systemd/system/neutron-openvswitch-agent.service</span><br><span class="line">systemctl restart openstack-nova-compute.service</span><br><span class="line">systemctl <span class="built_in">enable</span> neutron-openvswitch-agent.service</span><br><span class="line">systemctl start neutron-openvswitch-agent.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Verification &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#On your Controller Node</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line">neutron ext-list</span><br><span class="line"></span><br><span class="line">+-----------------------+-----------------------------------------------+</span><br><span class="line">| <span class="built_in">alias</span>                 | name                                          |</span><br><span class="line">+-----------------------+-----------------------------------------------+</span><br><span class="line">| security-group        | security-group                                |</span><br><span class="line">| l3_agent_scheduler    | L3 Agent Scheduler                            |</span><br><span class="line">| net-mtu               | Network MTU                                   |</span><br><span class="line">| ext-gw-mode           | Neutron L3 Configurable external gateway mode |</span><br><span class="line">| binding               | Port Binding                                  |</span><br><span class="line">| provider              | Provider Network                              |</span><br><span class="line">| agent                 | agent                                         |</span><br><span class="line">| quotas                | Quota management support                      |</span><br><span class="line">| subnet_allocation     | Subnet Allocation                             |</span><br><span class="line">| dhcp_agent_scheduler  | DHCP Agent Scheduler                          |</span><br><span class="line">| l3-ha                 | HA Router extension                           |</span><br><span class="line">| multi-provider        | Multi Provider Network                        |</span><br><span class="line">| external-net          | Neutron external network                      |</span><br><span class="line">| router                | Neutron L3 Router                             |</span><br><span class="line">| allowed-address-pairs | Allowed Address Pairs                         |</span><br><span class="line">| extraroute            | Neutron Extra Route                           |</span><br><span class="line">| extra_dhcp_opt        | Neutron Extra DHCP opts                       |</span><br><span class="line">| dvr                   | Distributed Virtual Router                    |</span><br><span class="line">+-----------------------+-----------------------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#On all OpenStack Nodes</span></span><br><span class="line">ovs-vsctl show</span><br><span class="line"></span><br><span class="line">[root@node-<span class="number">1</span> ~(admin)]<span class="comment"># ovs-vsctl show</span></span><br><span class="line"><span class="number">4</span>bedc59c<span class="operator">-a</span>685-<span class="number">4</span>a53-<span class="number">98</span>b8-<span class="number">28</span>ab9ac3479d</span><br><span class="line">    Bridge br-tun</span><br><span class="line">        fail_mode: secure</span><br><span class="line">        Port patch-int</span><br><span class="line">            Interface patch-int</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=patch-tun&#125;</span><br><span class="line">        Port <span class="string">"vxlan-c0a8000c"</span></span><br><span class="line">            Interface <span class="string">"vxlan-c0a8000c"</span></span><br><span class="line">                <span class="built_in">type</span>: vxlan</span><br><span class="line">                options: &#123;df_default=<span class="string">"true"</span>, <span class="keyword">in</span>_key=flow, <span class="built_in">local</span>_ip=<span class="string">"192.168.0.10"</span>, out_key=flow, remote_ip=<span class="string">"192.168.0.12"</span>&#125;</span><br><span class="line">        Port <span class="string">"vxlan-c0a8000b"</span></span><br><span class="line">            Interface <span class="string">"vxlan-c0a8000b"</span></span><br><span class="line">                <span class="built_in">type</span>: vxlan</span><br><span class="line">                options: &#123;df_default=<span class="string">"true"</span>, <span class="keyword">in</span>_key=flow, <span class="built_in">local</span>_ip=<span class="string">"192.168.0.10"</span>, out_key=flow, remote_ip=<span class="string">"192.168.0.11"</span>&#125;</span><br><span class="line">        Port br-tun</span><br><span class="line">            Interface br-tun</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">    Bridge br-ex</span><br><span class="line">        Port phy-br-ex</span><br><span class="line">            Interface phy-br-ex</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=int-br-ex&#125;</span><br><span class="line">        Port br-ex</span><br><span class="line">            Interface br-ex</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port <span class="string">"enp0s8"</span></span><br><span class="line">            Interface <span class="string">"enp0s8"</span></span><br><span class="line">    Bridge br-int</span><br><span class="line">        fail_mode: secure</span><br><span class="line">        Port patch-tun</span><br><span class="line">            Interface patch-tun</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=patch-int&#125;</span><br><span class="line">        Port int-br-ex</span><br><span class="line">            Interface int-br-ex</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=phy-br-ex&#125;</span><br><span class="line">        Port <span class="string">"qr-790ecb8b-da"</span></span><br><span class="line">            tag: <span class="number">1</span></span><br><span class="line">            Interface <span class="string">"qr-790ecb8b-da"</span></span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port <span class="string">"qg-78c1257c-b9"</span></span><br><span class="line">            tag: <span class="number">2</span></span><br><span class="line">            Interface <span class="string">"qg-78c1257c-b9"</span></span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port <span class="string">"tapa307ce86-ee"</span></span><br><span class="line">            tag: <span class="number">1</span></span><br><span class="line">            Interface <span class="string">"tapa307ce86-ee"</span></span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port br-int</span><br><span class="line">            Interface br-int</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">    ovs_version: <span class="string">"2.4.0"</span></span><br><span class="line"></span><br><span class="line">[root@node-<span class="number">2</span> ~]<span class="comment"># ovs-vsctl show</span></span><br><span class="line"><span class="number">73650</span>c34-<span class="number">694</span>d-<span class="number">49</span>dd-<span class="number">8</span>f6e-<span class="number">3</span>c5996ef02a1</span><br><span class="line">    Bridge br-int</span><br><span class="line">        fail_mode: secure</span><br><span class="line">        Port br-int</span><br><span class="line">            Interface br-int</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port patch-tun</span><br><span class="line">            Interface patch-tun</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=patch-int&#125;</span><br><span class="line">    Bridge br-tun</span><br><span class="line">        fail_mode: secure</span><br><span class="line">        Port br-tun</span><br><span class="line">            Interface br-tun</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port <span class="string">"vxlan-c0a8000c"</span></span><br><span class="line">            Interface <span class="string">"vxlan-c0a8000c"</span></span><br><span class="line">                <span class="built_in">type</span>: vxlan</span><br><span class="line">                options: &#123;df_default=<span class="string">"true"</span>, <span class="keyword">in</span>_key=flow, <span class="built_in">local</span>_ip=<span class="string">"192.168.0.11"</span>, out_key=flow, remote_ip=<span class="string">"192.168.0.12"</span>&#125;</span><br><span class="line">        Port <span class="string">"vxlan-c0a8000a"</span></span><br><span class="line">            Interface <span class="string">"vxlan-c0a8000a"</span></span><br><span class="line">                <span class="built_in">type</span>: vxlan</span><br><span class="line">                options: &#123;df_default=<span class="string">"true"</span>, <span class="keyword">in</span>_key=flow, <span class="built_in">local</span>_ip=<span class="string">"192.168.0.11"</span>, out_key=flow, remote_ip=<span class="string">"192.168.0.10"</span>&#125;</span><br><span class="line">        Port patch-int</span><br><span class="line">            Interface patch-int</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=patch-tun&#125;</span><br><span class="line">    ovs_version: <span class="string">"2.4.0"</span></span><br><span class="line"></span><br><span class="line">[root@node-<span class="number">3</span> ~]<span class="comment"># ovs-vsctl show</span></span><br><span class="line"><span class="number">4836</span>f089-eeb9-<span class="number">4116</span>-<span class="number">93</span>a2-c84028beabbf</span><br><span class="line">    Bridge br-int</span><br><span class="line">        fail_mode: secure</span><br><span class="line">        Port patch-tun</span><br><span class="line">            Interface patch-tun</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=patch-int&#125;</span><br><span class="line">        Port <span class="string">"qvo85881db0-8d"</span></span><br><span class="line">            tag: <span class="number">1</span></span><br><span class="line">            Interface <span class="string">"qvo85881db0-8d"</span></span><br><span class="line">        Port br-int</span><br><span class="line">            Interface br-int</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">    Bridge br-tun</span><br><span class="line">        fail_mode: secure</span><br><span class="line">        Port <span class="string">"vxlan-c0a8000b"</span></span><br><span class="line">            Interface <span class="string">"vxlan-c0a8000b"</span></span><br><span class="line">                <span class="built_in">type</span>: vxlan</span><br><span class="line">                options: &#123;df_default=<span class="string">"true"</span>, <span class="keyword">in</span>_key=flow, <span class="built_in">local</span>_ip=<span class="string">"192.168.0.12"</span>, out_key=flow, remote_ip=<span class="string">"192.168.0.11"</span>&#125;</span><br><span class="line">        Port <span class="string">"vxlan-c0a8000a"</span></span><br><span class="line">            Interface <span class="string">"vxlan-c0a8000a"</span></span><br><span class="line">                <span class="built_in">type</span>: vxlan</span><br><span class="line">                options: &#123;df_default=<span class="string">"true"</span>, <span class="keyword">in</span>_key=flow, <span class="built_in">local</span>_ip=<span class="string">"192.168.0.12"</span>, out_key=flow, remote_ip=<span class="string">"192.168.0.10"</span>&#125;</span><br><span class="line">        Port br-tun</span><br><span class="line">            Interface br-tun</span><br><span class="line">                <span class="built_in">type</span>: internal</span><br><span class="line">        Port patch-int</span><br><span class="line">            Interface patch-int</span><br><span class="line">                <span class="built_in">type</span>: patch</span><br><span class="line">                options: &#123;peer=patch-tun&#125;</span><br><span class="line">    ovs_version: <span class="string">"2.4.0"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Network Initialization</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="comment"># To create a external provider network</span></span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line">neutron net-create public --router:external --provider:physical_network public --provider:network_<span class="built_in">type</span> flat</span><br><span class="line">neutron subnet-create public <span class="number">10.30</span>.<span class="number">0.0</span>/<span class="number">24</span> --name public-subnet --allocation-pool start=<span class="number">10.30</span>.<span class="number">0.100</span>,end=<span class="number">10.30</span>.<span class="number">0.200</span> --disable-dhcp --gateway <span class="number">10.30</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment"># To create a vxlan tenant network</span></span><br><span class="line"><span class="built_in">source</span> demo-openrc.sh</span><br><span class="line">neutron net-create private</span><br><span class="line">neutron subnet-create private <span class="number">192.168</span>.<span class="number">1.0</span>/<span class="number">24</span> --name private-subnet --gateway <span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line">neutron router-create private-router</span><br><span class="line">neutron router-interface-add private-router private-subnet</span><br><span class="line">neutron router-gateway-set private-router public</span><br><span class="line">nova keypair-add demo-key</span><br><span class="line">nova boot --flavor m1.tiny --image cirros-in-fs --nic net-id=$(neutron net-list | awk <span class="string">'/ private / &#123;print $2&#125;'</span>) --security-group default --key-name demo-key instance1</span><br><span class="line">nova secgroup-add-rule default icmp -<span class="number">1</span> -<span class="number">1</span> <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span></span><br><span class="line">nova secgroup-add-rule default tcp <span class="number">22</span> <span class="number">22</span> <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span></span><br><span class="line">neutron floatingip-create public</span><br><span class="line"></span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| fixed_ip_address    |                                      |</span><br><span class="line">| floating_ip_address | <span class="number">10.30</span>.<span class="number">0.101</span>                          |</span><br><span class="line">| floating_network_id | <span class="number">987</span>d51e4-<span class="number">28</span>f9-<span class="number">4861</span>-<span class="number">8020</span>-fc455916f441 |</span><br><span class="line">| id                  | c7071675-fb84-<span class="number">466</span>d-ad67-<span class="number">927</span>a016f9c23 |</span><br><span class="line">| port_id             |                                      |</span><br><span class="line">| router_id           |                                      |</span><br><span class="line">| status              | DOWN                                 |</span><br><span class="line">| tenant_id           | <span class="number">0498</span>aa8db8114baaa01bc0830f00dac6     |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#nova floating-ip-associate instance1 $floating_ip_address</span></span><br><span class="line">nova floating-ip-associate instance1 <span class="number">10.30</span>.<span class="number">0.101</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Horizon Installation</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#On your Controller Node</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#安装组件</span></span><br><span class="line">yum install -y openstack-dashboard httpd mod_wsgi memcached python-memcached</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置openstack-dashboard</span></span><br><span class="line">vi /etc/openstack-dashboard/<span class="built_in">local</span>_settings</span><br><span class="line">...</span><br><span class="line">OPENSTACK_HOST = <span class="string">"10.30.0.10"</span></span><br><span class="line">ALLOWED_HOSTS = <span class="string">'*'</span></span><br><span class="line">CACHES = &#123;</span><br><span class="line">    <span class="string">'default'</span>: &#123;</span><br><span class="line">        <span class="string">'BACKEND'</span>: <span class="string">'django.core.cache.backends.memcached.MemcachedCache'</span>,</span><br><span class="line">        <span class="string">'LOCATION'</span>: <span class="string">'127.0.0.1:11211'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">OPENSTACK_KEYSTONE_DEFAULT_ROLE = <span class="string">"user"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置httpd.conf注释节点</span></span><br><span class="line">vi /etc/httpd/conf/httpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#ServerName node-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">chown -R apache:apache /usr/share/openstack-dashboard/static</span><br><span class="line">systemctl <span class="built_in">enable</span> httpd.service memcached.service</span><br><span class="line">systemctl restart httpd.service memcached.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Verification &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line">http://<span class="number">10.30</span>.<span class="number">0.10</span>/dashboard</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Cinder Installation</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#On your Controller Node</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#建立cinder数据库</span></span><br><span class="line">mysql -u root -p</span><br><span class="line">CREATE DATABASE cinder;</span><br><span class="line">GRANT ALL PRIVILEGES ON cinder.* TO <span class="string">'cinder'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">GRANT ALL PRIVILEGES ON cinder.* TO <span class="string">'cinder'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'redhat'</span>;</span><br><span class="line">EXIT</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置cinder</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line"><span class="comment">#Set the password to 'redhat'</span></span><br><span class="line">openstack user create --password-prompt cinder</span><br><span class="line">openstack role add --project service --user cinder admin</span><br><span class="line">openstack service create --name cinder --description <span class="string">"OpenStack Block Storage"</span> volume</span><br><span class="line">openstack service create --name cinderv2 --description <span class="string">"OpenStack Block Storage"</span> volumev2</span><br><span class="line">openstack endpoint create --publicurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8776</span>/v2/%\(tenant_id\)s --internalurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8776</span>/v2/%\(tenant_id\)s --adminurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8776</span>/v2/%\(tenant_id\)s --region RegionOne volume</span><br><span class="line">openstack endpoint create --publicurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8776</span>/v2/%\(tenant_id\)s --internalurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8776</span>/v2/%\(tenant_id\)s --adminurl http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">8776</span>/v2/%\(tenant_id\)s --region RegionOne volumev2</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装cinder组件</span></span><br><span class="line">yum install -y openstack-cinder python-cinderclient python-oslo-db python-oslo-log qemu lvm2 targetcli MySQL-python</span><br><span class="line">cp /usr/share/cinder/cinder-dist.conf /etc/cinder/cinder.conf</span><br><span class="line">chown -R cinder:cinder /etc/cinder/cinder.conf</span><br><span class="line">systemctl <span class="built_in">enable</span> lvm2-lvmetad.service</span><br><span class="line">systemctl start lvm2-lvmetad.service</span><br><span class="line">pvcreate /dev/sdb</span><br><span class="line">vgcreate cinder-volumes /dev/sdb</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置lvm</span></span><br><span class="line">vi /etc/lvm/lvm.conf</span><br><span class="line"></span><br><span class="line">devices &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># To accept the /dev/sdb device, /dev/sda device, and reject all other devices</span></span><br><span class="line">    filter = [ <span class="string">"a/sdb/"</span>, <span class="string">"a/sda/"</span>, <span class="string">"r/.*/"</span>]</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置cinder</span></span><br><span class="line">vi /etc/cinder/cinder.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">verbose = True</span><br><span class="line">rpc_backend = rabbit</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">my_ip = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">enabled_backends = lvm</span><br><span class="line">glance_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">[database]</span><br><span class="line">...</span><br><span class="line">connection = mysql://cinder:redhat@<span class="number">10.30</span>.<span class="number">0.10</span>/cinder</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">...</span><br><span class="line">rabbit_host = <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">rabbit_userid = guest</span><br><span class="line">rabbit_password = guest</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">...</span><br><span class="line">lock_path = /var/lock/cinder</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">...</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = cinder</span><br><span class="line">password = redhat</span><br><span class="line">[lvm]</span><br><span class="line">...</span><br><span class="line">volume_driver = cinder.volume.drivers.lvm.LVMVolumeDriver</span><br><span class="line">volume_group = cinder-volumes</span><br><span class="line">iscsi_protocol = iscsi</span><br><span class="line">iscsi_helper = lioadm</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启cinder服务</span></span><br><span class="line"><span class="keyword">if</span> [ ! <span class="operator">-d</span> /var/lock/cinder ]; <span class="keyword">then</span> mkdir /var/lock/cinder; <span class="keyword">fi</span></span><br><span class="line">chown -R cinder:cinder /var/lock/cinder</span><br><span class="line">su <span class="operator">-s</span> /bin/sh -c <span class="string">"cinder-manage db sync"</span> cinder</span><br><span class="line">systemctl <span class="built_in">enable</span> openstack-cinder-api.service openstack-cinder-scheduler.service openstack-cinder-volume.service target.service</span><br><span class="line">systemctl start openstack-cinder-api.service openstack-cinder-scheduler.service openstack-cinder-volume.service target.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Verification &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看服务列表</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"export OS_VOLUME_API_VERSION=2"</span> | tee <span class="operator">-a</span> admin-openrc.sh demo-openrc.sh</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line">cinder service-list</span><br><span class="line"></span><br><span class="line">+------------------+------------------------+------+---------+-------+----------------------------+-----------------+</span><br><span class="line">|      Binary      |          Host          | Zone |  Status | State |         Updated_at         | Disabled Reason |</span><br><span class="line">+------------------+------------------------+------+---------+-------+----------------------------+-----------------+</span><br><span class="line">| cinder-scheduler |   node-<span class="number">1</span>.example.com   | nova | enabled |   up  | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T02:<span class="number">03</span>:<span class="number">12.000000</span> |        -        |</span><br><span class="line">|  cinder-volume   | node-<span class="number">1</span>.example.com@lvm | nova | enabled |   up  | <span class="number">2016</span>-<span class="number">03</span>-<span class="number">02</span>T02:<span class="number">03</span>:<span class="number">12.000000</span> |        -        |</span><br><span class="line">+------------------+------------------------+------+---------+-------+----------------------------+-----------------+</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> demo-openrc.sh</span><br><span class="line">cinder list</span><br><span class="line">cinder create --name <span class="built_in">test</span>-lvm <span class="number">10</span></span><br><span class="line">cinder list</span><br><span class="line"></span><br><span class="line">+--------------------------------------+-----------+----------+------+-------------+----------+-------------+</span><br><span class="line">|                  ID                  |   Status  |   Name   | Size | Volume Type | Bootable | Attached to |</span><br><span class="line">+--------------------------------------+-----------+----------+------+-------------+----------+-------------+</span><br><span class="line">| <span class="number">59</span>eb88b6-<span class="number">72</span>f6-<span class="number">4</span>e4e-b398-<span class="number">310</span>f6ab028ed | available | <span class="built_in">test</span>-lvm |  <span class="number">10</span>  |      -      |  <span class="literal">false</span>   |             |</span><br><span class="line">+--------------------------------------+-----------+----------+------+-------------+----------+-------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment">#OpenStack DVR Configuration</span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#On Controller Node</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">source</span> demo-openrc.sh </span><br><span class="line"></span><br><span class="line"><span class="comment">#nova delete $uuid</span></span><br><span class="line"><span class="comment">#可以图形化界面终止实例，清除网关</span></span><br><span class="line">nova delete <span class="number">54</span>d384b6-bca1-<span class="number">4</span>fff<span class="operator">-a</span>2d6<span class="operator">-a</span>63c0b567c21</span><br><span class="line">neutron router-gateway-clear private-router</span><br><span class="line">neutron router-interface-delete private-router  $(neutron net-show private |awk <span class="string">'/ subnets / &#123; print $4 &#125;'</span>)</span><br><span class="line">neutron router-delete private-router</span><br><span class="line">neutron subnet-delete private-subnet</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh </span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑neutron.conf</span></span><br><span class="line">vi /etc/neutron/neutron.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">router_distributed = True</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ml2_conf.ini</span></span><br><span class="line">vi /etc/neutron/plugins/ml2/ml2_conf.ini</span><br><span class="line"></span><br><span class="line">[ml2]</span><br><span class="line">...</span><br><span class="line">mechanism_drivers = openvswitch,l2population</span><br><span class="line">[agent]</span><br><span class="line">...</span><br><span class="line">l2_population = True</span><br><span class="line"><span class="built_in">enable</span>_distributed_routing = True</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑l3_agent.ini</span></span><br><span class="line">vi /etc/neutron/l3_agent.ini</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">agent_mode = dvr_snat</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Compute Nodes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑neutron.conf</span></span><br><span class="line">vi /etc/neutron/neutron.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">router_distributed = True</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ml2_conf.ini</span></span><br><span class="line">vi /etc/neutron/plugins/ml2/ml2_conf.ini</span><br><span class="line"></span><br><span class="line">[ml2]</span><br><span class="line">...</span><br><span class="line">mechanism_drivers = openvswitch,l2population</span><br><span class="line"></span><br><span class="line">[ovs]</span><br><span class="line">...</span><br><span class="line">bridge_mappings = public:br-ex</span><br><span class="line"></span><br><span class="line">[agent]</span><br><span class="line">...</span><br><span class="line">l2_population = True</span><br><span class="line"><span class="built_in">enable</span>_distributed_routing = True</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑l3_agent.ini</span></span><br><span class="line">vi /etc/neutron/l3_agent.ini</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">verbose = True</span><br><span class="line">interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver</span><br><span class="line">external_network_bridge =</span><br><span class="line">router_delete_namespaces = True</span><br><span class="line">agent_mode = dvr</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑metadata_agent.ini</span></span><br><span class="line">vi /etc/neutron/metadata_agent.ini</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line">...</span><br><span class="line">auth_uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span></span><br><span class="line">auth_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">35357</span></span><br><span class="line">auth_region = RegionOne</span><br><span class="line">auth_plugin = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = neutron</span><br><span class="line">password = redhatnova_metadata_ip = <span class="number">10.30</span>.<span class="number">0.10</span> </span><br><span class="line">metadata_proxy_shared_secret = redhat</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ifcfg-enp0s8</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s8</span><br><span class="line"></span><br><span class="line">DEVICE=enp0s8</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NAME=enp0s8</span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">OVS_BRIDGE=br-ex</span><br><span class="line">TYPE=OVSPort</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑ifcfg-br-ex</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-br-ex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DEVICE=br-ex</span><br><span class="line">STP=no</span><br><span class="line">BRIDGING_OPTS=priority=<span class="number">32768</span></span><br><span class="line">TYPE=OVSBridge</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">PEERDNS=yes</span><br><span class="line">PEERROUTES=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_PEERDNS=yes</span><br><span class="line">IPV6_PEERROUTES=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">NAME=br-ex</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line">PREFIX=<span class="number">24</span></span><br><span class="line">GATEWAY=<span class="number">10.30</span>.<span class="number">0.1</span></span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">USERCTL=yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启openvswitch服务</span></span><br><span class="line">ovs-vsctl add-br br-ex</span><br><span class="line">systemctl restart network.service</span><br><span class="line">systemctl <span class="built_in">enable</span> neutron<span class="operator">-l</span>3-agent.service neutron-metadata-agent.service</span><br><span class="line">systemctl start neutron<span class="operator">-l</span>3-agent.service neutron-metadata-agent.service</span><br><span class="line">systemctl restart openvswitch.service</span><br><span class="line">systemctl restart neutron-openvswitch-agent.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Controller Node</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启openvswitch服务</span></span><br><span class="line">systemctl restart neutron-server.service</span><br><span class="line">systemctl restart neutron-openvswitch-agent.service neutron<span class="operator">-l</span>3-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service</span><br><span class="line">systemctl restart openvswitch.service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Network Initialization &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> demo-openrc.sh</span><br><span class="line">neutron subnet-create private <span class="number">192.168</span>.<span class="number">100.0</span>/<span class="number">24</span> --name private-subnet --gateway <span class="number">192.168</span>.<span class="number">100.1</span></span><br><span class="line">neutron router-create private-router</span><br><span class="line">neutron router-interface-add private-router private-subnet</span><br><span class="line">neutron router-gateway-set private-router public</span><br><span class="line">nova boot --flavor m1.tiny --image cirros-in-fs --nic net-id=$(neutron net-list | awk <span class="string">'/ private / &#123;print $2&#125;'</span>) --security-group default --key-name demo-key instance2</span><br><span class="line">neutron floatingip-create public</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| fixed_ip_address    |                                      |</span><br><span class="line">| floating_ip_address | <span class="number">10.30</span>.<span class="number">0.103</span>                          |</span><br><span class="line">| floating_network_id | <span class="number">987</span>d51e4-<span class="number">28</span>f9-<span class="number">4861</span>-<span class="number">8020</span>-fc455916f441 |</span><br><span class="line">| id                  | b6cff8cf-b0f5-<span class="number">4051</span>-<span class="number">800</span>a-<span class="number">9</span>a90b7931d2e |</span><br><span class="line">| port_id             |                                      |</span><br><span class="line">| router_id           |                                      |</span><br><span class="line">| status              | DOWN                                 |</span><br><span class="line">| tenant_id           | <span class="number">0498</span>aa8db8114baaa01bc0830f00dac6     |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#nova floating-ip-associate instance2 $FLOATINGIP</span></span><br><span class="line">nova floating-ip-associate instance2 <span class="number">10.30</span>.<span class="number">0.103</span></span><br></pre></td></tr></table></figure>
<h2 id="Neutron_SDN">Neutron SDN</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># All Vagrant configuration is done below. The "2" in Vagrant.configure</span></span><br><span class="line"><span class="comment"># configures the configuration version (we support older styles for</span></span><br><span class="line"><span class="comment"># backwards compatibility). Please don't change it unless you know what</span></span><br><span class="line"><span class="comment"># you're doing.</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$script</span> = &lt;&lt;<span class="constant">SCRIPT</span></span><br><span class="line">echo doing provision...</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="variable">$LANG</span> = <span class="string">"en_US.UTF-8"</span> ]; <span class="keyword">then</span></span><br><span class="line">    echo <span class="string">"export LC_ALL=en_US.UTF-8"</span> <span class="prompt">&gt;&gt; </span>/root/.bashrc</span><br><span class="line">fi</span><br><span class="line">echo -e <span class="string">"10.30.0.10\tnode-1.example.com\tnode-1\n10.30.0.11\tnode-2.example.com\tnode-2\n10.30.0.12\tnode-3.example.com\tnode-3"</span> <span class="prompt">&gt;&gt; </span>/etc/hosts</span><br><span class="line">echo -e <span class="string">"192.168.0.10\tnode-1.example.com\tnode-1\n192.168.0.11\tnode-2.example.com\tnode-2\n192.168.0.12\tnode-3.example.com\tnode-3"</span> <span class="prompt">&gt;&gt; </span>/etc/hosts</span><br><span class="line">rm -f /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yum install -y wget &amp;&amp; wget -<span class="constant">O</span> /etc/yum.repos.d/rh-openstack-<span class="number">7</span>-el7.repo <span class="symbol">http:</span>/<span class="regexp">/192.168.1.100/content</span><span class="regexp">/cfgfile/rh</span>-openstack-<span class="number">7</span>-el7.repo</span><br><span class="line">yum install -y wget &amp;&amp; wget -<span class="constant">O</span> /etc/yum.repos.d/rh-rhel-<span class="number">7</span>-el7.repo <span class="symbol">http:</span>/<span class="regexp">/192.168.1.100/content</span><span class="regexp">/cfgfile/rh</span>-rhel-<span class="number">7</span>-el7.repo</span><br><span class="line"></span><br><span class="line">echo done...</span><br><span class="line"><span class="constant">SCRIPT</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant</span>.configure(<span class="number">2</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.define <span class="symbol">:node1</span> <span class="keyword">do</span> |node1|</span><br><span class="line">    node1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node1.vm.hostname = <span class="string">"node-1.example.com"</span>    </span><br><span class="line">    node1.vm.network <span class="string">"forwarded_port"</span>, <span class="symbol">guest:</span> <span class="number">80</span>, <span class="symbol">host:</span> <span class="number">18080</span></span><br><span class="line">    node1.vm.network <span class="string">"forwarded_port"</span>, <span class="symbol">guest:</span> <span class="number">22</span>, <span class="symbol">host:</span> <span class="number">12222</span></span><br><span class="line">    node1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">2048</span></span><br><span class="line">      v.cpus = <span class="number">2</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:node2</span> <span class="keyword">do</span> |node2|</span><br><span class="line">    node2.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node2.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node2.vm.hostname = <span class="string">"node-2.example.com"</span>    </span><br><span class="line">    node2.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node2.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node2.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node2.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:node3</span> <span class="keyword">do</span> |node3|</span><br><span class="line">    node3.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node3.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node3.vm.hostname = <span class="string">"node-3.example.com"</span></span><br><span class="line">    node3.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node3.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node3.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.12"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node3.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.12"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:network1</span> <span class="keyword">do</span> |network1|</span><br><span class="line">    network1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    network1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    network1.vm.hostname = <span class="string">"network1.example.com"</span></span><br><span class="line">    network1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"network1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">2048</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    network1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    network1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"172.16.10.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:compute1</span> <span class="keyword">do</span> |compute1|</span><br><span class="line">    compute1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    compute1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    compute1.vm.hostname = <span class="string">"compute1.example.com"</span></span><br><span class="line">    compute1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"compute1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    compute1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    compute1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"172.16.10.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment">#Neutron SDN  Manual Installation</span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 安装网络节点（network1）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Vagrant</span></span><br><span class="line">vagrant up network1</span><br><span class="line">vagrant up compute1</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置ifcfg-enp0s8</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s8</span><br><span class="line"></span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">NETMASK=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line">DEVICE=enp0s8</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置ifcfg-enp0s9</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s9</span><br><span class="line"></span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">172.16</span>.<span class="number">10.10</span></span><br><span class="line">NETMASK=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line">DEVICE=enp0s9</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启网络服务</span></span><br><span class="line">systemctl restart network</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装需要用到的包</span></span><br><span class="line">yum install libvirt openvswitch python-virtinst xauth tigervnc qemu-kvm-rhev -y</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动libvirt和openvswitch</span></span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> libvirtd openvswitch</span><br><span class="line">systemctl restart libvirtd openvswitch</span><br><span class="line">firewall-cmd  --set-default-zone=trusted</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#移除默认的libvirt 网络，方便清晰分析网络情况</span></span><br><span class="line">virsh net-destroy default</span><br><span class="line">virsh net-autostart --disable default</span><br><span class="line">virsh net-undefine default</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置允许ipforwarding</span></span><br><span class="line">vi /etc/sysctl.conf </span><br><span class="line"></span><br><span class="line">net.ipv4.ip_forward=<span class="number">1</span></span><br><span class="line">net.ipv4.conf.all.rp_filter=<span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.rp_filter=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#立即生效</span></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个linux bridge</span></span><br><span class="line">brctl addbr qbr01</span><br><span class="line">ip link <span class="built_in">set</span> qbr01 up</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个instance，并连接到qbr01 Bridge，网络接口部分配置如下</span></span><br><span class="line">mkdir /data/gre -p</span><br><span class="line">vi /data/gre/instance1.xml</span><br><span class="line"></span><br><span class="line">&lt;domain <span class="built_in">type</span>=<span class="string">"qemu"</span>&gt;</span><br><span class="line">  &lt;uuid&gt;<span class="number">9</span>b43dbac-<span class="number">450</span>c-<span class="number">45</span>e0-<span class="number">8755</span>-bfd485183212&lt;/uuid&gt;</span><br><span class="line">  &lt;name&gt;instance1&lt;/name&gt;</span><br><span class="line">  &lt;memory&gt;<span class="number">524288</span>&lt;/memory&gt;</span><br><span class="line">  &lt;vcpu&gt;<span class="number">1</span>&lt;/vcpu&gt;</span><br><span class="line">  &lt;sysinfo <span class="built_in">type</span>=<span class="string">"smbios"</span>&gt;</span><br><span class="line">    &lt;system&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"manufacturer"</span>&gt;Red Hat Inc.&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"product"</span>&gt;OpenStack Nova&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"version"</span>&gt;<span class="number">2014.1</span>.<span class="number">1</span>-<span class="number">3</span>.el6&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"serial"</span>&gt;<span class="number">6</span>b348fa3-ccf4-<span class="number">420</span>d-b4f2-<span class="number">2</span>a894357d637&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"uuid"</span>&gt;<span class="number">9</span>b43dbac-<span class="number">450</span>c-<span class="number">45</span>e0-<span class="number">8755</span>-bfd485183212&lt;/entry&gt;</span><br><span class="line">    &lt;/system&gt;</span><br><span class="line">  &lt;/sysinfo&gt;</span><br><span class="line">  &lt;os&gt;</span><br><span class="line">    &lt;<span class="built_in">type</span>&gt;hvm&lt;/<span class="built_in">type</span>&gt;</span><br><span class="line">    &lt;boot dev=<span class="string">"hd"</span>/&gt;</span><br><span class="line">    &lt;smbios mode=<span class="string">"sysinfo"</span>/&gt;</span><br><span class="line">  &lt;/os&gt;</span><br><span class="line">  &lt;features&gt;</span><br><span class="line">    &lt;acpi/&gt;</span><br><span class="line">    &lt;apic/&gt;</span><br><span class="line">  &lt;/features&gt;</span><br><span class="line">  &lt;clock offset=<span class="string">"utc"</span>/&gt;</span><br><span class="line">  &lt;cpu mode=<span class="string">"host-model"</span> match=<span class="string">"exact"</span>/&gt;</span><br><span class="line">  &lt;devices&gt;</span><br><span class="line">    &lt;disk <span class="built_in">type</span>=<span class="string">"file"</span> device=<span class="string">"disk"</span>&gt;</span><br><span class="line">      &lt;driver name=<span class="string">"qemu"</span> <span class="built_in">type</span>=<span class="string">"qcow2"</span> cache=<span class="string">"none"</span>/&gt;</span><br><span class="line">      &lt;<span class="built_in">source</span> file=<span class="string">"/data/gre/instance1.img"</span>/&gt;</span><br><span class="line">      &lt;target bus=<span class="string">"virtio"</span> dev=<span class="string">"vda"</span>/&gt;</span><br><span class="line">    &lt;/disk&gt;</span><br><span class="line">    &lt;interface <span class="built_in">type</span>=<span class="string">'bridge'</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">source</span> bridge=<span class="string">'qbr01'</span>/&gt;</span><br><span class="line">      &lt;target dev=<span class="string">'tap01'</span>/&gt;</span><br><span class="line">      &lt;model <span class="built_in">type</span>=<span class="string">'virtio'</span>/&gt;</span><br><span class="line">      &lt;driver name=<span class="string">'qemu'</span>/&gt;</span><br><span class="line">      &lt;address <span class="built_in">type</span>=<span class="string">'pci'</span> domain=<span class="string">'0x0000'</span> bus=<span class="string">'0x00'</span> slot=<span class="string">'0x03'</span> <span class="keyword">function</span>=<span class="string">'0x0'</span>/&gt;</span><br><span class="line">    &lt;/interface&gt;</span><br><span class="line">    &lt;serial <span class="built_in">type</span>=<span class="string">"file"</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">source</span> path=<span class="string">"/data/gre/instance1.log"</span>/&gt;</span><br><span class="line">    &lt;/serial&gt;</span><br><span class="line">    &lt;serial <span class="built_in">type</span>=<span class="string">"pty"</span>/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"tablet"</span> bus=<span class="string">"usb"</span>/&gt;</span><br><span class="line">    &lt;graphics <span class="built_in">type</span>=<span class="string">"vnc"</span> autoport=<span class="string">"yes"</span> keymap=<span class="string">"en-us"</span> listen=<span class="string">"0.0.0.0"</span>/&gt;</span><br><span class="line">    &lt;video&gt;</span><br><span class="line">      &lt;model <span class="built_in">type</span>=<span class="string">"cirrus"</span>/&gt;</span><br><span class="line">    &lt;/video&gt;</span><br><span class="line">  &lt;/devices&gt;</span><br><span class="line">&lt;/domain&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /data/gre/</span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/images/vdisk/cirros-<span class="number">0.3</span>.<span class="number">1</span>-x86_64-disk.img</span><br><span class="line">mv cirros-<span class="number">0.3</span>.<span class="number">1</span>-x86_64-disk.img instance1.img</span><br><span class="line">virsh define instance1.xml</span><br><span class="line">virsh start instance1</span><br><span class="line">virsh vncdisplay instance1</span><br><span class="line">vncviewer :<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动console 以后,登录添加ip 地址 192.168.1.10</span></span><br><span class="line">ip addr add <span class="number">192.168</span>.<span class="number">1.10</span>/<span class="number">24</span> dev eth0</span><br><span class="line">route add default gw <span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个内部bridge br-int， 模拟 OpenStack integrated bridge</span></span><br><span class="line">ovs-vsctl add-br br-int</span><br><span class="line">ovs-vsctl add-port br-int gre0 -- <span class="built_in">set</span> interface gre0 <span class="built_in">type</span>=gre options:remote_ip=<span class="number">172.16</span>.<span class="number">10.11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个veth peer，连接Linux Bridge 'qbr01' 和 OpenvSwich Bridge 'br-ini'</span></span><br><span class="line">ip link add qvo01 <span class="built_in">type</span> veth peer name qvb01</span><br><span class="line">brctl addif qbr01 qvb01</span><br><span class="line">ovs-vsctl add-port br-int qvo01</span><br><span class="line">ovs-vsctl <span class="built_in">set</span> port qvo01 tag=<span class="number">100</span></span><br><span class="line">ip link <span class="built_in">set</span> qvb01 up</span><br><span class="line">ip link <span class="built_in">set</span> qvo01 up</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看现在network1上的 br-int</span></span><br><span class="line">ovs-vsctl show</span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 安装计算节点(compute1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#网络接口配置</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s8</span><br><span class="line"></span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line">NETMASK=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line">DEVICE=enp0s8</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#网络接口配置</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s9</span><br><span class="line"></span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">172.16</span>.<span class="number">10.11</span></span><br><span class="line">NETMASK=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line">DEVICE=enp0s9</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启网络服务</span></span><br><span class="line">service network restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装需要用到的包</span></span><br><span class="line">yum install libvirt openvswitch python-virtinst xauth tigervnc</span><br><span class="line"></span><br><span class="line"><span class="comment">#移除libvirt 默认的网络</span></span><br><span class="line">virsh net-destroy default</span><br><span class="line">virsh net-autostart --disable default</span><br><span class="line">virsh net-undefine default</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置允许ipforwarding</span></span><br><span class="line">vi /etc/sysctl.conf </span><br><span class="line"></span><br><span class="line">net.ipv4.ip_forward=<span class="number">1</span></span><br><span class="line">net.ipv4.conf.all.rp_filter=<span class="number">0</span></span><br><span class="line">net.ipv4.conf.default.rp_filter=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#立即生效</span></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动libvirt和openvswitch</span></span><br><span class="line">systemctl <span class="built_in">enable</span> libvirtd openvswitch</span><br><span class="line">systemctl restart libvirtd openvswitch</span><br><span class="line">firewall-cmd  --set-default-zone=trusted</span><br><span class="line">firewall-cmd  --reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个linux bridge</span></span><br><span class="line">brctl addbr qbr02</span><br><span class="line">ip link <span class="built_in">set</span> qbr02 up</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个vm，并连接到qbr02</span></span><br><span class="line">mkdir -p /data/gre</span><br><span class="line">vi /data/gre/instance2.xml</span><br><span class="line"></span><br><span class="line">&lt;domain <span class="built_in">type</span>=<span class="string">"qemu"</span>&gt;</span><br><span class="line">  &lt;uuid&gt;<span class="number">9</span>b43dbac-<span class="number">450</span>c-<span class="number">45</span>e0-<span class="number">8755</span>-bfd485183212&lt;/uuid&gt;</span><br><span class="line">  &lt;name&gt;instance2&lt;/name&gt;</span><br><span class="line">  &lt;memory&gt;<span class="number">524288</span>&lt;/memory&gt;</span><br><span class="line">  &lt;vcpu&gt;<span class="number">1</span>&lt;/vcpu&gt;</span><br><span class="line">  &lt;sysinfo <span class="built_in">type</span>=<span class="string">"smbios"</span>&gt;</span><br><span class="line">    &lt;system&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"manufacturer"</span>&gt;Red Hat Inc.&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"product"</span>&gt;OpenStack Nova&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"version"</span>&gt;<span class="number">2015.1</span>.<span class="number">1</span>-<span class="number">3</span>.el7ost&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"serial"</span>&gt;<span class="number">6</span>b348fa3-ccf4-<span class="number">420</span>d-b4f2-<span class="number">2</span>a894357d637&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=<span class="string">"uuid"</span>&gt;<span class="number">9</span>b43dbac-<span class="number">450</span>c-<span class="number">45</span>e0-<span class="number">8755</span>-bfd485183212&lt;/entry&gt;</span><br><span class="line">    &lt;/system&gt;</span><br><span class="line">  &lt;/sysinfo&gt;</span><br><span class="line">  &lt;os&gt;</span><br><span class="line">    &lt;<span class="built_in">type</span>&gt;hvm&lt;/<span class="built_in">type</span>&gt;</span><br><span class="line">    &lt;boot dev=<span class="string">"hd"</span>/&gt;</span><br><span class="line">    &lt;smbios mode=<span class="string">"sysinfo"</span>/&gt;</span><br><span class="line">  &lt;/os&gt;</span><br><span class="line">  &lt;features&gt;</span><br><span class="line">    &lt;acpi/&gt;</span><br><span class="line">    &lt;apic/&gt;</span><br><span class="line">  &lt;/features&gt;</span><br><span class="line">  &lt;clock offset=<span class="string">"utc"</span>/&gt;</span><br><span class="line">  &lt;cpu mode=<span class="string">"host-model"</span> match=<span class="string">"exact"</span>/&gt;</span><br><span class="line">  &lt;devices&gt;</span><br><span class="line">    &lt;disk <span class="built_in">type</span>=<span class="string">"file"</span> device=<span class="string">"disk"</span>&gt;</span><br><span class="line">      &lt;driver name=<span class="string">"qemu"</span> <span class="built_in">type</span>=<span class="string">"qcow2"</span> cache=<span class="string">"none"</span>/&gt;</span><br><span class="line">      &lt;<span class="built_in">source</span> file=<span class="string">"/data/gre/instance2.img"</span>/&gt;</span><br><span class="line">      &lt;target bus=<span class="string">"virtio"</span> dev=<span class="string">"vda"</span>/&gt;</span><br><span class="line">    &lt;/disk&gt;</span><br><span class="line">    &lt;interface <span class="built_in">type</span>=<span class="string">'bridge'</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">source</span> bridge=<span class="string">'qbr02'</span>/&gt;</span><br><span class="line">      &lt;target dev=<span class="string">'tap02'</span>/&gt;</span><br><span class="line">      &lt;model <span class="built_in">type</span>=<span class="string">'virtio'</span>/&gt;</span><br><span class="line">      &lt;driver name=<span class="string">'qemu'</span>/&gt;</span><br><span class="line">      &lt;address <span class="built_in">type</span>=<span class="string">'pci'</span> domain=<span class="string">'0x0000'</span> bus=<span class="string">'0x00'</span> slot=<span class="string">'0x03'</span> <span class="keyword">function</span>=<span class="string">'0x0'</span>/&gt;</span><br><span class="line">    &lt;/interface&gt;</span><br><span class="line">    &lt;serial <span class="built_in">type</span>=<span class="string">"file"</span>&gt;</span><br><span class="line">      &lt;<span class="built_in">source</span> path=<span class="string">"/data/gre/instance2.log"</span>/&gt;</span><br><span class="line">    &lt;/serial&gt;</span><br><span class="line">    &lt;serial <span class="built_in">type</span>=<span class="string">"pty"</span>/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"tablet"</span> bus=<span class="string">"usb"</span>/&gt;</span><br><span class="line">    &lt;graphics <span class="built_in">type</span>=<span class="string">"vnc"</span> autoport=<span class="string">"yes"</span> keymap=<span class="string">"en-us"</span> listen=<span class="string">"0.0.0.0"</span>/&gt;</span><br><span class="line">    &lt;video&gt;</span><br><span class="line">      &lt;model <span class="built_in">type</span>=<span class="string">"cirrus"</span>/&gt;</span><br><span class="line">    &lt;/video&gt;</span><br><span class="line">  &lt;/devices&gt;</span><br><span class="line">&lt;/domain&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /data/gre/</span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/images/vdisk/cirros-<span class="number">0.3</span>.<span class="number">1</span>-x86_64-disk.img</span><br><span class="line">mv cirros-<span class="number">0.3</span>.<span class="number">1</span>-x86_64-disk.img instance2.img</span><br><span class="line">virsh define instance2.xml</span><br><span class="line">virsh start instance2</span><br><span class="line">virsh vncdisplay instance2</span><br><span class="line">vncviewer :<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动console 以后,登录添加ip得知 192.168.1.11</span></span><br><span class="line">ip addr add <span class="number">192.168</span>.<span class="number">1.11</span>/<span class="number">24</span> dev eth0</span><br><span class="line">route add default gw <span class="number">192.168</span>.<span class="number">1.1</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个内部bridge br-int， 模拟 OpenStack integrated bridge</span></span><br><span class="line">ovs-vsctl add-br br-int</span><br><span class="line">ovs-vsctl add-port br-int gre0 -- <span class="built_in">set</span> interface gre0 <span class="built_in">type</span>=gre options:remote_ip=<span class="number">172.16</span>.<span class="number">10.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个veth peer，连接Linux Bridge 'qbr02' 和 OpenvSwich Bridge 'br-ini'</span></span><br><span class="line">ip link add qvo02 <span class="built_in">type</span> veth peer name qvb02</span><br><span class="line">brctl addif qbr02 qvb02</span><br><span class="line">ovs-vsctl add-port br-int qvo02</span><br><span class="line">ovs-vsctl <span class="built_in">set</span> port qvo02 tag=<span class="number">100</span></span><br><span class="line">ip link <span class="built_in">set</span> qvb02 up</span><br><span class="line">ip link <span class="built_in">set</span> qvo02 up</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看现在network1 上的 br-int</span></span><br><span class="line">ovs-vsctl show</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查是否能连通instance1，在instance2的控制台</span></span><br><span class="line">ping <span class="number">192.168</span>.<span class="number">1.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通过 Network Namespace 实现租户私有网络互访</span></span><br><span class="line"><span class="comment">#添加一个namespace，dhcp01用于隔离租户网络。</span></span><br><span class="line">ip netns add dhcp01</span><br><span class="line"></span><br><span class="line"><span class="comment">#为私有网络192.168.1.0/24 ，在命名空间dhcp01 中 创建dhcp 服务</span></span><br><span class="line">ovs-vsctl add-port br-int tapdhcp01 -- <span class="built_in">set</span> interface tapdhcp01 <span class="built_in">type</span>=internal</span><br><span class="line">ovs-vsctl <span class="built_in">set</span> port tapdhcp01 tag=<span class="number">100</span></span><br><span class="line">ip link <span class="built_in">set</span> tapdhcp01 netns dhcp01</span><br><span class="line">ip netns <span class="built_in">exec</span> dhcp01 ip addr add <span class="number">192.168</span>.<span class="number">1.2</span>/<span class="number">24</span> dev tapdhcp01</span><br><span class="line">ip netns <span class="built_in">exec</span> dhcp01 ip link <span class="built_in">set</span> tapdhcp01 up</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查网络是否连通，在namespace 访问instance1 和 instance2</span></span><br><span class="line">ip netns <span class="built_in">exec</span> dhcp01 ping <span class="number">192.168</span>.<span class="number">1.10</span></span><br><span class="line">ip netns <span class="built_in">exec</span> dhcp01 ping <span class="number">192.168</span>.<span class="number">1.11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通过 Network Namespace 和Iptables 实现L3 router</span></span><br><span class="line">ovs-vsctl add-br br-ex</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置enp0s8</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-enp0s8</span><br><span class="line"></span><br><span class="line">DEVICE=enp0s8</span><br><span class="line">NM_CONTROLLED=no</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NAME=enp0s8</span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">OVS_BRIDGE=br-ex</span><br><span class="line">TYPE=OVSPort</span><br><span class="line">PEERDNS=no</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置br-ex</span></span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-br-ex</span><br><span class="line"></span><br><span class="line">DEVICE=br-ex</span><br><span class="line">STP=no</span><br><span class="line">BRIDGING_OPTS=priority=<span class="number">32768</span></span><br><span class="line">TYPE=OVSBridge</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">PEERDNS=yes</span><br><span class="line">PEERROUTES=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=no</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_PEERDNS=yes</span><br><span class="line">IPV6_PEERROUTES=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">NAME=br-ex</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">PREFIX=<span class="number">24</span></span><br><span class="line">DEVICETYPE=ovs</span><br><span class="line">USERCTL=yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启启动网络服务</span></span><br><span class="line">ovs-vsctl add-port br-ex enp0s8 &amp;&amp; service network restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查网络，配置后是否连通</span></span><br><span class="line">ping <span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#添加一个namespace，router01 用于路由和floating ip 分配</span></span><br><span class="line">ip netns add router01</span><br><span class="line"></span><br><span class="line"><span class="comment">#在br-int添加一个接口，作为私有网络192.168.1.0/24的网关</span></span><br><span class="line"></span><br><span class="line">ovs-vsctl add-port br-int qr01 -- <span class="built_in">set</span> interface qr01 <span class="built_in">type</span>=internal</span><br><span class="line">ovs-vsctl <span class="built_in">set</span> port qr01 tag=<span class="number">100</span></span><br><span class="line">ip link <span class="built_in">set</span> qr01 netns router01</span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip addr add <span class="number">192.168</span>.<span class="number">1.1</span>/<span class="number">24</span> dev qr01</span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip link <span class="built_in">set</span> qr01 up</span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip link <span class="built_in">set</span> lo up</span><br><span class="line"></span><br><span class="line"><span class="comment">#在br-ex中添加一个接口，用于私网192.168.1.0/24设置下一跳地址</span></span><br><span class="line">ovs-vsctl add-port br-ex qg01 -- <span class="built_in">set</span> interface qg01  <span class="built_in">type</span>=internal</span><br><span class="line">ip link <span class="built_in">set</span> qg01  netns router01</span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip addr add <span class="number">10.30</span>.<span class="number">0.100</span>/<span class="number">24</span> dev qg01 </span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip link <span class="built_in">set</span> qg01 up</span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip link <span class="built_in">set</span> lo up</span><br><span class="line"></span><br><span class="line"><span class="comment">#模拟分配floating ip 访问instance1</span></span><br><span class="line"><span class="comment">#为instance1 192.168.1.11 分配floating ip，172.16.0.101</span></span><br><span class="line">ip netns <span class="built_in">exec</span> router01 ip addr add <span class="number">10.30</span>.<span class="number">0.101</span>/<span class="number">32</span> dev qg01 </span><br><span class="line">ip netns <span class="built_in">exec</span> router01  iptables -t nat -A OUTPUT <span class="operator">-d</span> <span class="number">10.30</span>.<span class="number">0.101</span>/<span class="number">32</span>  -j DNAT --to-destination <span class="number">192.168</span>.<span class="number">1.10</span></span><br><span class="line">ip netns <span class="built_in">exec</span> router01  iptables -t nat -A PREROUTING <span class="operator">-d</span> <span class="number">10.30</span>.<span class="number">0.101</span>/<span class="number">32</span> -j DNAT --to-destination <span class="number">192.168</span>.<span class="number">1.10</span></span><br><span class="line">ip netns <span class="built_in">exec</span> router01  iptables -t nat -A POSTROUTING <span class="operator">-s</span> <span class="number">192.168</span>.<span class="number">1.10</span>/<span class="number">32</span> -j SNAT --to-source <span class="number">10.30</span>.<span class="number">0.101</span></span><br><span class="line">ip netns <span class="built_in">exec</span> router01  iptables -t nat -A POSTROUTING <span class="operator">-s</span> <span class="number">192.168</span>.<span class="number">1.0</span>/<span class="number">24</span> -j SNAT --to-source <span class="number">10.30</span>.<span class="number">0.100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#测试floating ip</span></span><br><span class="line">ping <span class="number">10.30</span>.<span class="number">0.101</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果需要清除nat chain</span></span><br><span class="line">iptables -t nat -F</span><br></pre></td></tr></table></figure>
<h2 id="OpenStack_PackStack">OpenStack PackStack</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># All Vagrant configuration is done below. The "2" in Vagrant.configure</span></span><br><span class="line"><span class="comment"># configures the configuration version (we support older styles for</span></span><br><span class="line"><span class="comment"># backwards compatibility). Please don't change it unless you know what</span></span><br><span class="line"><span class="comment"># you're doing.</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$script</span> = &lt;&lt;<span class="constant">SCRIPT</span></span><br><span class="line">echo doing provision...</span><br><span class="line"><span class="keyword">if</span> [ ! <span class="variable">$LANG</span> = <span class="string">"en_US.UTF-8"</span> ]; <span class="keyword">then</span></span><br><span class="line">    echo <span class="string">"export LC_ALL=en_US.UTF-8"</span> <span class="prompt">&gt;&gt; </span>/root/.bashrc</span><br><span class="line">fi</span><br><span class="line">echo -e <span class="string">"10.30.0.10\tnode-1.example.com\tnode-1\n10.30.0.11\tnode-2.example.com\tnode-2\n10.30.0.12\tnode-3.example.com\tnode-3"</span> <span class="prompt">&gt;&gt; </span>/etc/hosts</span><br><span class="line">echo -e <span class="string">"192.168.0.10\tnode-1.example.com\tnode-1\n192.168.0.11\tnode-2.example.com\tnode-2\n192.168.0.12\tnode-3.example.com\tnode-3"</span> <span class="prompt">&gt;&gt; </span>/etc/hosts</span><br><span class="line">rm -f /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yum install -y wget &amp;&amp; wget -<span class="constant">O</span> /etc/yum.repos.d/rh-openstack-<span class="number">7</span>-el7.repo <span class="symbol">http:</span>/<span class="regexp">/192.168.1.100/content</span><span class="regexp">/cfgfile/rh</span>-openstack-<span class="number">7</span>-el7.repo</span><br><span class="line">yum install -y wget &amp;&amp; wget -<span class="constant">O</span> /etc/yum.repos.d/rh-rhel-<span class="number">7</span>-el7.repo <span class="symbol">http:</span>/<span class="regexp">/192.168.1.100/content</span><span class="regexp">/cfgfile/rh</span>-rhel-<span class="number">7</span>-el7.repo</span><br><span class="line"></span><br><span class="line">echo done...</span><br><span class="line"><span class="constant">SCRIPT</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant</span>.configure(<span class="number">2</span>) <span class="keyword">do</span> |config|</span><br><span class="line">  config.vm.define <span class="symbol">:node1</span> <span class="keyword">do</span> |node1|</span><br><span class="line">    node1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node1.vm.hostname = <span class="string">"node-1.example.com"</span>    </span><br><span class="line">    node1.vm.network <span class="string">"forwarded_port"</span>, <span class="symbol">guest:</span> <span class="number">80</span>, <span class="symbol">host:</span> <span class="number">18080</span></span><br><span class="line">    node1.vm.network <span class="string">"forwarded_port"</span>, <span class="symbol">guest:</span> <span class="number">22</span>, <span class="symbol">host:</span> <span class="number">12222</span></span><br><span class="line">    node1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">2048</span></span><br><span class="line">      v.cpus = <span class="number">2</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:node2</span> <span class="keyword">do</span> |node2|</span><br><span class="line">    node2.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node2.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node2.vm.hostname = <span class="string">"node-2.example.com"</span>    </span><br><span class="line">    node2.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node2.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node2.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node2.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:node3</span> <span class="keyword">do</span> |node3|</span><br><span class="line">    node3.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    node3.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    node3.vm.hostname = <span class="string">"node-3.example.com"</span></span><br><span class="line">    node3.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"node3.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    node3.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.12"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    node3.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"192.168.0.12"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:network1</span> <span class="keyword">do</span> |network1|</span><br><span class="line">    network1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    network1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    network1.vm.hostname = <span class="string">"network1.example.com"</span></span><br><span class="line">    network1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"network1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">2048</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    network1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    network1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"172.16.10.10"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  config.vm.define <span class="symbol">:compute1</span> <span class="keyword">do</span> |compute1|</span><br><span class="line">    compute1.vm.box = <span class="string">"rhel-7.1"</span></span><br><span class="line">    compute1.vm.provision <span class="string">"shell"</span>, <span class="symbol">inline:</span> <span class="variable">$script</span></span><br><span class="line">    compute1.vm.hostname = <span class="string">"compute1.example.com"</span></span><br><span class="line">    compute1.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |v|  </span><br><span class="line">      v.name = <span class="string">"compute1.demo1"</span>  </span><br><span class="line">      v.memory = <span class="number">1024</span></span><br><span class="line">      v.cpus = <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    compute1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"10.30.0.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">    compute1.vm.network <span class="symbol">:private_network</span>, <span class="symbol">ip:</span> <span class="string">"172.16.10.11"</span>, <span class="symbol">auto_config:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment">#OpenStack PackStack</span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Vagrant</span></span><br><span class="line">vagrant up network1</span><br><span class="line">vagrant up compute1</span><br><span class="line"></span><br><span class="line"><span class="comment">#Repository</span></span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d</span><br><span class="line"></span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/repofiles/rh-ceph-<span class="number">1</span>-el7.repo   </span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/repofiles/rh-rhel-<span class="number">7</span>-el7.repo   </span><br><span class="line">wget http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/repofiles/rh-rhelosp-<span class="number">7</span>-el7.repo</span><br><span class="line"></span><br><span class="line">yum clean all</span><br><span class="line">yum repolist</span><br><span class="line"></span><br><span class="line">yum install -y net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置packstack，失败可以反复执行</span></span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line">yum install openstack-packstack -y</span><br><span class="line">packstack --answer-file=packstack-answers.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#packstack-answers.txt</span></span><br><span class="line">[general]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Path to a public key to install on servers. If a usable key has not</span></span><br><span class="line"><span class="comment"># been installed on the remote servers, the user is prompted for a</span></span><br><span class="line"><span class="comment"># password and this key is installed so the password will not be</span></span><br><span class="line"><span class="comment"># required again.</span></span><br><span class="line">CONFIG_SSH_KEY=/root/.ssh/id_rsa.pub</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default password to be used everywhere (overridden by passwords set</span></span><br><span class="line"><span class="comment"># for individual services or users).</span></span><br><span class="line">CONFIG_DEFAULT_PASSWORD=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install MariaDB.</span></span><br><span class="line">CONFIG_MARIADB_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Image Service (glance).</span></span><br><span class="line">CONFIG_GLANCE_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Block Storage (cinder).</span></span><br><span class="line">CONFIG_CINDER_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Shared File System (manila).</span></span><br><span class="line">CONFIG_MANILA_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Compute (nova).</span></span><br><span class="line">CONFIG_NOVA_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Networking (neutron); otherwise,</span></span><br><span class="line"><span class="comment"># Compute Networking (nova) will be used.</span></span><br><span class="line">CONFIG_NEUTRON_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Dashboard (horizon).</span></span><br><span class="line">CONFIG_HORIZON_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Object Storage (swift).</span></span><br><span class="line">CONFIG_SWIFT_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Metering (ceilometer).</span></span><br><span class="line">CONFIG_CEILOMETER_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Orchestration (heat).</span></span><br><span class="line">CONFIG_HEAT_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Data Processing (sahara).</span></span><br><span class="line">CONFIG_SAHARA_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Database (trove).</span></span><br><span class="line">CONFIG_TROVE_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Bare Metal Provisioning (ironic).</span></span><br><span class="line">CONFIG_IRONIC_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install the OpenStack Client packages (command-line</span></span><br><span class="line"><span class="comment"># tools). An admin "rc" file will also be installed.</span></span><br><span class="line">CONFIG_CLIENT_INSTALL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of NTP servers. Leave plain if Packstack</span></span><br><span class="line"><span class="comment"># should not install ntpd on instances.</span></span><br><span class="line">CONFIG_NTP_SERVERS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install Nagios to monitor OpenStack hosts. Nagios</span></span><br><span class="line"><span class="comment"># provides additional tools for monitoring the OpenStack environment.</span></span><br><span class="line">CONFIG_NAGIOS_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of servers to be excluded from the</span></span><br><span class="line"><span class="comment"># installation. This is helpful if you are running Packstack a second</span></span><br><span class="line"><span class="comment"># time with the same answer file and do not want Packstack to</span></span><br><span class="line"><span class="comment"># overwrite these server's configurations. Leave empty if you do not</span></span><br><span class="line"><span class="comment"># need to exclude any servers.</span></span><br><span class="line">EXCLUDE_SERVERS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to run OpenStack services in debug mode;</span></span><br><span class="line"><span class="comment"># otherwise, specify 'n'.</span></span><br><span class="line">CONFIG_DEBUG_MODE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP address of the server on which to install OpenStack services</span></span><br><span class="line"><span class="comment"># specific to the controller role (for example, API servers or</span></span><br><span class="line"><span class="comment"># dashboard).</span></span><br><span class="line">CONFIG_CONTROLLER_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># List of IP addresses of the servers on which to install the Compute/</span></span><br><span class="line"><span class="comment"># service.</span></span><br><span class="line">CONFIG_COMPUTE_HOSTS=<span class="number">10.30</span>.<span class="number">0.11</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># List of IP addresses of the server on which to install the network</span></span><br><span class="line"><span class="comment"># service such as Compute networking (nova network) or OpenStack</span></span><br><span class="line"><span class="comment"># Networking (neutron).</span></span><br><span class="line">CONFIG_NETWORK_HOSTS=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to use VMware vCenter as hypervisor and</span></span><br><span class="line"><span class="comment"># storage; otherwise, specify 'n'.</span></span><br><span class="line">CONFIG_VMWARE_BACKEND=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to use unsupported parameters. This should</span></span><br><span class="line"><span class="comment"># be used only if you know what you are doing. Issues caused by using</span></span><br><span class="line"><span class="comment"># unsupported options will not be fixed before the next major release.</span></span><br><span class="line">CONFIG_UNSUPPORTED=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to use subnet addresses (in CIDR format)</span></span><br><span class="line"><span class="comment"># instead of interface names in following options:</span></span><br><span class="line"><span class="comment"># CONFIG_NOVA_COMPUTE_PRIVIF, CONFIG_NOVA_NETWORK_PRIVIF,</span></span><br><span class="line"><span class="comment"># CONFIG_NOVA_NETWORK_PUBIF, CONFIG_NEUTRON_OVS_BRIDGE_IFACES,</span></span><br><span class="line"><span class="comment"># CONFIG_NEUTRON_LB_INTERFACE_MAPPINGS, CONFIG_NEUTRON_OVS_TUNNEL_IF.</span></span><br><span class="line"><span class="comment"># This is useful for cases when interface names are not same on all</span></span><br><span class="line"><span class="comment"># installation hosts.</span></span><br><span class="line">CONFIG_USE_SUBNETS=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP address of the VMware vCenter server.</span></span><br><span class="line">CONFIG_VCENTER_HOST=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name for VMware vCenter server authentication.</span></span><br><span class="line">CONFIG_VCENTER_USER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for VMware vCenter server authentication.</span></span><br><span class="line">CONFIG_VCENTER_PASSWORD=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the VMware vCenter cluster.</span></span><br><span class="line">CONFIG_VCENTER_CLUSTER_NAME=</span><br><span class="line"></span><br><span class="line"><span class="comment"># (Unsupported!) IP address of the server on which to install</span></span><br><span class="line"><span class="comment"># OpenStack services specific to storage servers such as Image or</span></span><br><span class="line"><span class="comment"># Block Storage services.</span></span><br><span class="line">CONFIG_STORAGE_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (Unsupported!) IP address of the server on which to install</span></span><br><span class="line"><span class="comment"># OpenStack services specific to OpenStack Data Processing (sahara).</span></span><br><span class="line">CONFIG_SAHARA_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to enable the EPEL repository (Extra Packages for</span></span><br><span class="line"><span class="comment"># Enterprise Linux).</span></span><br><span class="line">CONFIG_USE_EPEL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of URLs for any additional yum repositories,</span></span><br><span class="line"><span class="comment"># to use for installation.</span></span><br><span class="line">CONFIG_REPO=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to enable the RDO testing repository.</span></span><br><span class="line">CONFIG_ENABLE_RDO_TESTING=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># To subscribe each server with Red Hat Subscription Manager, include</span></span><br><span class="line"><span class="comment"># this with CONFIG_RH_PW.</span></span><br><span class="line">CONFIG_RH_USER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># To subscribe each server to receive updates from a Satellite</span></span><br><span class="line"><span class="comment"># server, provide the URL of the Satellite server. You must also</span></span><br><span class="line"><span class="comment"># provide a user name (CONFIG_SATELLITE_USERNAME) and password</span></span><br><span class="line"><span class="comment"># (CONFIG_SATELLITE_PASSWORD) or an access key (CONFIG_SATELLITE_AKEY)</span></span><br><span class="line"><span class="comment"># for authentication.</span></span><br><span class="line">CONFIG_SATELLITE_URL=</span><br><span class="line"></span><br><span class="line"><span class="comment"># To subscribe each server with Red Hat Subscription Manager, include</span></span><br><span class="line"><span class="comment"># this with CONFIG_RH_USER.</span></span><br><span class="line">CONFIG_RH_PW=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to enable RHEL optional repositories.</span></span><br><span class="line">CONFIG_RH_OPTIONAL=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTP proxy to use with Red Hat Subscription Manager.</span></span><br><span class="line">CONFIG_RH_PROXY=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Port to use for Red Hat Subscription Manager's HTTP proxy.</span></span><br><span class="line">CONFIG_RH_PROXY_PORT=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name to use for Red Hat Subscription Manager's HTTP proxy.</span></span><br><span class="line">CONFIG_RH_PROXY_USER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for Red Hat Subscription Manager's HTTP proxy.</span></span><br><span class="line">CONFIG_RH_PROXY_PW=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name to authenticate with the RHN Satellite server; if you</span></span><br><span class="line"><span class="comment"># intend to use an access key for Satellite authentication, leave this</span></span><br><span class="line"><span class="comment"># blank.</span></span><br><span class="line">CONFIG_SATELLITE_USER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to authenticate with the RHN Satellite server; if you</span></span><br><span class="line"><span class="comment"># intend to use an access key for Satellite authentication, leave this</span></span><br><span class="line"><span class="comment"># blank.</span></span><br><span class="line">CONFIG_SATELLITE_PW=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Access key for the Satellite server; if you intend to use a user</span></span><br><span class="line"><span class="comment"># name and password for Satellite authentication, leave this blank.</span></span><br><span class="line">CONFIG_SATELLITE_AKEY=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Certificate path or URL of the certificate authority to verify that</span></span><br><span class="line"><span class="comment"># the connection with the Satellite server is secure. If you are not</span></span><br><span class="line"><span class="comment"># using Satellite in your deployment, leave this blank.</span></span><br><span class="line">CONFIG_SATELLITE_CACERT=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Profile name that should be used as an identifier for the system in</span></span><br><span class="line"><span class="comment"># RHN Satellite (if required).</span></span><br><span class="line">CONFIG_SATELLITE_PROFILE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of flags passed to the rhnreg_ks command</span></span><br><span class="line"><span class="comment"># (novirtinfo, norhnsd, nopackages).</span></span><br><span class="line">CONFIG_SATELLITE_FLAGS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTP proxy to use when connecting to the RHN Satellite server (if</span></span><br><span class="line"><span class="comment"># required).</span></span><br><span class="line">CONFIG_SATELLITE_PROXY=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name to authenticate with the Satellite-server HTTP proxy.</span></span><br><span class="line">CONFIG_SATELLITE_PROXY_USER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User password to authenticate with the Satellite-server HTTP proxy.</span></span><br><span class="line">CONFIG_SATELLITE_PROXY_PW=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify filepath for CA cert file. If CONFIG_SSL_CACERT_SELFSIGN is</span></span><br><span class="line"><span class="comment"># set to 'n' it has to be preexisting file.</span></span><br><span class="line">CONFIG_SSL_CACERT_FILE=/etc/pki/tls/certs/selfcert.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify filepath for CA cert key file. If</span></span><br><span class="line"><span class="comment"># CONFIG_SSL_CACERT_SELFSIGN is set to 'n' it has to be preexisting</span></span><br><span class="line"><span class="comment"># file.</span></span><br><span class="line">CONFIG_SSL_CACERT_KEY_FILE=/etc/pki/tls/private/selfkey.key</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the path to use to store generated SSL certificates in.</span></span><br><span class="line">CONFIG_SSL_CERT_DIR=~/packstackca/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want Packstack to pregenerate the CA</span></span><br><span class="line"><span class="comment"># Certificate.</span></span><br><span class="line">CONFIG_SSL_CACERT_SELFSIGN=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the selfsigned CAcert subject country.</span></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_C=--</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the selfsigned CAcert subject state.</span></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_ST=State</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the selfsigned CAcert subject location.</span></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_L=City</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the selfsigned CAcert subject organization.</span></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_O=openstack</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the selfsigned CAcert subject organizational unit.</span></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_OU=packstack</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enter the selfsigned CAcert subject common name.</span></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_CN=node-<span class="number">1</span>.example.com</span><br><span class="line"></span><br><span class="line">CONFIG_SELFSIGN_CACERT_SUBJECT_MAIL=admin@node-<span class="number">1</span>.example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># Service to be used as the AMQP broker (qpid, rabbitmq).</span></span><br><span class="line">CONFIG_AMQP_BACKEND=rabbitmq</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP address of the server on which to install the AMQP service.</span></span><br><span class="line">CONFIG_AMQP_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to enable SSL for the AMQP service.</span></span><br><span class="line">CONFIG_AMQP_ENABLE_SSL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to enable authentication for the AMQP service.</span></span><br><span class="line">CONFIG_AMQP_ENABLE_AUTH=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the NSS certificate database of the AMQP service.</span></span><br><span class="line">CONFIG_AMQP_NSS_CERTDB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># User for AMQP authentication.</span></span><br><span class="line">CONFIG_AMQP_AUTH_USER=amqp_user</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for AMQP authentication.</span></span><br><span class="line">CONFIG_AMQP_AUTH_PASSWORD=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP address of the server on which to install MariaDB. If a MariaDB</span></span><br><span class="line"><span class="comment"># installation was not specified in CONFIG_MARIADB_INSTALL, specify</span></span><br><span class="line"><span class="comment"># the IP address of an existing database server (a MariaDB cluster can</span></span><br><span class="line"><span class="comment"># also be specified).</span></span><br><span class="line">CONFIG_MARIADB_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User name for the MariaDB administrative user.</span></span><br><span class="line">CONFIG_MARIADB_USER=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the MariaDB administrative user.</span></span><br><span class="line">CONFIG_MARIADB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Identity service (keystone) to access the</span></span><br><span class="line"><span class="comment"># database.</span></span><br><span class="line">CONFIG_KEYSTONE_DB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default region name to use when creating tenants in the Identity</span></span><br><span class="line"><span class="comment"># service.</span></span><br><span class="line">CONFIG_KEYSTONE_REGION=RegionOne</span><br><span class="line"></span><br><span class="line"><span class="comment"># Token to use for the Identity service API.</span></span><br><span class="line">CONFIG_KEYSTONE_ADMIN_TOKEN=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Email address for the Identity service 'admin' user.  Defaults to:</span></span><br><span class="line">CONFIG_KEYSTONE_ADMIN_EMAIL=root@localhost</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name for the Identity service 'admin' user.  Defaults to:</span></span><br><span class="line"><span class="comment"># 'admin'.</span></span><br><span class="line">CONFIG_KEYSTONE_ADMIN_USERNAME=admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Identity service 'admin' user.</span></span><br><span class="line">CONFIG_KEYSTONE_ADMIN_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Identity service 'demo' user.</span></span><br><span class="line">CONFIG_KEYSTONE_DEMO_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Identity service API version string (v2.0, v3).</span></span><br><span class="line">CONFIG_KEYSTONE_API_VERSION=v2.<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Identity service token format (UUID or PKI). The recommended format</span></span><br><span class="line"><span class="comment"># for new deployments is UUID.</span></span><br><span class="line">CONFIG_KEYSTONE_TOKEN_FORMAT=UUID</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of service to use to run the Identity service (keystone,</span></span><br><span class="line"><span class="comment"># httpd).</span></span><br><span class="line">CONFIG_KEYSTONE_SERVICE_NAME=httpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># Type of Identity service backend (sql, ldap).</span></span><br><span class="line">CONFIG_KEYSTONE_IDENTITY_BACKEND=sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># URL for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_URL=ldap://<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User DN for the Identity service LDAP backend.  Used to bind to the</span></span><br><span class="line"><span class="comment"># LDAP server if the LDAP server does not allow anonymous</span></span><br><span class="line"><span class="comment"># authentication.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_DN=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User DN password for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_PASSWORD=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Base suffix for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_SUFFIX=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Query scope for the Identity service LDAP backend. Use 'one' for</span></span><br><span class="line"><span class="comment"># onelevel/singleLevel or 'sub' for subtree/wholeSubtree ('base' is</span></span><br><span class="line"><span class="comment"># not actually used by the Identity service and is therefore</span></span><br><span class="line"><span class="comment"># deprecated) (base, one, sub)</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_QUERY_SCOPE=one</span><br><span class="line"></span><br><span class="line"><span class="comment"># Query page size for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_PAGE_SIZE=-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User subtree for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_SUBTREE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User query filter for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_FILTER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User object class for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_OBJECTCLASS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User ID attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ID_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_NAME_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User email address attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_MAIL_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># User-enabled attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ENABLED_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Bit mask integer applied to user-enabled attribute for the Identity</span></span><br><span class="line"><span class="comment"># service LDAP backend. Indicate the bit that the enabled value is</span></span><br><span class="line"><span class="comment"># stored in if the LDAP server represents "enabled" as a bit on an</span></span><br><span class="line"><span class="comment"># integer rather than a boolean. A value of "0" indicates the mask is</span></span><br><span class="line"><span class="comment"># not used (default). If this is not set to "0", the typical value is</span></span><br><span class="line"><span class="comment"># "2", typically used when</span></span><br><span class="line"><span class="comment"># "CONFIG_KEYSTONE_LDAP_USER_ENABLED_ATTRIBUTE = userAccountControl".</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ENABLED_MASK=-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Value of enabled attribute which indicates user is enabled for the</span></span><br><span class="line"><span class="comment"># Identity service LDAP backend. This should match an appropriate</span></span><br><span class="line"><span class="comment"># integer value if the LDAP server uses non-boolean (bitmask) values</span></span><br><span class="line"><span class="comment"># to indicate whether a user is enabled or disabled. If this is not</span></span><br><span class="line"><span class="comment"># set as 'y', the typical value is "512". This is typically used when</span></span><br><span class="line"><span class="comment"># "CONFIG_KEYSTONE_LDAP_USER_ENABLED_ATTRIBUTE = userAccountControl".</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ENABLED_DEFAULT=TRUE</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if users are disabled (not enabled) in the Identity</span></span><br><span class="line"><span class="comment"># service LDAP backend (inverts boolean-enalbed values).  Some LDAP</span></span><br><span class="line"><span class="comment"># servers use a boolean lock attribute where "y" means an account is</span></span><br><span class="line"><span class="comment"># disabled. Setting this to 'y' allows these lock attributes to be</span></span><br><span class="line"><span class="comment"># used. This setting will have no effect if</span></span><br><span class="line"><span class="comment"># "CONFIG_KEYSTONE_LDAP_USER_ENABLED_MASK" is in use (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ENABLED_INVERT=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of attributes stripped from LDAP user entry</span></span><br><span class="line"><span class="comment"># upon update.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ATTRIBUTE_IGNORE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Identity service LDAP attribute mapped to default_project_id for</span></span><br><span class="line"><span class="comment"># users.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_DEFAULT_PROJECT_ID_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to be able to create Identity service users</span></span><br><span class="line"><span class="comment"># through the Identity service interface; specify 'n' if you will</span></span><br><span class="line"><span class="comment"># create directly in the LDAP backend (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ALLOW_CREATE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to be able to update Identity service users</span></span><br><span class="line"><span class="comment"># through the Identity service interface; specify 'n' if you will</span></span><br><span class="line"><span class="comment"># update directly in the LDAP backend (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ALLOW_UPDATE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to be able to delete Identity service users</span></span><br><span class="line"><span class="comment"># through the Identity service interface; specify 'n' if you will</span></span><br><span class="line"><span class="comment"># delete directly in the LDAP backend (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ALLOW_DELETE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Identity service LDAP attribute mapped to password.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_PASS_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># DN of the group entry to hold enabled LDAP users when using enabled</span></span><br><span class="line"><span class="comment"># emulation.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ENABLED_EMULATION_DN=</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of additional LDAP attributes for mapping additional attribute</span></span><br><span class="line"><span class="comment"># mappings for users. The attribute-mapping format is</span></span><br><span class="line"><span class="comment"># &lt;ldap_attr&gt;:&lt;user_attr&gt;, where ldap_attr is the attribute in the</span></span><br><span class="line"><span class="comment"># LDAP entry and user_attr is the Identity API attribute.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USER_ADDITIONAL_ATTRIBUTE_MAPPING=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group subtree for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_SUBTREE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group query filter for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_FILTER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group object class for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_OBJECTCLASS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group ID attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_ID_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group name attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_NAME_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group member attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_MEMBER_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group description attribute for the Identity service LDAP backend.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_DESC_ATTRIBUTE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of attributes stripped from LDAP group entry</span></span><br><span class="line"><span class="comment"># upon update.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_ATTRIBUTE_IGNORE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to be able to create Identity service</span></span><br><span class="line"><span class="comment"># groups through the Identity service interface; specify 'n' if you</span></span><br><span class="line"><span class="comment"># will create directly in the LDAP backend (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_ALLOW_CREATE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to be able to update Identity service</span></span><br><span class="line"><span class="comment"># groups through the Identity service interface; specify 'n' if you</span></span><br><span class="line"><span class="comment"># will update directly in the LDAP backend (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_ALLOW_UPDATE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if you want to be able to delete Identity service</span></span><br><span class="line"><span class="comment"># groups through the Identity service interface; specify 'n' if you</span></span><br><span class="line"><span class="comment"># will delete directly in the LDAP backend (n, y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_ALLOW_DELETE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of additional LDAP attributes used for mapping additional</span></span><br><span class="line"><span class="comment"># attribute mappings for groups. The attribute=mapping format is</span></span><br><span class="line"><span class="comment"># &lt;ldap_attr&gt;:&lt;group_attr&gt;, where ldap_attr is the attribute in the</span></span><br><span class="line"><span class="comment"># LDAP entry and group_attr is the Identity API attribute.</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_GROUP_ADDITIONAL_ATTRIBUTE_MAPPING=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' if the Identity service LDAP backend should use TLS (n,</span></span><br><span class="line"><span class="comment"># y).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_USE_TLS=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># CA certificate directory for Identity service LDAP backend (if TLS</span></span><br><span class="line"><span class="comment"># is used).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_TLS_CACERTDIR=</span><br><span class="line"></span><br><span class="line"><span class="comment"># CA certificate file for Identity service LDAP backend (if TLS is</span></span><br><span class="line"><span class="comment"># used).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_TLS_CACERTFILE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Certificate-checking strictness level for Identity service LDAP</span></span><br><span class="line"><span class="comment"># backend (never, allow, demand).</span></span><br><span class="line">CONFIG_KEYSTONE_LDAP_TLS_REQ_CERT=demand</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Image service (glance) to access the</span></span><br><span class="line"><span class="comment"># database.</span></span><br><span class="line">CONFIG_GLANCE_DB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Image service to authenticate with the</span></span><br><span class="line"><span class="comment"># Identity service.</span></span><br><span class="line">CONFIG_GLANCE_KS_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Storage backend for the Image service (controls how the Image</span></span><br><span class="line"><span class="comment"># service stores disk images). Valid options are: file or swift</span></span><br><span class="line"><span class="comment"># (Object Storage). The Object Storage service must be enabled to use</span></span><br><span class="line"><span class="comment"># it as a working backend; otherwise, Packstack falls back to 'file'.</span></span><br><span class="line"><span class="comment"># ['file', 'swift']</span></span><br><span class="line">CONFIG_GLANCE_BACKEND=file</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Block Storage service (cinder) to access</span></span><br><span class="line"><span class="comment"># the database.</span></span><br><span class="line">CONFIG_CINDER_DB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Block Storage service to authenticate with</span></span><br><span class="line"><span class="comment"># the Identity service.</span></span><br><span class="line">CONFIG_CINDER_KS_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Storage backend to use for the Block Storage service; valid options</span></span><br><span class="line"><span class="comment"># are: lvm, gluster, nfs, vmdk, netapp. ['lvm', 'gluster', 'nfs',</span></span><br><span class="line"><span class="comment"># 'vmdk', 'netapp']</span></span><br><span class="line">CONFIG_CINDER_BACKEND=lvm</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to create the Block Storage volumes group. That is,</span></span><br><span class="line"><span class="comment"># Packstack creates a raw disk image in /var/lib/cinder, and mounts it</span></span><br><span class="line"><span class="comment"># using a loopback device. This should only be used for testing on a</span></span><br><span class="line"><span class="comment"># proof-of-concept installation of the Block Storage service (a file-</span></span><br><span class="line"><span class="comment"># backed volume group is not suitable for production usage) (y, n).</span></span><br><span class="line">CONFIG_CINDER_VOLUMES_CREATE=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Size of Block Storage volumes group. Actual volume size will be</span></span><br><span class="line"><span class="comment"># extended with 3% more space for VG metadata. Remember that the size</span></span><br><span class="line"><span class="comment"># of the volume group will restrict the amount of disk space that you</span></span><br><span class="line"><span class="comment"># can expose to Compute instances, and that the specified amount must</span></span><br><span class="line"><span class="comment"># be available on the device used for /var/lib/cinder.</span></span><br><span class="line">CONFIG_CINDER_VOLUMES_SIZE=<span class="number">10</span>G</span><br><span class="line"></span><br><span class="line"><span class="comment"># A single or comma-separated list of Red Hat Storage (gluster)</span></span><br><span class="line"><span class="comment"># volume shares to mount. Example: 'ip-address:/vol-name', 'domain</span></span><br><span class="line"><span class="comment"># :/vol-name'</span></span><br><span class="line">CONFIG_CINDER_GLUSTER_MOUNTS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># A single or comma-separated list of NFS exports to mount. Example:</span></span><br><span class="line"><span class="comment"># 'ip-address:/export-name'</span></span><br><span class="line">CONFIG_CINDER_NFS_MOUNTS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Administrative user account name used to access the NetApp storage</span></span><br><span class="line"><span class="comment"># system or proxy server.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_LOGIN=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the NetApp administrative user account specified in</span></span><br><span class="line"><span class="comment"># the CONFIG_CINDER_NETAPP_LOGIN parameter.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_PASSWORD=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hostname (or IP address) for the NetApp storage system or proxy</span></span><br><span class="line"><span class="comment"># server.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_HOSTNAME=</span><br><span class="line"></span><br><span class="line"><span class="comment"># The TCP port to use for communication with the storage system or</span></span><br><span class="line"><span class="comment"># proxy. If not specified, Data ONTAP drivers will use 80 for HTTP and</span></span><br><span class="line"><span class="comment"># 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</span></span><br><span class="line"><span class="comment"># Defaults to: 80.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_SERVER_PORT=<span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Storage family type used on the NetApp storage system; valid</span></span><br><span class="line"><span class="comment"># options are ontap_7mode for using Data ONTAP operating in 7-Mode,</span></span><br><span class="line"><span class="comment"># ontap_cluster for using clustered Data ONTAP, or E-Series for NetApp</span></span><br><span class="line"><span class="comment"># E-Series. Defaults to: ontap_cluster. ['ontap_7mode',</span></span><br><span class="line"><span class="comment"># 'ontap_cluster', 'eseries']</span></span><br><span class="line">CONFIG_CINDER_NETAPP_STORAGE_FAMILY=ontap_cluster</span><br><span class="line"></span><br><span class="line"><span class="comment"># The transport protocol used when communicating with the NetApp</span></span><br><span class="line"><span class="comment"># storage system or proxy server. Valid values are http or https.</span></span><br><span class="line"><span class="comment"># Defaults to: 'http' ('http', 'https').</span></span><br><span class="line">CONFIG_CINDER_NETAPP_TRANSPORT_TYPE=http</span><br><span class="line"></span><br><span class="line"><span class="comment"># Storage protocol to be used on the data path with the NetApp</span></span><br><span class="line"><span class="comment"># storage system; valid options are iscsi, fc, nfs. Defaults to: nfs</span></span><br><span class="line"><span class="comment"># (iscsi, fc, nfs).</span></span><br><span class="line">CONFIG_CINDER_NETAPP_STORAGE_PROTOCOL=nfs</span><br><span class="line"></span><br><span class="line"><span class="comment"># Quantity to be multiplied by the requested volume size to ensure</span></span><br><span class="line"><span class="comment"># enough space is available on the virtual storage server (Vserver) to</span></span><br><span class="line"><span class="comment"># fulfill the volume creation request.  Defaults to: 1.0.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_SIZE_MULTIPLIER=<span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Time period (in minutes) that is allowed to elapse after the image</span></span><br><span class="line"><span class="comment"># is last accessed, before it is deleted from the NFS image cache.</span></span><br><span class="line"><span class="comment"># When a cache-cleaning cycle begins, images in the cache that have</span></span><br><span class="line"><span class="comment"># not been accessed in the last M minutes, where M is the value of</span></span><br><span class="line"><span class="comment"># this parameter, are deleted from the cache to create free space on</span></span><br><span class="line"><span class="comment"># the NFS share. Defaults to: 720.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_EXPIRY_THRES_MINUTES=<span class="number">720</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If the percentage of available space for an NFS share has dropped</span></span><br><span class="line"><span class="comment"># below the value specified by this parameter, the NFS image cache is</span></span><br><span class="line"><span class="comment"># cleaned.  Defaults to: 20.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_THRES_AVL_SIZE_PERC_START=<span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># When the percentage of available space on an NFS share has reached</span></span><br><span class="line"><span class="comment"># the percentage specified by this parameter, the driver stops</span></span><br><span class="line"><span class="comment"># clearing files from the NFS image cache that have not been accessed</span></span><br><span class="line"><span class="comment"># in the last M minutes, where M is the value of the</span></span><br><span class="line"><span class="comment"># CONFIG_CINDER_NETAPP_EXPIRY_THRES_MINUTES parameter. Defaults to:</span></span><br><span class="line"><span class="comment"># 60.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_THRES_AVL_SIZE_PERC_STOP=<span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Single or comma-separated list of NetApp NFS shares for Block</span></span><br><span class="line"><span class="comment"># Storage to use.  Format: ip-address:/export-name. Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_NFS_SHARES=</span><br><span class="line"></span><br><span class="line"><span class="comment"># File with the list of available NFS shares.   Defaults to:</span></span><br><span class="line"><span class="comment"># '/etc/cinder/shares.conf'.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_NFS_SHARES_CONFIG=/etc/cinder/shares.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># This parameter is only utilized when the storage protocol is</span></span><br><span class="line"><span class="comment"># configured to use iSCSI or FC. This parameter is used to restrict</span></span><br><span class="line"><span class="comment"># provisioning to the specified controller volumes. Specify the value</span></span><br><span class="line"><span class="comment"># of this parameter to be a comma separated list of NetApp controller</span></span><br><span class="line"><span class="comment"># volume names to be used for provisioning. Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_VOLUME_LIST=</span><br><span class="line"></span><br><span class="line"><span class="comment"># The vFiler unit on which provisioning of block storage volumes will</span></span><br><span class="line"><span class="comment"># be done. This parameter is only used by the driver when connecting</span></span><br><span class="line"><span class="comment"># to an instance with a storage family of Data ONTAP operating in</span></span><br><span class="line"><span class="comment"># 7-Mode Only use this parameter when utilizing the MultiStore feature</span></span><br><span class="line"><span class="comment"># on the NetApp storage system. Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_VFILER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># The name of the config.conf stanza for a Data ONTAP (7-mode) HA</span></span><br><span class="line"><span class="comment"># partner.  This option is only used by the driver when connecting to</span></span><br><span class="line"><span class="comment"># an instance with a storage family of Data ONTAP operating in 7-Mode,</span></span><br><span class="line"><span class="comment"># and it is required if the storage protocol selected is FC. Defaults</span></span><br><span class="line"><span class="comment"># to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_PARTNER_BACKEND_NAME=</span><br><span class="line"></span><br><span class="line"><span class="comment"># This option specifies the virtual storage server (Vserver) name on</span></span><br><span class="line"><span class="comment"># the storage cluster on which provisioning of block storage volumes</span></span><br><span class="line"><span class="comment"># should occur. Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_VSERVER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Restricts provisioning to the specified controllers. Value must be</span></span><br><span class="line"><span class="comment"># a comma-separated list of controller hostnames or IP addresses to be</span></span><br><span class="line"><span class="comment"># used for provisioning. This option is only utilized when the storage</span></span><br><span class="line"><span class="comment"># family is configured to use E-Series. Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_CONTROLLER_IPS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the NetApp E-Series storage array. Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_SA_PASSWORD=</span><br><span class="line"></span><br><span class="line"><span class="comment"># This option is used to define how the controllers in the E-Series</span></span><br><span class="line"><span class="comment"># storage array will work with the particular operating system on the</span></span><br><span class="line"><span class="comment"># hosts that are connected to it. Defaults to: 'linux_dm_mp'</span></span><br><span class="line">CONFIG_CINDER_NETAPP_ESERIES_HOST_TYPE=linux_dm_mp</span><br><span class="line"></span><br><span class="line"><span class="comment"># Path to the NetApp E-Series proxy application on a proxy server.</span></span><br><span class="line"><span class="comment"># The value is combined with the value of the</span></span><br><span class="line"><span class="comment"># CONFIG_CINDER_NETAPP_TRANSPORT_TYPE, CONFIG_CINDER_NETAPP_HOSTNAME,</span></span><br><span class="line"><span class="comment"># and CONFIG_CINDER_NETAPP_HOSTNAME options to create the URL used by</span></span><br><span class="line"><span class="comment"># the driver to connect to the proxy application. Defaults to:</span></span><br><span class="line"><span class="comment"># '/devmgr/v2'.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_WEBSERVICE_PATH=/devmgr/v2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Restricts provisioning to the specified storage pools. Only dynamic</span></span><br><span class="line"><span class="comment"># disk pools are currently supported. The value must be a comma-</span></span><br><span class="line"><span class="comment"># separated list of disk pool names to be used for provisioning.</span></span><br><span class="line"><span class="comment"># Defaults to: ''.</span></span><br><span class="line">CONFIG_CINDER_NETAPP_STORAGE_POOLS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the OpenStack File Share service (manila) to</span></span><br><span class="line"><span class="comment"># access the database.</span></span><br><span class="line">CONFIG_MANILA_DB_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the OpenStack File Share service (manila) to</span></span><br><span class="line"><span class="comment"># authenticate with the Identity service.</span></span><br><span class="line">CONFIG_MANILA_KS_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Backend for the OpenStack File Share service (manila); valid</span></span><br><span class="line"><span class="comment"># options are: generic or netapp (generic, netapp).</span></span><br><span class="line">CONFIG_MANILA_BACKEND=generic</span><br><span class="line"></span><br><span class="line"><span class="comment"># Denotes whether the driver should handle the responsibility of</span></span><br><span class="line"><span class="comment"># managing share servers. This must be set to false if the driver is</span></span><br><span class="line"><span class="comment"># to operate without managing share servers. Defaults to: 'false'</span></span><br><span class="line"><span class="comment"># (true, false).</span></span><br><span class="line">CONFIG_MANILA_NETAPP_DRV_HANDLES_SHARE_SERVERS=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The transport protocol used when communicating with the storage</span></span><br><span class="line"><span class="comment"># system or proxy server. Valid values are 'http' and 'https'.</span></span><br><span class="line"><span class="comment"># Defaults to: 'https' (https, http).</span></span><br><span class="line">CONFIG_MANILA_NETAPP_TRANSPORT_TYPE=https</span><br><span class="line"></span><br><span class="line"><span class="comment"># Administrative user account name used to access the NetApp storage</span></span><br><span class="line"><span class="comment"># system.  Defaults to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_LOGIN=admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the NetApp administrative user account specified in</span></span><br><span class="line"><span class="comment"># the CONFIG_MANILA_NETAPP_LOGIN parameter. Defaults to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_PASSWORD=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hostname (or IP address) for the NetApp storage system or proxy</span></span><br><span class="line"><span class="comment"># server. Defaults to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_SERVER_HOSTNAME=</span><br><span class="line"></span><br><span class="line"><span class="comment"># The storage family type used on the storage system; valid values</span></span><br><span class="line"><span class="comment"># are ontap_cluster for clustered Data ONTAP. Defaults to:</span></span><br><span class="line"><span class="comment"># 'ontap_cluster'.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_STORAGE_FAMILY=ontap_cluster</span><br><span class="line"></span><br><span class="line"><span class="comment"># The TCP port to use for communication with the storage system or</span></span><br><span class="line"><span class="comment"># proxy server. If not specified, Data ONTAP drivers will use 80 for</span></span><br><span class="line"><span class="comment"># HTTP and 443 for HTTPS. Defaults to: '443'.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_SERVER_PORT=<span class="number">443</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pattern for searching available aggregates for NetApp provisioning.</span></span><br><span class="line"><span class="comment"># Defaults to: '(.*)'.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_AGGREGATE_NAME_SEARCH_PATTERN=(.*)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of aggregate on which to create the NetApp root volume. This</span></span><br><span class="line"><span class="comment"># option only applies when the option</span></span><br><span class="line"><span class="comment"># CONFIG_MANILA_NETAPP_DRV_HANDLES_SHARE_SERVERS is set to True.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_ROOT_VOLUME_AGGREGATE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># NetApp root volume name. Defaults to: 'root'.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_ROOT_VOLUME_NAME=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># This option specifies the storage virtual machine (previously</span></span><br><span class="line"><span class="comment"># called a Vserver) name on the storage cluster on which provisioning</span></span><br><span class="line"><span class="comment"># of shared file systems should occur. This option only applies when</span></span><br><span class="line"><span class="comment"># the option driver_handles_share_servers is set to False. Defaults</span></span><br><span class="line"><span class="comment"># to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETAPP_VSERVER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Denotes whether the driver should handle the responsibility of</span></span><br><span class="line"><span class="comment"># managing share servers. This must be set to false if the driver is</span></span><br><span class="line"><span class="comment"># to operate without managing share servers. Defaults to: 'true'.</span></span><br><span class="line"><span class="comment"># ['true', 'false']</span></span><br><span class="line">CONFIG_MANILA_GENERIC_DRV_HANDLES_SHARE_SERVERS=<span class="literal">true</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># Volume name template for Manila service. Defaults to: 'manila-</span></span><br><span class="line"><span class="comment"># share-%s'.</span></span><br><span class="line">CONFIG_MANILA_GENERIC_VOLUME_NAME_TEMPLATE=manila-share-%s</span><br><span class="line"></span><br><span class="line"><span class="comment"># Share mount path for Manila service. Defaults to: '/shares'.</span></span><br><span class="line">CONFIG_MANILA_GENERIC_SHARE_MOUNT_PATH=/shares</span><br><span class="line"></span><br><span class="line"><span class="comment"># Location of disk image for Manila service instance. Defaults to: '</span></span><br><span class="line">CONFIG_MANILA_SERVICE_IMAGE_LOCATION=https://www.dropbox.com/s/vi5oeh10q1qkckh/ubuntu_1204_nfs_cifs.qcow2</span><br><span class="line"></span><br><span class="line"><span class="comment"># User in Manila service instance.</span></span><br><span class="line">CONFIG_MANILA_SERVICE_INSTANCE_USER=ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to service instance user.</span></span><br><span class="line">CONFIG_MANILA_SERVICE_INSTANCE_PASSWORD=ubuntu</span><br><span class="line"></span><br><span class="line"><span class="comment"># Type of networking that the backend will use. A more detailed</span></span><br><span class="line"><span class="comment"># description of each option is available in the Manila docs. Defaults</span></span><br><span class="line"><span class="comment"># to: 'neutron'. ['neutron', 'nova-network', 'standalone']</span></span><br><span class="line">CONFIG_MANILA_NETWORK_TYPE=neutron</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gateway IPv4 address that should be used. Required. Defaults to:</span></span><br><span class="line"><span class="comment"># ''.</span></span><br><span class="line">CONFIG_MANILA_NETWORK_STANDALONE_GATEWAY=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Network mask that will be used. Can be either decimal like '24' or</span></span><br><span class="line"><span class="comment"># binary like '255.255.255.0'. Required. Defaults to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETWORK_STANDALONE_NETMASK=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set it if network has segmentation (VLAN, VXLAN, etc). It will be</span></span><br><span class="line"><span class="comment"># assigned to share-network and share drivers will be able to use this</span></span><br><span class="line"><span class="comment"># for network interfaces within provisioned share servers. Optional.</span></span><br><span class="line"><span class="comment"># Example: 1001. Defaults to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETWORK_STANDALONE_SEG_ID=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Can be IP address, range of IP addresses or list of addresses or</span></span><br><span class="line"><span class="comment"># ranges. Contains addresses from IP network that are allowed to be</span></span><br><span class="line"><span class="comment"># used. If empty, then will be assumed that all host addresses from</span></span><br><span class="line"><span class="comment"># network can be used. Optional. Examples: 10.0.0.10 or</span></span><br><span class="line"><span class="comment"># 10.0.0.10-10.0.0.20 or</span></span><br><span class="line"><span class="comment"># 10.0.0.10-10.0.0.20,10.0.0.30-10.0.0.40,10.0.0.50. Defaults to: ''.</span></span><br><span class="line">CONFIG_MANILA_NETWORK_STANDALONE_IP_RANGE=</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP version of network. Optional. Defaults to: 4 (4, 6).</span></span><br><span class="line">CONFIG_MANILA_NETWORK_STANDALONE_IP_VERSION=<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Bare Metal Provisioning (ironic) to</span></span><br><span class="line"><span class="comment"># access the database.</span></span><br><span class="line">CONFIG_IRONIC_DB_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Bare Metal Provisioning to</span></span><br><span class="line"><span class="comment"># authenticate with the Identity service.</span></span><br><span class="line">CONFIG_IRONIC_KS_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Compute service (nova) to access the</span></span><br><span class="line"><span class="comment"># database.</span></span><br><span class="line">CONFIG_NOVA_DB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Compute service to authenticate with the</span></span><br><span class="line"><span class="comment"># Identity service.</span></span><br><span class="line">CONFIG_NOVA_KS_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Overcommitment ratio for virtual to physical CPUs. Specify 1.0 to</span></span><br><span class="line"><span class="comment"># disable CPU overcommitment.</span></span><br><span class="line">CONFIG_NOVA_SCHED_CPU_ALLOC_RATIO=<span class="number">16.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Overcommitment ratio for virtual to physical RAM. Specify 1.0 to</span></span><br><span class="line"><span class="comment"># disable RAM overcommitment.</span></span><br><span class="line">CONFIG_NOVA_SCHED_RAM_ALLOC_RATIO=<span class="number">1.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Protocol used for instance migration. Valid options are: tcp and</span></span><br><span class="line"><span class="comment"># ssh. Note that by default, the Compute user is created with the</span></span><br><span class="line"><span class="comment"># /sbin/nologin shell so that the SSH protocol will not work. To make</span></span><br><span class="line"><span class="comment"># the SSH protocol work, you must configure the Compute user on</span></span><br><span class="line"><span class="comment"># compute hosts manually (tcp, ssh).</span></span><br><span class="line">CONFIG_NOVA_COMPUTE_MIGRATE_PROTOCOL=tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># Manager that runs the Compute service.</span></span><br><span class="line">CONFIG_NOVA_COMPUTE_MANAGER=nova.compute.manager.ComputeManager</span><br><span class="line"></span><br><span class="line"><span class="comment"># PEM encoded certificate to be used for ssl on the https server,</span></span><br><span class="line"><span class="comment"># leave blank if one should be generated, this certificate should not</span></span><br><span class="line"><span class="comment"># require a passphrase. If CONFIG_HORIZON_SSL is set to 'n' this</span></span><br><span class="line"><span class="comment"># parameter is ignored.</span></span><br><span class="line">CONFIG_VNC_SSL_CERT=</span><br><span class="line"></span><br><span class="line"><span class="comment"># SSL keyfile corresponding to the certificate if one was entered. If</span></span><br><span class="line"><span class="comment"># CONFIG_HORIZON_SSL is set to 'n' this parameter is ignored.</span></span><br><span class="line">CONFIG_VNC_SSL_KEY=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Private interface for flat DHCP on the Compute servers.</span></span><br><span class="line">CONFIG_NOVA_COMPUTE_PRIVIF=eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Compute Network Manager. ['^nova\.network\.manager\.\w+Manager$']</span></span><br><span class="line">CONFIG_NOVA_NETWORK_MANAGER=nova.network.manager.FlatDHCPManager</span><br><span class="line"></span><br><span class="line"><span class="comment"># Public interface on the Compute network server.</span></span><br><span class="line">CONFIG_NOVA_NETWORK_PUBIF=eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Private interface for flat DHCP on the Compute network server.</span></span><br><span class="line">CONFIG_NOVA_NETWORK_PRIVIF=eth1</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP Range for flat DHCP. ['^[\:\.\da-fA-f]+(\/\d+)&#123;0,1&#125;$']</span></span><br><span class="line">CONFIG_NOVA_NETWORK_FIXEDRANGE=<span class="number">192.168</span>.<span class="number">1.0</span>/<span class="number">32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># IP Range for floating IP addresses. ['^[\:\.\da-</span></span><br><span class="line"><span class="comment"># fA-f]+(\/\d+)&#123;0,1&#125;$']</span></span><br><span class="line">CONFIG_NOVA_NETWORK_FLOATRANGE=<span class="number">10.30</span>.<span class="number">0.0</span>/<span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to automatically assign a floating IP to new instances.</span></span><br><span class="line"><span class="comment"># (y, n)</span></span><br><span class="line">CONFIG_NOVA_NETWORK_AUTOASSIGNFLOATINGIP=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># First VLAN for private networks (Compute networking).</span></span><br><span class="line">CONFIG_NOVA_NETWORK_VLAN_START=<span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of networks to support (Compute networking).</span></span><br><span class="line">CONFIG_NOVA_NETWORK_NUMBER=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of addresses in each private subnet (Compute networking).</span></span><br><span class="line">CONFIG_NOVA_NETWORK_SIZE=<span class="number">255</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Networking (neutron) to authenticate</span></span><br><span class="line"><span class="comment"># with the Identity service.</span></span><br><span class="line">CONFIG_NEUTRON_KS_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># The password to use for OpenStack Networking to access the</span></span><br><span class="line"><span class="comment"># database.</span></span><br><span class="line">CONFIG_NEUTRON_DB_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># The name of the Open vSwitch bridge (or empty for linuxbridge) for</span></span><br><span class="line"><span class="comment"># the OpenStack Networking L3 agent to use for external  traffic.</span></span><br><span class="line"><span class="comment"># Specify 'provider' if you intend to use a provider network to handle</span></span><br><span class="line"><span class="comment"># external traffic.</span></span><br><span class="line">CONFIG_NEUTRON_L3_EXT_BRIDGE=br-ex</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the OpenStack Networking metadata agent.</span></span><br><span class="line">CONFIG_NEUTRON_METADATA_PW=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Networking's Load-Balancing-</span></span><br><span class="line"><span class="comment"># as-a-Service (LBaaS) (y, n).</span></span><br><span class="line">CONFIG_LBAAS_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install OpenStack Networking's L3 Metering agent (y,</span></span><br><span class="line"><span class="comment"># n).</span></span><br><span class="line">CONFIG_NEUTRON_METERING_AGENT_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to configure OpenStack Networking's Firewall-</span></span><br><span class="line"><span class="comment"># as-a-Service (FWaaS) (y, n)</span></span><br><span class="line">CONFIG_NEUTRON_FWAAS=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of network-type driver entry points to be</span></span><br><span class="line"><span class="comment"># loaded from the neutron.ml2.type_drivers namespace (local, flat,</span></span><br><span class="line"><span class="comment"># vlan, gre, vxlan).</span></span><br><span class="line">CONFIG_NEUTRON_ML2_TYPE_DRIVERS=vxlan</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated, ordered list of network types to allocate as</span></span><br><span class="line"><span class="comment"># tenant networks. The 'local' value is only useful for single-box</span></span><br><span class="line"><span class="comment"># testing and provides no connectivity between hosts (local, vlan,</span></span><br><span class="line"><span class="comment"># gre, vxlan).</span></span><br><span class="line">CONFIG_NEUTRON_ML2_TENANT_NETWORK_TYPES=vxlan</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated ordered list of networking mechanism driver entry</span></span><br><span class="line"><span class="comment"># points to be loaded from the neutron.ml2.mechanism_drivers namespace</span></span><br><span class="line"><span class="comment"># (logger, test, linuxbridge, openvswitch, hyperv, ncs, arista,</span></span><br><span class="line"><span class="comment"># cisco_nexus, mlnx, l2population).</span></span><br><span class="line">CONFIG_NEUTRON_ML2_MECHANISM_DRIVERS=openvswitch</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of physical_network names with which flat</span></span><br><span class="line"><span class="comment"># networks can be created. Use * to allow flat networks with arbitrary</span></span><br><span class="line"><span class="comment"># physical_network names.</span></span><br><span class="line">CONFIG_NEUTRON_ML2_FLAT_NETWORKS=*</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of &lt;physical_network&gt;:&lt;vlan_min&gt;:&lt;vlan_max&gt; or</span></span><br><span class="line"><span class="comment"># &lt;physical_network&gt; specifying physical_network names usable for VLAN</span></span><br><span class="line"><span class="comment"># provider and tenant networks, as well as ranges of VLAN tags on each</span></span><br><span class="line"><span class="comment"># available for allocation to tenant networks.</span></span><br><span class="line">CONFIG_NEUTRON_ML2_VLAN_RANGES=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of &lt;tun_min&gt;:&lt;tun_max&gt; tuples enumerating</span></span><br><span class="line"><span class="comment"># ranges of GRE tunnel IDs that are available for tenant-network</span></span><br><span class="line"><span class="comment"># allocation. A tuple must be an array with tun_max +1 - tun_min &gt;</span></span><br><span class="line"><span class="comment"># 1000000.</span></span><br><span class="line">CONFIG_NEUTRON_ML2_TUNNEL_ID_RANGES=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of addresses for VXLAN multicast group. If</span></span><br><span class="line"><span class="comment"># left empty, disables VXLAN from sending allocate broadcast traffic</span></span><br><span class="line"><span class="comment"># (disables multicast VXLAN mode). Should be a Multicast IP (v4 or v6)</span></span><br><span class="line"><span class="comment"># address.</span></span><br><span class="line">CONFIG_NEUTRON_ML2_VXLAN_GROUP=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of &lt;vni_min&gt;:&lt;vni_max&gt; tuples enumerating</span></span><br><span class="line"><span class="comment"># ranges of VXLAN VNI IDs that are available for tenant network</span></span><br><span class="line"><span class="comment"># allocation. Minimum value is 0 and maximum value is 16777215.</span></span><br><span class="line">CONFIG_NEUTRON_ML2_VNI_RANGES=<span class="number">10</span>:<span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the L2 agent to be used with OpenStack Networking</span></span><br><span class="line"><span class="comment"># (linuxbridge, openvswitch).</span></span><br><span class="line">CONFIG_NEUTRON_L2_AGENT=openvswitch</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of interface mappings for the OpenStack</span></span><br><span class="line"><span class="comment"># Networking linuxbridge plugin. Each tuple in the list must be in the</span></span><br><span class="line"><span class="comment"># format &lt;physical_network&gt;:&lt;net_interface&gt;. Example:</span></span><br><span class="line"><span class="comment"># physnet1:eth1,physnet2:eth2,physnet3:eth3.</span></span><br><span class="line">CONFIG_NEUTRON_LB_INTERFACE_MAPPINGS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of bridge mappings for the OpenStack</span></span><br><span class="line"><span class="comment"># Networking Open vSwitch plugin. Each tuple in the list must be in</span></span><br><span class="line"><span class="comment"># the format &lt;physical_network&gt;:&lt;ovs_bridge&gt;. Example: physnet1:br-</span></span><br><span class="line"><span class="comment"># eth1,physnet2:br-eth2,physnet3:br-eth3</span></span><br><span class="line">CONFIG_NEUTRON_OVS_BRIDGE_MAPPINGS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of colon-separated Open vSwitch</span></span><br><span class="line"><span class="comment"># &lt;bridge&gt;:&lt;interface&gt; pairs. The interface will be added to the</span></span><br><span class="line"><span class="comment"># associated bridge. If you desire the bridge to be persistent a value</span></span><br><span class="line"><span class="comment"># must be added to this directive, also</span></span><br><span class="line"><span class="comment"># CONFIG_NEUTRON_OVS_BRIDGE_MAPPINGS must be set in order to create</span></span><br><span class="line"><span class="comment"># the proper port. This can be achieved from the command line by</span></span><br><span class="line"><span class="comment"># issuing the following command: packstack --allinone --os-neutron-</span></span><br><span class="line"><span class="comment"># ovs-bridge-mappings=ext-net:br-ex --os-neutron-ovs-bridge-interfaces</span></span><br><span class="line"><span class="comment"># =br-ex:eth0</span></span><br><span class="line">CONFIG_NEUTRON_OVS_BRIDGE_IFACES=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Interface for the Open vSwitch tunnel. Packstack overrides the IP</span></span><br><span class="line"><span class="comment"># address used for tunnels on this hypervisor to the IP found on the</span></span><br><span class="line"><span class="comment"># specified interface (for example, eth1).</span></span><br><span class="line">CONFIG_NEUTRON_OVS_TUNNEL_IF=</span><br><span class="line"></span><br><span class="line"><span class="comment"># VXLAN UDP port.</span></span><br><span class="line">CONFIG_NEUTRON_OVS_VXLAN_UDP_PORT=<span class="number">4789</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to set up Horizon communication over https (y, n).</span></span><br><span class="line">CONFIG_HORIZON_SSL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Secret key to use for Horizon Secret Encryption Key.</span></span><br><span class="line">CONFIG_HORIZON_SECRET_KEY=redhat</span><br><span class="line"></span><br><span class="line"><span class="comment"># PEM-encoded certificate to be used for SSL connections on the https</span></span><br><span class="line"><span class="comment"># server (the certificate should not require a passphrase). To</span></span><br><span class="line"><span class="comment"># generate a certificate, leave blank.</span></span><br><span class="line">CONFIG_HORIZON_SSL_CERT=</span><br><span class="line"></span><br><span class="line"><span class="comment"># SSL keyfile corresponding to the certificate if one was specified.</span></span><br><span class="line">CONFIG_HORIZON_SSL_KEY=</span><br><span class="line"></span><br><span class="line">CONFIG_HORIZON_SSL_CACERT=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Object Storage service to authenticate with</span></span><br><span class="line"><span class="comment"># the Identity service.</span></span><br><span class="line">CONFIG_SWIFT_KS_PW=<span class="number">480874</span>f915fd49a2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Comma-separated list of devices to use as storage device for Object</span></span><br><span class="line"><span class="comment"># Storage. Each entry must take the format /path/to/dev (for example,</span></span><br><span class="line"><span class="comment"># specifying /dev/vdb installs /dev/vdb as the Object Storage storage</span></span><br><span class="line"><span class="comment"># device; Packstack does not create the filesystem, you must do this</span></span><br><span class="line"><span class="comment"># first). If left empty, Packstack creates a loopback device for test</span></span><br><span class="line"><span class="comment"># setup.</span></span><br><span class="line">CONFIG_SWIFT_STORAGES=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of Object Storage storage zones; this number MUST be no</span></span><br><span class="line"><span class="comment"># larger than the number of configured storage devices.</span></span><br><span class="line">CONFIG_SWIFT_STORAGE_ZONES=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Number of Object Storage storage replicas; this number MUST be no</span></span><br><span class="line"><span class="comment"># larger than the number of configured storage zones.</span></span><br><span class="line">CONFIG_SWIFT_STORAGE_REPLICAS=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># File system type for storage nodes (xfs, ext4).</span></span><br><span class="line">CONFIG_SWIFT_STORAGE_FSTYPE=ext4</span><br><span class="line"></span><br><span class="line"><span class="comment"># Custom seed number to use for swift_hash_path_suffix in</span></span><br><span class="line"><span class="comment"># /etc/swift/swift.conf. If you do not provide a value, a seed number</span></span><br><span class="line"><span class="comment"># is automatically generated.</span></span><br><span class="line">CONFIG_SWIFT_HASH=<span class="number">61</span>da8c03b2034020</span><br><span class="line"></span><br><span class="line"><span class="comment"># Size of the Object Storage loopback file storage device.</span></span><br><span class="line">CONFIG_SWIFT_STORAGE_SIZE=<span class="number">2</span>G</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password used by Orchestration service user to authenticate against</span></span><br><span class="line"><span class="comment"># the database.</span></span><br><span class="line">CONFIG_HEAT_DB_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Encryption key to use for authentication in the Orchestration</span></span><br><span class="line"><span class="comment"># database (16, 24, or 32 chars).</span></span><br><span class="line">CONFIG_HEAT_AUTH_ENC_KEY=<span class="number">0</span>aa50ccab8254d99</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Orchestration service to authenticate with</span></span><br><span class="line"><span class="comment"># the Identity service.</span></span><br><span class="line">CONFIG_HEAT_KS_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install the Orchestration CloudWatch API (y, n).</span></span><br><span class="line">CONFIG_HEAT_CLOUDWATCH_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to install the Orchestration CloudFormation API (y, n).</span></span><br><span class="line">CONFIG_HEAT_CFN_INSTALL=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the Identity domain for Orchestration.</span></span><br><span class="line">CONFIG_HEAT_DOMAIN=heat</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the Identity domain administrative user for Orchestration.</span></span><br><span class="line">CONFIG_HEAT_DOMAIN_ADMIN=heat_admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password for the Identity domain administrative user for</span></span><br><span class="line"><span class="comment"># Orchestration.</span></span><br><span class="line">CONFIG_HEAT_DOMAIN_PASSWORD=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to provision for demo usage and testing (y, n).</span></span><br><span class="line">CONFIG_PROVISION_DEMO=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to configure the OpenStack Integration Test Suite</span></span><br><span class="line"><span class="comment"># (tempest) for testing. The test suite requires OpenStack Networking</span></span><br><span class="line"><span class="comment"># to be installed (y, n).</span></span><br><span class="line">CONFIG_PROVISION_TEMPEST=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># CIDR network address for the floating IP subnet.</span></span><br><span class="line">CONFIG_PROVISION_DEMO_FLOATRANGE=<span class="number">172.24</span>.<span class="number">4.224</span>/<span class="number">28</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The name to be assigned to the demo image in Glance (default</span></span><br><span class="line"><span class="comment"># "cirros").</span></span><br><span class="line">CONFIG_PROVISION_IMAGE_NAME=cirros</span><br><span class="line"></span><br><span class="line"><span class="comment"># A URL or local file location for an image to download and provision</span></span><br><span class="line"><span class="comment"># in Glance (defaults to a URL for a recent "cirros" image).</span></span><br><span class="line"><span class="comment">#CONFIG_PROVISION_IMAGE_URL=http://download.cirros-cloud.net/0.3.3/cirros-0.3.3-x86_64-disk.img</span></span><br><span class="line">CONFIG_PROVISION_IMAGE_URL=http://<span class="number">192.168</span>.<span class="number">1.100</span>/content/images/vdisk/cirros-<span class="number">0.3</span>.<span class="number">4</span>-x86_64-disk.img</span><br><span class="line"></span><br><span class="line"><span class="comment"># Format for the demo image (default "qcow2").</span></span><br><span class="line">CONFIG_PROVISION_IMAGE_FORMAT=qcow2</span><br><span class="line"></span><br><span class="line"><span class="comment"># User to use when connecting to instances booted from the demo</span></span><br><span class="line"><span class="comment"># image.</span></span><br><span class="line">CONFIG_PROVISION_IMAGE_SSH_USER=cirros</span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the Integration Test Suite provisioning user. If you do not</span></span><br><span class="line"><span class="comment"># provide a user name, Tempest is configured in a standalone mode.</span></span><br><span class="line">CONFIG_PROVISION_TEMPEST_USER=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for the Integration Test Suite provisioning user.</span></span><br><span class="line">CONFIG_PROVISION_TEMPEST_USER_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># CIDR network address for the floating IP subnet.</span></span><br><span class="line">CONFIG_PROVISION_TEMPEST_FLOATRANGE=<span class="number">172.24</span>.<span class="number">4.224</span>/<span class="number">28</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URI of the Integration Test Suite git repository.</span></span><br><span class="line">CONFIG_PROVISION_TEMPEST_REPO_URI=https://github.com/openstack/tempest.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># Revision (branch) of the Integration Test Suite git repository.</span></span><br><span class="line">CONFIG_PROVISION_TEMPEST_REPO_REVISION=master</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to configure the Open vSwitch external bridge for an</span></span><br><span class="line"><span class="comment"># all-in-one deployment (the L3 external bridge acts as the gateway</span></span><br><span class="line"><span class="comment"># for virtual machines) (y, n).</span></span><br><span class="line">CONFIG_PROVISION_ALL_IN_ONE_OVS_BRIDGE=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Data Processing (sahara) to access</span></span><br><span class="line"><span class="comment"># the database.</span></span><br><span class="line">CONFIG_SAHARA_DB_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Data Processing to authenticate with</span></span><br><span class="line"><span class="comment"># the Identity service.</span></span><br><span class="line">CONFIG_SAHARA_KS_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Secret key for signing Telemetry service (ceilometer) messages.</span></span><br><span class="line">CONFIG_CEILOMETER_SECRET=ee2d644e43ba41db</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for Telemetry to authenticate with the Identity</span></span><br><span class="line"><span class="comment"># service.</span></span><br><span class="line">CONFIG_CEILOMETER_KS_PW=<span class="number">85642</span>d5d273d4dab</span><br><span class="line"></span><br><span class="line"><span class="comment"># Backend driver for Telemetry's group membership coordination</span></span><br><span class="line"><span class="comment"># (redis, none).</span></span><br><span class="line">CONFIG_CEILOMETER_COORDINATION_BACKEND=redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP address of the server on which to install MongoDB.</span></span><br><span class="line">CONFIG_MONGODB_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># IP address of the server on which to install the Redis master</span></span><br><span class="line"><span class="comment"># server.</span></span><br><span class="line">CONFIG_REDIS_MASTER_HOST=<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Port on which the Redis server(s) listens.</span></span><br><span class="line">CONFIG_REDIS_PORT=<span class="number">6379</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify 'y' to have Redis try to use HA (y, n).</span></span><br><span class="line">CONFIG_REDIS_HA=n</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hosts on which to install Redis slaves.</span></span><br><span class="line">CONFIG_REDIS_SLAVE_HOSTS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hosts on which to install Redis sentinel servers.</span></span><br><span class="line">CONFIG_REDIS_SENTINEL_HOSTS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Host to configure as the Redis coordination sentinel.</span></span><br><span class="line">CONFIG_REDIS_SENTINEL_CONTACT_HOST=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Port on which Redis sentinel servers listen.</span></span><br><span class="line">CONFIG_REDIS_SENTINEL_PORT=<span class="number">26379</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Quorum value for Redis sentinel servers.</span></span><br><span class="line">CONFIG_REDIS_SENTINEL_QUORUM=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Name of the master server watched by the Redis sentinel (eg.</span></span><br><span class="line"><span class="comment"># master).</span></span><br><span class="line">CONFIG_REDIS_MASTER_NAME=mymaster</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Database-as-a-Service (trove) to</span></span><br><span class="line"><span class="comment"># access the database.</span></span><br><span class="line">CONFIG_TROVE_DB_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use for OpenStack Database-as-a-Service to authenticate</span></span><br><span class="line"><span class="comment"># with the Identity service.</span></span><br><span class="line">CONFIG_TROVE_KS_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># User name to use when OpenStack Database-as-a-Service connects to</span></span><br><span class="line"><span class="comment"># the Compute service.</span></span><br><span class="line">CONFIG_TROVE_NOVA_USER=trove</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tenant to use when OpenStack Database-as-a-Service connects to the</span></span><br><span class="line"><span class="comment"># Compute service.</span></span><br><span class="line">CONFIG_TROVE_NOVA_TENANT=services</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password to use when OpenStack Database-as-a-Service connects to</span></span><br><span class="line"><span class="comment"># the Compute service.</span></span><br><span class="line">CONFIG_TROVE_NOVA_PW=PW_PLACEHOLDER</span><br><span class="line"></span><br><span class="line"><span class="comment"># Password of the nagiosadmin user on the Nagios server.</span></span><br><span class="line">CONFIG_NAGIOS_PW=<span class="number">7</span>ba4e6253b3742c1</span><br></pre></td></tr></table></figure>
<h2 id="OpenStack测试">OpenStack测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment">#Preinstallation</span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用豆瓣python源</span></span><br><span class="line">mkdir /root/.pip</span><br><span class="line">cat &gt; /root/.pip/pip.conf &lt;&lt;EOF</span><br><span class="line">[global]</span><br><span class="line">index-url = http://pypi.douban.com/simple/</span><br><span class="line">[install]</span><br><span class="line">trusted-host = pypi.douban.com</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">easy_install pip</span><br><span class="line"><span class="comment">#pbr need &gt;=1.6</span></span><br><span class="line">pip list | grep pbr  </span><br><span class="line">pip uninstall pbr </span><br><span class="line">pip install pbr</span><br><span class="line"></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment">#Tempest Installation</span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Tempest Installation</span></span><br><span class="line">yum install git gcc libxslt-devel openssl-devel libffi-devel python-devel python-pip python-virtualenv -y</span><br><span class="line"><span class="comment"># git clone https://github.com/openstack/tempest.git</span></span><br><span class="line"><span class="comment"># pip install tempest/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root/pip-<span class="number">1.5</span>.<span class="number">5</span></span><br><span class="line">python setup.py install</span><br><span class="line"></span><br><span class="line">pip install tempest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@node-<span class="number">1</span> ~(admin)]<span class="comment"># glance image-list</span></span><br><span class="line">+--------------------------------------+--------------+</span><br><span class="line">| ID                                   | Name         |</span><br><span class="line">+--------------------------------------+--------------+</span><br><span class="line">| <span class="number">6</span>bbafd22-<span class="number">6791</span>-<span class="number">4</span>a9d-<span class="number">8240</span>-<span class="number">355</span>a64f8a5c1 | cirros-in-fs |</span><br><span class="line">+--------------------------------------+--------------+</span><br><span class="line"></span><br><span class="line">[root@node-<span class="number">1</span> ~(admin)]<span class="comment"># neutron net-list</span></span><br><span class="line">+--------------------------------------+---------+-------------------------------------------------------+</span><br><span class="line">| id                                   | name    | subnets                                               |</span><br><span class="line">+--------------------------------------+---------+-------------------------------------------------------+</span><br><span class="line">| <span class="number">9</span>f2a7cc6-<span class="number">6495</span>-<span class="number">4105</span><span class="operator">-a</span>797-<span class="number">6</span>f99d943f406 | private | c4ebe773-<span class="number">1685</span>-<span class="number">445</span>b-b4f3-<span class="number">1</span>c71004da4de <span class="number">192.168</span>.<span class="number">100.0</span>/<span class="number">24</span> |</span><br><span class="line">| <span class="number">987</span>d51e4-<span class="number">28</span>f9-<span class="number">4861</span>-<span class="number">8020</span>-fc455916f441 | public  | cbb688ab-<span class="number">61</span>ce-<span class="number">4</span>b44-<span class="number">92</span><span class="built_in">fc</span>-<span class="number">7</span>b3d0ffee5e7 <span class="number">10.30</span>.<span class="number">0.0</span>/<span class="number">24</span>     |</span><br><span class="line">+--------------------------------------+---------+-------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">[root@node-<span class="number">1</span> ~(admin)]<span class="comment"># openstack user list</span></span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">| ID                               | Name    |</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line">| <span class="number">3</span>a90eefdd4af4f64b2b55e5787c8b480 | nova    |</span><br><span class="line">| <span class="number">81</span>fda8223f424eacb358b9ecf30d8514 | demo    |</span><br><span class="line">| afc0c39b498044a6b012ca85e1a82e3e | cinder  |</span><br><span class="line">| c66ab63dac7142438383f880ceae77e3 | neutron |</span><br><span class="line">| de0c3f0303394b3e8d127119721e7f6b | admin   |</span><br><span class="line">| e6a433779b8749d689e4f8d47026028c | glance  |</span><br><span class="line">+----------------------------------+---------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑tempest</span></span><br><span class="line">vi /etc/tempest.conf</span><br><span class="line"></span><br><span class="line">[DEFAULT]</span><br><span class="line"><span class="built_in">log</span>_file = tempest.log</span><br><span class="line">[alarming]</span><br><span class="line">[auth]</span><br><span class="line">tempest_roles = _member_ = user</span><br><span class="line">create_isolated_networks = <span class="literal">false</span></span><br><span class="line">admin_username =  admin</span><br><span class="line">admin_tenant_name = admin</span><br><span class="line">admin_password = redhat</span><br><span class="line">[baremetal]</span><br><span class="line">driver_enabled = <span class="literal">false</span></span><br><span class="line">[compute]</span><br><span class="line">image_ref = <span class="number">6</span>bbafd22-<span class="number">6791</span>-<span class="number">4</span>a9d-<span class="number">8240</span>-<span class="number">355</span>a64f8a5c1</span><br><span class="line">image_ref_alt = <span class="number">6</span>bbafd22-<span class="number">6791</span>-<span class="number">4</span>a9d-<span class="number">8240</span>-<span class="number">355</span>a64f8a5c1</span><br><span class="line">flavor_ref = <span class="number">1</span></span><br><span class="line">flavor_ref_alt = <span class="number">2</span></span><br><span class="line">fixed_network_name = private</span><br><span class="line">region = RegionOne </span><br><span class="line">shelved_offload_time = <span class="number">0</span></span><br><span class="line">min_compute_nodes = <span class="number">2</span></span><br><span class="line">[compute-feature-enabled]</span><br><span class="line">console_output = <span class="literal">false</span></span><br><span class="line">shelve = <span class="literal">false</span></span><br><span class="line">rescue = <span class="literal">false</span></span><br><span class="line">personality = <span class="literal">false</span></span><br><span class="line">preserve_ports = <span class="literal">true</span></span><br><span class="line">attach_encrypted_volume = <span class="literal">false</span></span><br><span class="line">[dashboard]</span><br><span class="line">dashboard_url = http://<span class="number">10.30</span>.<span class="number">0.10</span></span><br><span class="line">login_url = http://<span class="number">10.30</span>.<span class="number">0.10</span>/dashboard/auth/login</span><br><span class="line">[data-processing]</span><br><span class="line">[data-processing-feature-enabled]</span><br><span class="line">[database]</span><br><span class="line">[debug]</span><br><span class="line">[identity]</span><br><span class="line">catalog_<span class="built_in">type</span> = identity</span><br><span class="line">uri = http://<span class="number">10.30</span>.<span class="number">0.10</span>:<span class="number">5000</span>/v2.<span class="number">0</span>/</span><br><span class="line">auth_version = v2</span><br><span class="line">region = RegionOne</span><br><span class="line">v2_admin_endpoint_<span class="built_in">type</span> = adminURL</span><br><span class="line">v2_public_endpoint_<span class="built_in">type</span> = publicURL</span><br><span class="line">username = admin</span><br><span class="line">tenant_name = admin</span><br><span class="line">admin_role = admin</span><br><span class="line">password = redhat</span><br><span class="line">[identity-feature-enabled]</span><br><span class="line">api_v3 = <span class="literal">false</span></span><br><span class="line">[image]</span><br><span class="line">catalog_<span class="built_in">type</span> = image</span><br><span class="line">region = RegionOne </span><br><span class="line">endpoint_<span class="built_in">type</span> = publicURL</span><br><span class="line">[image-feature-enabled]</span><br><span class="line">api_v2 = <span class="literal">true</span></span><br><span class="line">api_v1 = <span class="literal">false</span></span><br><span class="line">[input-scenario]</span><br><span class="line">[messaging]</span><br><span class="line">[negative]</span><br><span class="line">[network]</span><br><span class="line">catalog_<span class="built_in">type</span> = network</span><br><span class="line">region = RegionOne</span><br><span class="line">endpoint_<span class="built_in">type</span> = publicURL</span><br><span class="line">tenant_network_cidr = <span class="number">192.168</span>.<span class="number">100.0</span>/<span class="number">24</span></span><br><span class="line">tenant_network_mask_bits = <span class="number">28</span></span><br><span class="line">tenant_networks_reachable = <span class="literal">false</span></span><br><span class="line">public_network_id = <span class="number">987</span>d51e4-<span class="number">28</span>f9-<span class="number">4861</span>-<span class="number">8020</span>-fc455916f441</span><br><span class="line">floating_network_name = public</span><br><span class="line">dns_servers = <span class="number">8.8</span>.<span class="number">8.8</span>,<span class="number">8.8</span>.<span class="number">4.4</span></span><br><span class="line">default_network = <span class="number">192.168</span>.<span class="number">100.0</span>/<span class="number">24</span></span><br><span class="line">[network-feature-enabled]</span><br><span class="line">[object-storage]</span><br><span class="line">[object-storage-feature-enabled]</span><br><span class="line">[orchestration]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line"><span class="built_in">disable</span>_process_locking = <span class="literal">false</span></span><br><span class="line">lock_path =  /var/lib/nova/tmp</span><br><span class="line">[scenario]</span><br><span class="line">img_dir = /var/lib/glance/images/cirros-<span class="number">0.3</span>.<span class="number">1</span>-x86_64-uec</span><br><span class="line">img_file = cirros-<span class="number">0.3</span>.<span class="number">1</span>-x86_64-disk.img</span><br><span class="line">img_disk_format = qcow2</span><br><span class="line">img_container_format = bare</span><br><span class="line">[service_available]</span><br><span class="line">cinder = <span class="literal">false</span></span><br><span class="line">neutron = <span class="literal">true</span></span><br><span class="line">glance = <span class="literal">true</span></span><br><span class="line">swift = <span class="literal">false</span></span><br><span class="line">nova = <span class="literal">true</span></span><br><span class="line">heat = <span class="literal">false</span></span><br><span class="line">ceilometer = <span class="literal">false</span></span><br><span class="line">aodh = <span class="literal">false</span></span><br><span class="line">horizon = <span class="literal">true</span></span><br><span class="line">sahara = <span class="literal">false</span></span><br><span class="line">ironic = <span class="literal">false</span></span><br><span class="line">trove = <span class="literal">false</span></span><br><span class="line">zaqar = <span class="literal">false</span></span><br><span class="line">[stress]</span><br><span class="line">[telemetry]</span><br><span class="line">[telemetry-feature-enabled]</span><br><span class="line">[validation]</span><br><span class="line">security_group = <span class="literal">true</span></span><br><span class="line">security_group_rules = <span class="literal">true</span></span><br><span class="line">connect_method = floating</span><br><span class="line">auth_method = keypair</span><br><span class="line">image_ssh_user = cirros</span><br><span class="line">image_ssh_password = <span class="string">"cubswin:)"</span></span><br><span class="line">floating_ip_range = <span class="number">10.30</span>.<span class="number">0.0</span>/<span class="number">24</span></span><br><span class="line">network_<span class="keyword">for</span>_ssh = public</span><br><span class="line">[volume]</span><br><span class="line">build_interval = <span class="number">3</span></span><br><span class="line">catalog_<span class="built_in">type</span> = volume</span><br><span class="line">region = RegionOne </span><br><span class="line">endpoint_<span class="built_in">type</span> = publicURL</span><br><span class="line">backend1_name = lvm</span><br><span class="line">backend2_name = ceph</span><br><span class="line">backend_names = lvm,ceph</span><br><span class="line">[volume-feature-enabled]</span><br><span class="line">multi_backend = <span class="literal">true</span></span><br><span class="line">backup = <span class="literal">true</span></span><br><span class="line">api_v1 = <span class="literal">true</span></span><br><span class="line">api_v2 = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#验证</span></span><br><span class="line">verify-tempest-config</span><br><span class="line">./run_tempest.sh</span><br><span class="line">nosetests tempest/api/identity/admin/v2/<span class="built_in">test</span>_services.py  --with-xunit  --xunit-file=/root/keystone_<span class="built_in">test</span>_services.xml --with-xunit --xunit-file</span><br><span class="line">nosetests tempest.api.compute.flavors.test_flavors.py:FlavorsTestJSON</span><br><span class="line">nosetests tempest.api.compute.flavors.test_flavors.py:FlavorsTestJSON.test_list_flavors</span><br><span class="line"></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"><span class="comment">#Rally Installation</span></span><br><span class="line"><span class="comment">#===========================================================</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/stackforge/rally.git &amp;&amp; <span class="built_in">cd</span> rally</span><br><span class="line">./install_rally.sh -v</span><br><span class="line">rally-manage db recreate</span><br><span class="line"><span class="built_in">source</span> admin-openrc.sh</span><br><span class="line">rally deployment create --fromenv --name=existing</span><br><span class="line">rally deployment check</span><br><span class="line">cp samples/tasks/scenarios/keystone/create-and-delete-user.json .</span><br><span class="line">cat create-and-delete-user.json </span><br><span class="line">rally task start create-and-delete-user.json</span><br><span class="line"></span><br><span class="line"><span class="comment">#编辑页面</span></span><br><span class="line">vi /usr/lib/python2.<span class="number">7</span>/site-packages/rally/ui/templates/task/report.html </span><br><span class="line"></span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"http://192.168.1.100/content/ajax/libs/angularjs/1.3.3/angular.1.3.3.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">rally task report --out=report1.html --open</span><br><span class="line">cp samples/tasks/scenarios/glance/create-and-delete-image.json .</span><br><span class="line">rally task start  create-and-delete-image.json</span><br><span class="line">cp samples/tasks/scenarios/nova/boot-and-delete.json .</span><br><span class="line">rally task start boot-and-delete.json</span><br><span class="line">cp samples/tasks/scenarios/cinder/create-volume.json .</span><br><span class="line">rally task start create-volume.json</span><br><span class="line">cp samples/tasks/scenarios/vm/boot-runcommand-delete.json .</span><br><span class="line">rally task start  boot-runcommand-delete.json</span><br><span class="line">rally verify start --set identity</span><br></pre></td></tr></table></figure>
<h2 id="OpenStack开发">OpenStack开发</h2><ol>
<li>Horizon开发预备知识</li>
<li>简单案例</li>
<li>配置和权限</li>
<li>Horizon换新装</li>
<li>Horizon换交互</li>
<li>Horizon添加新模块</li>
<li>Horizon现有模块库举例</li>
<li>Horizon组件详解</li>
<li>Python库和JS库</li>
</ol>
<blockquote>
<p>Horizon定制</p>
</blockquote>
<ol>
<li>Python</li>
<li>Django</li>
<li>jQuery</li>
<li>OpenStack API</li>
<li>OpenStack组件开发</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[OpenStack是代替VMware私有云的最佳方案之一]]>
    
    </summary>
    
      <category term="学习 | Study" scheme="http://wsgzao.github.io/categories/%E5%AD%A6%E4%B9%A0-Study/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[GFW翻墙小结]]></title>
    <link href="http://wsgzao.github.io/post/fq/"/>
    <id>http://wsgzao.github.io/post/fq/</id>
    <published>2016-02-23T15:22:32.000Z</published>
    <updated>2016-02-23T02:22:03.771Z</updated>
    <content type="html"><![CDATA[<p><img src="http://i.v2ex.co/Ur503skA.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>政府无限的权力，都是大部分人自己放弃的。假货坑爹，让政府审核。孩子管不好，让政府关网吧。有人在微博骂我，让政府去删。房价太高，让政府去限购。我们的文化实在太独特，创造出了家长式威权政府，GFW 正是在这种背景下产生的，一个社会矛盾的终极调和器，最终生活不能自理的你每天做的每一件事情都要给政府审查一遍，以免伤害到其他同样生活不能自理的人。这是一个零和游戏，越和这样的用户打交道，越对未来持悲观态度，觉得 GFW 可能永远也不会消失，而墙内的这个局域网看起来还似乎生机勃勃的自成一体，真是让人绝望。</p>
<p>Via <a href="https://twitter.com/clowwindy" target="_blank" rel="external">@clowwindy</a> - <a href="https://www.v2ex.com/t/166417#reply121" target="_blank" rel="external">https://www.v2ex.com/t/166417#reply121</a></p>
<hr>
<h2 id="更新记录">更新记录</h2><p>2016年02月23日 - 增加Surge，感谢@刘亚晨<br>2016年01月08日 - 增加首选免费方案XX-Net，更新付费方案土行孙<br>2015年12月23日 - 尊重@东哥的要求，移除XXX<br>2015年11月28日 - 更新XXX和土行孙付费方案<br>2015年10月11日 - 移除fqrouter和红杏，增加shadowsocks-android和GreenVPN<br>2015年08月31日 - Thanks @clowwindy &amp; @breakwa11, and all of the contributor of the shadowsocks.<br>2015年08月11日 - 移除GoAgentX，感谢@ohdarling<br>2015年08月06日 - 移除曲径，感谢两位前盛大创新院朋友做出的贡献，尊重你们的决定<br>2015年05月22日 - 移除所有Goagent项目，增加赛风/红杏/Shadowsocks免费账号<br>2015年03月08日 - fqrouter复活，新增免费方案百度浏览器<br>2015年02月07日 - 修改细节描述，避免误导大家<br>2015年02月03日 - 更换网址为f(翻)q(墙)，感谢fqrouter作者做出的贡献<br>2014年11月30日 - 完善内容，标注自用首选免费和付费翻墙方案<br>2014年08月24日 - 新增免费方案GoAgent+，付费方案商业版Shadowsocks<br>2014年06月15日 - 新增Buckyball浏览器，父亲节快乐<br>2014年06月13日 - 补充Mac/iOS方案<br>2014年06月12日 - 撰写初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/fq/" target="_blank" rel="external">http://wsgzao.github.io/post/fq/</a></p>
<p>扩展阅读</p>
<ul>
<li>Contributors - <a href="http://shadowsocks.org/en/about/contributors.html" target="_blank" rel="external">http://shadowsocks.org/en/about/contributors.html</a></li>
<li>科学上网利器 Shadowsocks 使用方法 - <a href="http://ttt.tt/150/" target="_blank" rel="external">http://ttt.tt/150/</a></li>
</ul>
<hr>
<h2 id="简单验证是否被墙">简单验证是否被墙</h2><blockquote>
<p>如果你不能访问以下网址，那恭喜你生活在墙的有效保护区内，关键字智能屏蔽效果如下</p>
</blockquote>
<p><a href="http://wsgzao.github.io/post/gfw-break/" target="_blank" rel="external">http://wsgzao.github.io/post/gfw-break/</a></p>
<hr>
<h2 id="免费方案">免费方案</h2><blockquote>
<p>各个平台的解决方案都不唯一，请认真阅读原文中的说明部分</p>
</blockquote>
<h3 id="XX-Net">XX-Net</h3><blockquote>
<p>接力GoAgent翻墙工具——Anti-censor tools</p>
</blockquote>
<ul>
<li>【首选】GAE proxy, 稳定、易用、快速</li>
<li>用过GoAgent的朋友应该还有印象吧</li>
</ul>
<p><a href="https://github.com/XX-net/XX-Net" target="_blank" rel="external">https://github.com/XX-net/XX-Net</a></p>
<h3 id="百度浏览器">百度浏览器</h3><blockquote>
<p>你这么大摇大摆提供翻墙插件，真不用担心360菊(jǔ)爆(bào)吗？</p>
</blockquote>
<ul>
<li>看到百度浏览器团队介绍的最后一句话我才明白QQ浏览器为何扶不起</li>
<li>UC浏览器翻墙效果不佳还要背负面临政策风险，所以就不直接推荐了</li>
<li>还有很多通过自行编译或与Chrome/Firefox整合的翻墙方式也不再列举，比如Lantern</li>
</ul>
<p><a href="http://liulanqi.baidu.com/about.html" target="_blank" rel="external">http://liulanqi.baidu.com/about.html</a></p>
<h3 id="Shadowsocks">Shadowsocks</h3><blockquote>
<p>@breakwa11, be careful and stay out of trouble</p>
</blockquote>
<p><a href="https://github.com/breakwa11/shadowsocks-rss" target="_blank" rel="external">https://github.com/breakwa11/shadowsocks-rss</a></p>
<h3 id="Shadowsocks_免费账号">Shadowsocks 免费账号</h3><blockquote>
<p>感谢ishadowsocks团队分享</p>
</blockquote>
<p><a href="http://www.ishadowsocks.com/" target="_blank" rel="external">http://www.ishadowsocks.com/</a></p>
<h3 id="shadowsocks-android">shadowsocks-android</h3><blockquote>
<p>A Shadowsocks client for Android</p>
</blockquote>
<ul>
<li>【首选】Android翻墙方案</li>
</ul>
<p><a href="http://www.zdfans.com/5074.html" target="_blank" rel="external">http://www.zdfans.com/5074.html</a></p>
<h3 id="赛风">赛风</h3><blockquote>
<p>作为免费翻墙的一种备用方案吧</p>
</blockquote>
<p><a href="http://www.zdfans.com/4114.html" target="_blank" rel="external">http://www.zdfans.com/4114.html</a></p>
<h3 id="OS_X">OS X</h3><blockquote>
<p>Shadowsocks GUI designed for OS X 10.8+, automatically configuring system proxy settings, with a GFWList PAC.</p>
</blockquote>
<ul>
<li>【首选】OS X翻墙方案</li>
</ul>
<p><a href="https://github.com/shadowsocks/shadowsocks-iOS/releases" target="_blank" rel="external">https://github.com/shadowsocks/shadowsocks-iOS/releases</a></p>
<h3 id="iOS">iOS</h3><blockquote>
<p>Surge is a web developer tool and proxy utility for iOS 9</p>
</blockquote>
<ul>
<li>【首选】iOS翻墙方案</li>
<li>iOS 9以上版本Surge或许是你的最佳选择之一</li>
</ul>
<p><a href="http://yach.me/" target="_blank" rel="external">http://yach.me/</a></p>
<h3 id="Windows_Phone">Windows Phone</h3><ul>
<li>暂无直接免费方案，建议使用类似Shadowsocks的<code>Share over LAN</code>功能设置局域网代理</li>
</ul>
<hr>
<h2 id="付费方案">付费方案</h2><blockquote>
<p>请根据自身实际需求，睁大眼睛认真阅读各类网站说明后做出合理的选择</p>
</blockquote>
<h3 id="Shadowsocks商业版">Shadowsocks商业版</h3><blockquote>
<p>轻量级科学上网姿势，改变您的生活体验</p>
</blockquote>
<ul>
<li>【首选】由<a href="http://ttt.tt/about/" target="_blank" rel="external">@Showfom</a>运营</li>
<li>我已经在第一时间入坑高级版至2018年</li>
<li>信任.Trust，以下是我的推荐链接</li>
</ul>
<p><a href="https://portal.shadowsocks.com/aff.php?aff=043" target="_blank" rel="external">https://portal.shadowsocks.com/aff.php?aff=043</a></p>
<h3 id="GreenVPN">GreenVPN</h3><blockquote>
<p>GreenVPN冒牌很多，大家多小心吧</p>
</blockquote>
<p><a href="http://gjsq.me/1438224" target="_blank" rel="external">http://gjsq.me/1438224</a></p>
<h3 id="土行孙">土行孙</h3><blockquote>
<p>如果你体验过曲径的优质服务，那么土行孙也许是你新的选择</p>
</blockquote>
<ul>
<li>因为土行孙域名有时在国内无法访问会变化，使用邀请链接做为跳板来解决实属无奈之举，没有利益相关</li>
</ul>
<p><a href="http://itxs.co/s/14ff19gw" target="_blank" rel="external">http://itxs.co/s/14ff19gw</a></p>
]]></content>
    <summary type="html">
    <![CDATA[介绍简单可信赖的翻墙方案]]>
    
    </summary>
    
      <category term="软件 | Soft" scheme="http://wsgzao.github.io/categories/%E8%BD%AF%E4%BB%B6-Soft/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[熊本熊是如何成为风靡全球的吉祥物「网红」的？]]></title>
    <link href="http://wsgzao.github.io/post/kumamon/"/>
    <id>http://wsgzao.github.io/post/kumamon/</id>
    <published>2016-02-18T07:31:24.000Z</published>
    <updated>2016-02-19T01:47:46.869Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>本文为 <a href="http://socialbeta.com/t/how-kumamon-become-the-most-popular-bear" target="_blank" rel="external">SocialBeta</a> 作者 <a href="http://socialbeta.com/t/how-kumamon-become-the-most-popular-bear" target="_blank" rel="external">信河田</a> 原创作品，转载请注明 SocialBeta 链接和作者。</p>
<blockquote>
<p>如果要问大家 2015 年最火的吉祥物是什么，相信很多人的答案会是熊本熊！</p>
</blockquote>
<hr>
<h2 id="更新历史">更新历史</h2><p>2016年02月18日 - 转载初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/kumamon/" target="_blank" rel="external">http://wsgzao.github.io/post/kumamon/</a></p>
<hr>
<p><strong>如果要问大家 2015 年最火的吉祥物是什么，相信很多人的答案会是熊！本！熊！</strong></p>
<p>这只行动笨拙、内心贱萌、自带两坨腮红的萌物在近两年迅速风靡全世界，成为年轻人的心头好。如今，熊本熊的火热程度甚至超过萌物界的前辈 Hello Kitty 和哆啦 A 梦。这家伙不仅有自己专属的本田小摩托，还有专属 Mini。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788531.jpg" alt=""></p>
<p><img src="http://img.socialbeta.com/upload/10-1452788533.jpg" alt=""></p>
<p>甚至还有专属的徕卡相机。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788534.jpg" alt=""></p>
<p>俨然一副「熊」生赢家的样子。</p>
<p>然而你知道他是如何一步步走到这个「熊」生巅峰的吗？今天我们就来一探究竟。</p>
<h2 id="缘起九州新干线">缘起九州新干线</h2><p>熊本熊，大家都知道是来自熊本县的地方吉祥物。但要说到熊本县……别说我们了，就是日本人也只能模糊地说出它在九州岛上，有哪些特产和值得一看的景点则完全不知。所以，至少在熊本熊诞生之前，熊本县的知名度在日本国内都可以说是非常低的。</p>
<p>然而，机会总还是来了。2011 年，贯通整个九州的新干线将全线开通。这意味着临县，乃至大阪等关西地区的旅客可以更便捷地来到九州观光旅行。县政府看准这个千载难逢的机遇，有意做一些特殊的地方推广活动，吸引旅客在熊本站下车。</p>
<h2 id="高瞻远瞩的设计团队">高瞻远瞩的设计团队</h2><p>一开始，县政府找来了本县出身的知名作家小山薰堂来构想这个视觉元素，他转而找到了自己的好友——著名设计师水野学。两人最初想以「熊本惊喜」的概念制作一个 Logo，但随后水野学希望能以一个更加吸引人的方式推广这个概念，小山薰堂表示赞同。于是他们在 Logo 之外又提出了被称为「Kumamon」的熊形地方吉祥物。这个名字结合了「熊本」（Kumamoto）与熊本方言「人」（Mon）的发音，意为「熊本人」，明确了「熊本熊」出自「熊本县」的概念。</p>
<p>虽然县政府对吉祥物的提案有些犹豫，但县知事（县长）蒲岛郁夫还是果断地接受了这一建议。于是，水野学带领自己的 good design company 工作室开始了熊本熊的形象设计。为了突出本县特色，水野学以熊本城的主色调黑色与萌系形象经常采用的两颊腮红（红色也蕴含了熊本县「火之国」的称号。）为基础，创作出了数千种形象组合，最后在其中选出了如今看到的呆萌呆萌的<a href="http://gooddesigncompany.com/works/kumamon" target="_blank" rel="external">熊本熊形象</a>。</p>
<p><img src="http://img.socialbeta.com/upload/10-1453270260.jpg" alt=""></p>
<p>吉祥物终究是要人来扮演的，然而出炉的第一代熊本熊皮套却长相怪异，看了可能会让人做噩梦。于是，小山薰堂赶紧找到了专制吉祥物皮套的大厂<span class="Apple-converted-space"> </span><a href="http://www.kigurumi.biz/" target="_blank" rel="external">Kigurumi.biz</a>，委托他们改进皮套，因此有了第二代皮套。而如今我们看到的是更加肥大呆萌的第三代皮套。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788535.jpg" alt=""></p>
<p>配合外貌，以小山薰堂为首的策划团队也为熊本熊定好了时下人见人爱的「呆萌」和「贱萌」的性格。</p>
<p>到此为止，水野学和小山薰堂显然已经做好了自己的本职工作。但毕竟是为了更好地推广和宣传熊本县的形象，水野学之后又提出了以不收授权费的方式推广熊本熊的建议。只要通过县政府审核，证明商品有助于熊本的宣传，商家就可以使用熊本熊的形象。从诞生的 2010 年 3 月 5 日起，熊本熊呆萌的形象就逐渐出现在熊本县出产的商品中（毕竟是农业大县，土特产农产品根本不缺）。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788543.jpg" alt=""></p>
<p>随着曝光度的增加，熊本熊的知名度开始打响。不过此时，熊本熊的知名度也仅限于熊本和九州，要想让全日本都认识这只熊，就得靠经纪公司——县政府的支持了。</p>
<h2 id="与熊本熊一起疯的县政府">与熊本熊一起疯的县政府</h2><p>明星要想红，除了自身要具备出色的条件外，经纪公司的大力培养也是不可或缺的因素。虽然前文提到县政府一开始对吉祥物的提案兴趣寥寥，不过在熊本熊正式诞生后，县政府还是启动了相应的营销计划，先后开通 Facebook 主页和 Twitter 账号，并为其申请到相应的宣传预算。相对于当时日本绝大多数的地方吉祥物来说，这已经是最高级别的待遇了。</p>
<p>一切准备就绪，县政府开始了与熊本熊一起疯的营销计划。首先，县政府聘任熊本熊为临时公务员，接着县知事（县长）蒲岛郁夫将「在大阪分发一万张名片，提升熊本县知名度」的任务交给了它。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788544.jpg" alt=""></p>
<p>不过在大阪出差途中，被大都市的魅力所迷住，熊本熊竟然下落不明。蒲岛知事为此紧急召开记者发布会，希望有知道熊本熊消息的人通过 Twitter 告知县政府。（你们县政府真会玩……）</p>
<iframe frameborder="0" width="640" height="498" src="http://v.qq.com/iframe/player.html?vid=t0181sebzuo&amp;tiny=0&amp;auto=0" allowfullscreen></iframe>

<p>这里要提一下名片上的内容，也是有些无厘头，比如「希望变得越来越有名，有名到有假货来冒充」、「其实我很敏捷」等，看了让人忍俊不禁，加深了对它「呆萌」的印象。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788545.jpg" alt=""></p>
<p>一年以后，随着一系列宣传上的成功，熊本熊被蒲岛知事正式任命为熊本县营业部长，该职位在县政府内部仅次于知事与副知事，且直接听命于蒲岛知事，体现了县政府对熊本熊的重视。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788553.jpg" alt=""></p>
<p>2013 年 11 月，县政府又开始了一次精妙的全民营销活动。这次，熊本熊遗失了自己两颊的腮红。没了腮红，那就只是普通的熊了，「火之国」的内涵也没了。县政府认为此事件非常严重，蒲岛知事再次紧急召开新闻发布会，表示县政府已成立调查组专门调查此事，并号召大家帮熊本熊找回腮红，熊本熊也跑到东京警视厅报了案。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788550.jpg" alt=""></p>
<p>县政府还在各地张贴「寻腮红启事」，甚至通过电视台发出这一启事，希望大家提供线索。其实县政府是希望通过这一事件，让外界了解「红色」对于熊本县的重要性。它不仅代表了熊本县的火山地理，更代表了众多美味的红色食物。事后有日本媒体表示，这次事件达成了 6 亿日元（约合 3360 万人民币）的广告营销成果。</p>
<iframe frameborder="0" width="640" height="498" src="http://v.qq.com/iframe/player.html?vid=o018000zngm&amp;tiny=0&amp;auto=0" allowfullscreen align=""></iframe>

<p>除了这些县政府亲自参与的推广活动之外，策划团队还很好地利用了 Facebook 和 Twitter 等社交媒体，通过它们发布熊本熊的行程，并且在每一条新消息的最后，都会加上熊本熊的语气词「mon」。</p>
<p>策划团队还会借势热点进行营销。比如冰桶挑战期间，熊本熊就被人点名参加。而他参加冰桶挑战时的反应也是非常搞笑。这些营销策略都让熊本熊极大地增加了知名度和影响力。</p>
<iframe frameborder="0" width="640" height="498" src="http://v.qq.com/iframe/player.html?vid=r0180343hpq&amp;tiny=0&amp;auto=0" allowfullscreen></iframe>

<h2 id="投入的熊本熊扮演者">投入的熊本熊扮演者</h2><p>最后还要谈一下藏在熊本熊厚大皮套里的演员。无论是一开始县政府工作人员客串，还是之后邀请专业的皮套演员进行骑车蹦极等高难度动作，他们都非常卖力地展现出了熊本熊「呆萌」和「贱萌」的性格，更让人们感受到了「熊本熊是活生生存在的」。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452790248.gif" alt=""></p>
<p><span style="color: rgb(127, 127, 127);">捣麻糬掉手套</span></p>
<p><img src="http://img.socialbeta.com/upload/10-1452790240.gif" alt=""></p>
<p><span style="color: rgb(127, 127, 127);">从新干线列车上摔下</span></p>
<p><img src="http://img.socialbeta.com/upload/10-1452790230.gif" alt=""></p>
<p><span style="color: rgb(127, 127, 127);">烧菜起火受惊吓</span></p>
<p><span style="color: rgb(127, 127, 127);"><img src="http://img.socialbeta.com/upload/10-1452790223.gif" alt=""></span></p>
<p><span style="color: rgb(127, 127, 127);">掀女生裙子</span></p>
<p><span style="color: rgb(127, 127, 127);"><img src="http://img.socialbeta.com/upload/10-1452790981.gif" alt=""></span></p>
<p><span style="color: rgb(127, 127, 127);">殴打其他地方吉祥物（少儿不宜）</span></p>
<p><span style="color: rgb(127, 127, 127);"><img src="http://img.socialbeta.com/upload/10-1452873260.gif" alt=""></span></p>
<p><span style="color: rgb(127, 127, 127);">会潇洒地骑着自己的小摩托</span></p>
<p><span style="color: rgb(127, 127, 127);"><img src="http://img.socialbeta.com/upload/10-1452873251.gif" alt=""></span></p>
<p><span style="color: rgb(127, 127, 127);">偶尔还会挑战下极限</span></p>
<p>这其中最有名的一次表演是在参加 2014 年红白歌会时，在后台与另一位地方吉祥物船梨精大打出手，场面之「混乱」连主持人都劝不住。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452789881.gif" alt=""></p>
<p>如今的熊本熊早已红透半边天。到国外出访、在天皇与皇后面前大跳体操舞、被印在各种大牌商品上、参加时装周走秀、参演歌舞伎等，在熊本熊身体力行的宣传下，熊本县的知名度也有了极大的提升。2013 年 4 月，日本地方经济综合研究所的<a href="http://www.dik.or.jp/?action=cabinet2_action_main_download&amp;block_id=235&amp;room_id=1&amp;cabinet2_id=17&amp;file_id=205&amp;upload_id=384" target="_blank" rel="external">调查</a>显示，九州、关西和首都圈地区的居民对熊本县的印象分别从 2011 年的第 6 位、第 6 位和第 7 位，上升至第 2  位、第 3 位和第 5 位。此外，民众前往熊本县观光旅游的意愿也有大幅提升。申请授权的商品从 2011 年的 3600 件，升至如今的 20000 件。根据日本银行的计算，熊本熊出道的头两年（2011 年至 2013 年），它就为熊本县带来了 1244 亿日元的经济收益（约 76.3 亿人民币）。</p>
<h2 id="熊本熊的成功启示">熊本熊的成功启示</h2><p>熊本熊的成功，是吉祥物创作者与地方政府，以及幕后工作人员亲密配合的完美成果。设计师从 Logo 到吉祥物的奇思妙想，再到提出极富远见的营销建议，县政府都没有唱反调，反倒支持这种创新。而县政府在熊本熊的营销活动中，也一改以往一贯严肃的政府形象，变得亲民且幽默。蒲岛郁夫知事甚至为此出书，详细阐述了熊本熊营销成功的心得。而浓缩为书中的一句话就是「提拔吉祥物做营业部长，这是勇于『打破盘子』的创新精神」。</p>
<p><img src="http://img.socialbeta.com/upload/10-1452788552.jpg" alt=""><strong> </strong></p>
]]></content>
    <summary type="html">
    <![CDATA[如果要问大家 2015 年最火的吉祥物是什么，相信很多人的答案会是熊本熊！]]>
    
    </summary>
    
      <category term="生活 | Life" scheme="http://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[思考枕ThinkPillow体验评测小结]]></title>
    <link href="http://wsgzao.github.io/post/thinkpillow/"/>
    <id>http://wsgzao.github.io/post/thinkpillow/</id>
    <published>2016-02-02T13:30:32.000Z</published>
    <updated>2016-02-02T14:24:03.000Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/868XHd5s.jpeg" alt=""></p>
<h2 id="前言">前言</h2><p>虽然我目前没有颈椎问题，但我看到父母可能会因为枕头打鼾甚至影响颈椎。本着负责任的精神以及3年的<code>记忆枕</code>经验，配合每去一次MUJI必定乱摸和睡遍床上用品的经历，果断入手了思考枕ThinkPillow第2代，软硬高度可调节，保护颈椎，预防打鼾的设计理念，作为“淘宝众筹”设计类第一名我觉得在实至名归，评价就一个字<code>值</code>。</p>
<blockquote>
<p>人的一生有三分之一时间在睡眠中度过，为什么不让自己睡得好点呢？</p>
</blockquote>
<hr>
<h2 id="更新记录">更新记录</h2><p>2016年02月02日 - 初稿</p>
<p>阅读原文 - <a href="http://wsgzao.github.io/post/thinkpillow/" target="_blank" rel="external">http://wsgzao.github.io/post/thinkpillow/</a></p>
<p>扩展阅读</p>
<ul>
<li>枕頭推薦 - <a href="http://www.muji.tw/mujilife/pillow/" target="_blank" rel="external">http://www.muji.tw/mujilife/pillow/</a></li>
</ul>
<hr>
<h2 id="购买记录">购买记录</h2><blockquote>
<p>淘宝众筹，长时间的耐心等待也是必须哒</p>
</blockquote>
<p>思考枕2代，全球第二款高度可调节枕头，极致睡眠体验 - <a href="https://izhongchou.taobao.com/dreamdetail.htm?id=10046658" target="_blank" rel="external">https://izhongchou.taobao.com/dreamdetail.htm?id=10046658</a></p>
<p>付款时间：2015-10-18 22:07:35<br>到货时间：2016-01-28 00:40:35</p>
<h2 id="产品介绍">产品介绍</h2><blockquote>
<p>引用官方的话吧，具体信息看众筹链接</p>
</blockquote>
<p>非常感谢近万名热心网友对我们的大力支持是你们改变了人类的睡眠方式！世界因为有你们而变地更加精彩！</p>
<p>爱思考的设计团队历时近三年时间倾力打造出前后两代思考枕，去年我们发起了第一代考枕众筹舌动，反响巨大，与其说是一次众人筹款，倒不如说是一次对旧事物进行创新改造的运动，前后有超过四千人多人参与在后来通过几百通的电话回访，几百份的邮件，几百个真实客户的评论，我们得到了很多有价值的客户反馈，让我们拥有了改进思考枕的信心，经过6个多月的研发，我们终于做出了更佳舒适的思考枕二代。</p>
<p>考枕完全是中国创新团队的原创设计，不同于一般的众筹项目国外有样板，国内改版山寨。在这个浮躁的年代，条件反射式地山寨抄袭，急于求成，人们已不屑于考甚至慢慢丧失了思考能力。而思考枕的诞生是源于我们对日常问题的深度思考是源于我们对创新执着追求是源于我们对美好生舌的热爱更是代表着一种不安于现状勇于打破常规的开创精神。思考枕绝对可以算的上是中国众筹史上里程碑式的项目因为它代表着一股中国正在崛起的创新原动力！</p>
<h2 id="购买原因">购买原因</h2><p>如何选择枕头 - <a href="https://www.muji.tw/mujilife/pillow/" target="_blank" rel="external">https://www.muji.tw/mujilife/pillow/</a></p>
<ol>
<li>保护颈椎</li>
<li>只为得到更好的睡眠质量</li>
</ol>
<h2 id="真实体验">真实体验</h2><blockquote>
<p>被我睡了3天的感觉，评价一个枕头的好坏关键看3点</p>
</blockquote>
<ol>
<li>高度</li>
<li>软硬度</li>
<li>材质</li>
</ol>
<p>事实是我认为ThinkPillow基本都做到了，参考对象为被我睡了3年的记忆枕和MUJI价值450左右的枕头，而MUJI官方推荐的枕头选购方案可以参考扩展阅读，虽然一开始可能会有些不习惯，但利用充气(白色)和抽气(黑色)小球调整至你认为的最佳状态后就可以舒舒服服的睡大觉啦。</p>
<h2 id="实拍照片">实拍照片</h2><p><img src="http://ww1.sinaimg.cn/large/7207510dgw1f0lclwfq18j21kw1661kx.jpg" alt=""><br><img src="http://ww2.sinaimg.cn/large/7207510dgw1f0lckb3prsj21kw1667r9.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/7207510dgw1f0lclivcxaj21kw166ttx.jpg" alt=""></p>
]]></content>
    <summary type="html">
    <![CDATA[人的一生有三分之一时间在睡眠中度过，为什么不让自己睡得好点呢？]]>
    
    </summary>
    
      <category term="生活 | Life" scheme="http://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[利器]]></title>
    <link href="http://wsgzao.github.io/post/liqi/"/>
    <id>http://wsgzao.github.io/post/liqi/</id>
    <published>2016-01-08T16:30:32.000Z</published>
    <updated>2016-01-08T16:26:57.000Z</updated>
    <content type="html"><![CDATA[<p><img src="//i.v2ex.co/Gt4iYMe1.jpeg" alt=""></p>
<h2 id="更新记录">更新记录</h2><p>2016年01月09日 - 初稿</p>
<h2 id="介绍一下你自己和所做的工作。">介绍一下你自己和所做的工作。</h2><p>我是<a href="https://www.linkedin.com/in/aowang" target="_blank" rel="external">王奥(OX)</a>，目前在中国三大赌场之一担任DevOps运维工程师。我几乎翻阅了<a href="http://liqi.io/community/" target="_blank" rel="external">利器社群计划</a>的每一个链接，无论软或硬每个人都有自己喜欢的利器和使用方式，我们可以用先进的IDE Coding，也可以用平凡的Office写小说。最初的纸笔已经转变为各种灵活多样的辅助工具呈现在我们面前，将灵感和科技融合通过适合自己的利器来实现，做一个分享者、创造者。</p>
<h2 id="你都在使用哪些硬件？">你都在使用哪些硬件？</h2><blockquote>
<p>好奇心驱使着我不断去探寻科技的乐趣</p>
</blockquote>
<p>零客户端, ThinkPad X220i, ThinkPad X1 Carbon, 魅蓝Metal, iPad Mini 2, Kindle Paperwhite 2</p>
<h2 id="软件呢？">软件呢？</h2><blockquote>
<p>因为工作需要主要基于Windows为主，我将如实交代和Windows愉快的相处过程</p>
</blockquote>
<ol>
<li>操作系统是64位的Windows 10，推荐搭配8G内存和256GB固态硬盘提升幸福指数</li>
<li>好压+看图王构成2345伪流氓阵营 ，Adobe Photoshop/Faststone Capture/QQ截图共存</li>
<li>Listary用于代替Everything和Total Commander的效率神器，类比于Alfred</li>
<li>浏览器Maxthon用于主力怀旧，360极速和QQ浏览器在不同设备交叉体验，跨平台数据同步</li>
<li>没有绝对安全，好习惯很重要，腾讯电脑管家和360安全在不同设备针锋相对，一起耍流氓</li>
<li>Everynote同步笔记，快盘同步数据文件，跨平台数据同步</li>
<li>QQ/微信作为社交登录统一平台和安全中心，辐射第三方应用。移动端莫要忽视蚂蚁金服的影响力</li>
<li>输入法搜狗/百度/腾讯拼音纯净版混合模式体验中</li>
<li>百度网盘和360网盘互捅菊花</li>
<li>Office 2016搭配Foxit PhantomPDF，移动端推荐WPS</li>
<li>广告拦截ADSafe或阿呆喵</li>
<li>邮件收发QQ邮箱搭配Foxmail，跨平台数据同步</li>
<li>思维脑图FreeMind或XMind</li>
<li>远程协助AnyDesk或TeamViewer</li>
<li>终端管理Xmanager搭配MobaXterm</li>
<li>开发环境Visual Studio/JetBrains/GitHub/Sublime Text/Notepad2</li>
<li>虚拟化平台VMware Workstation/Horizon/vRealize</li>
<li>付费翻墙Shadowsocks</li>
<li>保持一份年轻的心</li>
</ol>
<blockquote>
<p>分享两篇自己坚持更新的文章</p>
</blockquote>
<p>自己整理的DevOps实用资源 - <a href="http://wsgzao.github.io/post/devops/" target="_blank" rel="external">http://wsgzao.github.io/post/devops/</a><br>Windows常用软件推荐 - <a href="http://wsgzao.github.io/post/windows/" target="_blank" rel="external">http://wsgzao.github.io/post/windows/</a></p>
<h2 id="你最理想的工作环境是什么？">你最理想的工作环境是什么？</h2><p>和一群优秀的小伙伴协作+扯蛋</p>
<h2 id="你平时获得工作灵感的方式有哪些？">你平时获得工作灵感的方式有哪些？</h2><p>浏览<a href="http://liqi.io" target="_blank" rel="external">利器</a></p>
<h2 id="推荐一件生活中的利器给大家。">推荐一件生活中的利器给大家。</h2><ol>
<li>好记性不如烂笔头，准备好<code>笔/本子/便利贴</code>，随时记录一切</li>
<li>如果大家有中午冬眠的习惯，可以尝试下<code>零听眼罩</code>+<code>MUJI无印良品微粒贴身靠枕</code>的类似搭配</li>
</ol>
<h2 id="利器社群计划">利器社群计划</h2><p>本文参与了「利器社群计划」，发现更多创造者和他们的工具：<a href="http://liqi.io/community/" target="_blank" rel="external">http://liqi.io/community/</a></p>
]]></content>
    <summary type="html">
    <![CDATA[创造者和他们的工具]]>
    
    </summary>
    
      <category term="生活 | Life" scheme="http://wsgzao.github.io/categories/%E7%94%9F%E6%B4%BB-Life/"/>
    
  </entry>
  
</feed>